(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function jA(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var om={exports:{}},xl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dv;function UA(){if(Dv)return xl;Dv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:d,ref:o!==void 0?o:null,props:u}}return xl.Fragment=e,xl.jsx=n,xl.jsxs=n,xl}var Ov;function PA(){return Ov||(Ov=1,om.exports=UA()),om.exports}var v=PA(),lm={exports:{}},Rl={},um={exports:{}},cm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mv;function LA(){return Mv||(Mv=1,(function(s){function e($,oe){var ge=$.length;$.push(oe);e:for(;0<ge;){var Pe=ge-1>>>1,Fe=$[Pe];if(0<o(Fe,oe))$[Pe]=oe,$[ge]=Fe,ge=Pe;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var oe=$[0],ge=$.pop();if(ge!==oe){$[0]=ge;e:for(var Pe=0,Fe=$.length,M=Fe>>>1;Pe<M;){var Y=2*(Pe+1)-1,ie=$[Y],he=Y+1,ve=$[he];if(0>o(ie,ge))he<Fe&&0>o(ve,ie)?($[Pe]=ve,$[he]=ge,Pe=he):($[Pe]=ie,$[Y]=ge,Pe=Y);else if(he<Fe&&0>o(ve,ge))$[Pe]=ve,$[he]=ge,Pe=he;else break e}}return oe}function o($,oe){var ge=$.sortIndex-oe.sortIndex;return ge!==0?ge:$.id-oe.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var d=Date,m=d.now();s.unstable_now=function(){return d.now()-m}}var g=[],y=[],b=1,A=null,x=3,j=!1,K=!1,G=!1,F=!1,se=typeof setTimeout=="function"?setTimeout:null,le=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;function ee($){for(var oe=n(y);oe!==null;){if(oe.callback===null)r(y);else if(oe.startTime<=$)r(y),oe.sortIndex=oe.expirationTime,e(g,oe);else break;oe=n(y)}}function me($){if(G=!1,ee($),!K)if(n(g)!==null)K=!0,ne||(ne=!0,V());else{var oe=n(y);oe!==null&&Ut(me,oe.startTime-$)}}var ne=!1,R=-1,S=5,C=-1;function O(){return F?!0:!(s.unstable_now()-C<S)}function k(){if(F=!1,ne){var $=s.unstable_now();C=$;var oe=!0;try{e:{K=!1,G&&(G=!1,le(R),R=-1),j=!0;var ge=x;try{t:{for(ee($),A=n(g);A!==null&&!(A.expirationTime>$&&O());){var Pe=A.callback;if(typeof Pe=="function"){A.callback=null,x=A.priorityLevel;var Fe=Pe(A.expirationTime<=$);if($=s.unstable_now(),typeof Fe=="function"){A.callback=Fe,ee($),oe=!0;break t}A===n(g)&&r(g),ee($)}else r(g);A=n(g)}if(A!==null)oe=!0;else{var M=n(y);M!==null&&Ut(me,M.startTime-$),oe=!1}}break e}finally{A=null,x=ge,j=!1}oe=void 0}}finally{oe?V():ne=!1}}}var V;if(typeof re=="function")V=function(){re(k)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,Rt=N.port2;N.port1.onmessage=k,V=function(){Rt.postMessage(null)}}else V=function(){se(k,0)};function Ut($,oe){R=se(function(){$(s.unstable_now())},oe)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function($){$.callback=null},s.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<$?Math.floor(1e3/$):5},s.unstable_getCurrentPriorityLevel=function(){return x},s.unstable_next=function($){switch(x){case 1:case 2:case 3:var oe=3;break;default:oe=x}var ge=x;x=oe;try{return $()}finally{x=ge}},s.unstable_requestPaint=function(){F=!0},s.unstable_runWithPriority=function($,oe){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ge=x;x=$;try{return oe()}finally{x=ge}},s.unstable_scheduleCallback=function($,oe,ge){var Pe=s.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?Pe+ge:Pe):ge=Pe,$){case 1:var Fe=-1;break;case 2:Fe=250;break;case 5:Fe=1073741823;break;case 4:Fe=1e4;break;default:Fe=5e3}return Fe=ge+Fe,$={id:b++,callback:oe,priorityLevel:$,startTime:ge,expirationTime:Fe,sortIndex:-1},ge>Pe?($.sortIndex=ge,e(y,$),n(g)===null&&$===n(y)&&(G?(le(R),R=-1):G=!0,Ut(me,ge-Pe))):($.sortIndex=Fe,e(g,$),K||j||(K=!0,ne||(ne=!0,V()))),$},s.unstable_shouldYield=O,s.unstable_wrapCallback=function($){var oe=x;return function(){var ge=x;x=oe;try{return $.apply(this,arguments)}finally{x=ge}}}})(cm)),cm}var kv;function zA(){return kv||(kv=1,um.exports=LA()),um.exports}var hm={exports:{}},Te={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vv;function BA(){if(Vv)return Te;Vv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),x=Symbol.iterator;function j(M){return M===null||typeof M!="object"?null:(M=x&&M[x]||M["@@iterator"],typeof M=="function"?M:null)}var K={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,F={};function se(M,Y,ie){this.props=M,this.context=Y,this.refs=F,this.updater=ie||K}se.prototype.isReactComponent={},se.prototype.setState=function(M,Y){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,Y,"setState")},se.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function le(){}le.prototype=se.prototype;function re(M,Y,ie){this.props=M,this.context=Y,this.refs=F,this.updater=ie||K}var ee=re.prototype=new le;ee.constructor=re,G(ee,se.prototype),ee.isPureReactComponent=!0;var me=Array.isArray;function ne(){}var R={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function C(M,Y,ie){var he=ie.ref;return{$$typeof:s,type:M,key:Y,ref:he!==void 0?he:null,props:ie}}function O(M,Y){return C(M.type,Y,M.props)}function k(M){return typeof M=="object"&&M!==null&&M.$$typeof===s}function V(M){var Y={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ie){return Y[ie]})}var N=/\/+/g;function Rt(M,Y){return typeof M=="object"&&M!==null&&M.key!=null?V(""+M.key):Y.toString(36)}function Ut(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(ne,ne):(M.status="pending",M.then(function(Y){M.status==="pending"&&(M.status="fulfilled",M.value=Y)},function(Y){M.status==="pending"&&(M.status="rejected",M.reason=Y)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function $(M,Y,ie,he,ve){var Re=typeof M;(Re==="undefined"||Re==="boolean")&&(M=null);var ke=!1;if(M===null)ke=!0;else switch(Re){case"bigint":case"string":case"number":ke=!0;break;case"object":switch(M.$$typeof){case s:case e:ke=!0;break;case b:return ke=M._init,$(ke(M._payload),Y,ie,he,ve)}}if(ke)return ve=ve(M),ke=he===""?"."+Rt(M,0):he,me(ve)?(ie="",ke!=null&&(ie=ke.replace(N,"$&/")+"/"),$(ve,Y,ie,"",function(si){return si})):ve!=null&&(k(ve)&&(ve=O(ve,ie+(ve.key==null||M&&M.key===ve.key?"":(""+ve.key).replace(N,"$&/")+"/")+ke)),Y.push(ve)),1;ke=0;var Pt=he===""?".":he+":";if(me(M))for(var rt=0;rt<M.length;rt++)he=M[rt],Re=Pt+Rt(he,rt),ke+=$(he,Y,ie,Re,ve);else if(rt=j(M),typeof rt=="function")for(M=rt.call(M),rt=0;!(he=M.next()).done;)he=he.value,Re=Pt+Rt(he,rt++),ke+=$(he,Y,ie,Re,ve);else if(Re==="object"){if(typeof M.then=="function")return $(Ut(M),Y,ie,he,ve);throw Y=String(M),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return ke}function oe(M,Y,ie){if(M==null)return M;var he=[],ve=0;return $(M,he,"","",function(Re){return Y.call(ie,Re,ve++)}),he}function ge(M){if(M._status===-1){var Y=M._result;Y=Y(),Y.then(function(ie){(M._status===0||M._status===-1)&&(M._status=1,M._result=ie)},function(ie){(M._status===0||M._status===-1)&&(M._status=2,M._result=ie)}),M._status===-1&&(M._status=0,M._result=Y)}if(M._status===1)return M._result.default;throw M._result}var Pe=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Fe={map:oe,forEach:function(M,Y,ie){oe(M,function(){Y.apply(this,arguments)},ie)},count:function(M){var Y=0;return oe(M,function(){Y++}),Y},toArray:function(M){return oe(M,function(Y){return Y})||[]},only:function(M){if(!k(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Te.Activity=A,Te.Children=Fe,Te.Component=se,Te.Fragment=n,Te.Profiler=o,Te.PureComponent=re,Te.StrictMode=r,Te.Suspense=g,Te.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Te.__COMPILER_RUNTIME={__proto__:null,c:function(M){return R.H.useMemoCache(M)}},Te.cache=function(M){return function(){return M.apply(null,arguments)}},Te.cacheSignal=function(){return null},Te.cloneElement=function(M,Y,ie){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var he=G({},M.props),ve=M.key;if(Y!=null)for(Re in Y.key!==void 0&&(ve=""+Y.key),Y)!S.call(Y,Re)||Re==="key"||Re==="__self"||Re==="__source"||Re==="ref"&&Y.ref===void 0||(he[Re]=Y[Re]);var Re=arguments.length-2;if(Re===1)he.children=ie;else if(1<Re){for(var ke=Array(Re),Pt=0;Pt<Re;Pt++)ke[Pt]=arguments[Pt+2];he.children=ke}return C(M.type,ve,he)},Te.createContext=function(M){return M={$$typeof:d,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:u,_context:M},M},Te.createElement=function(M,Y,ie){var he,ve={},Re=null;if(Y!=null)for(he in Y.key!==void 0&&(Re=""+Y.key),Y)S.call(Y,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(ve[he]=Y[he]);var ke=arguments.length-2;if(ke===1)ve.children=ie;else if(1<ke){for(var Pt=Array(ke),rt=0;rt<ke;rt++)Pt[rt]=arguments[rt+2];ve.children=Pt}if(M&&M.defaultProps)for(he in ke=M.defaultProps,ke)ve[he]===void 0&&(ve[he]=ke[he]);return C(M,Re,ve)},Te.createRef=function(){return{current:null}},Te.forwardRef=function(M){return{$$typeof:m,render:M}},Te.isValidElement=k,Te.lazy=function(M){return{$$typeof:b,_payload:{_status:-1,_result:M},_init:ge}},Te.memo=function(M,Y){return{$$typeof:y,type:M,compare:Y===void 0?null:Y}},Te.startTransition=function(M){var Y=R.T,ie={};R.T=ie;try{var he=M(),ve=R.S;ve!==null&&ve(ie,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(ne,Pe)}catch(Re){Pe(Re)}finally{Y!==null&&ie.types!==null&&(Y.types=ie.types),R.T=Y}},Te.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Te.use=function(M){return R.H.use(M)},Te.useActionState=function(M,Y,ie){return R.H.useActionState(M,Y,ie)},Te.useCallback=function(M,Y){return R.H.useCallback(M,Y)},Te.useContext=function(M){return R.H.useContext(M)},Te.useDebugValue=function(){},Te.useDeferredValue=function(M,Y){return R.H.useDeferredValue(M,Y)},Te.useEffect=function(M,Y){return R.H.useEffect(M,Y)},Te.useEffectEvent=function(M){return R.H.useEffectEvent(M)},Te.useId=function(){return R.H.useId()},Te.useImperativeHandle=function(M,Y,ie){return R.H.useImperativeHandle(M,Y,ie)},Te.useInsertionEffect=function(M,Y){return R.H.useInsertionEffect(M,Y)},Te.useLayoutEffect=function(M,Y){return R.H.useLayoutEffect(M,Y)},Te.useMemo=function(M,Y){return R.H.useMemo(M,Y)},Te.useOptimistic=function(M,Y){return R.H.useOptimistic(M,Y)},Te.useReducer=function(M,Y,ie){return R.H.useReducer(M,Y,ie)},Te.useRef=function(M){return R.H.useRef(M)},Te.useState=function(M){return R.H.useState(M)},Te.useSyncExternalStore=function(M,Y,ie){return R.H.useSyncExternalStore(M,Y,ie)},Te.useTransition=function(){return R.H.useTransition()},Te.version="19.2.0",Te}var jv;function sp(){return jv||(jv=1,hm.exports=BA()),hm.exports}var dm={exports:{}},Zt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uv;function qA(){if(Uv)return Zt;Uv=1;var s=sp();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,y,b){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:A==null?null:""+A,children:g,containerInfo:y,implementation:b}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Zt.createPortal=function(g,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(g,y,null,b)},Zt.flushSync=function(g){var y=d.T,b=r.p;try{if(d.T=null,r.p=2,g)return g()}finally{d.T=y,r.p=b,r.d.f()}},Zt.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(g,y))},Zt.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},Zt.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var b=y.as,A=m(b,y.crossOrigin),x=typeof y.integrity=="string"?y.integrity:void 0,j=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?r.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:A,integrity:x,fetchPriority:j}):b==="script"&&r.d.X(g,{crossOrigin:A,integrity:x,fetchPriority:j,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Zt.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=m(y.as,y.crossOrigin);r.d.M(g,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(g)},Zt.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,A=m(b,y.crossOrigin);r.d.L(g,b,{crossOrigin:A,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Zt.preloadModule=function(g,y){if(typeof g=="string")if(y){var b=m(y.as,y.crossOrigin);r.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(g)},Zt.requestFormReset=function(g){r.d.r(g)},Zt.unstable_batchedUpdates=function(g,y){return g(y)},Zt.useFormState=function(g,y,b){return d.H.useFormState(g,y,b)},Zt.useFormStatus=function(){return d.H.useHostTransitionStatus()},Zt.version="19.2.0",Zt}var Pv;function HA(){if(Pv)return dm.exports;Pv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),dm.exports=qA(),dm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lv;function FA(){if(Lv)return Rl;Lv=1;var s=zA(),e=sp(),n=HA();function r(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function d(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function m(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(r(188))}function y(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(r(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return g(h),t;if(f===l)return g(h),i;f=f.sibling}throw Error(r(188))}if(a.return!==l.return)a=h,l=f;else{for(var _=!1,T=h.child;T;){if(T===a){_=!0,a=h,l=f;break}if(T===l){_=!0,l=h,a=f;break}T=T.sibling}if(!_){for(T=f.child;T;){if(T===a){_=!0,a=f,l=h;break}if(T===l){_=!0,l=f,a=h;break}T=T.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:i}function b(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=b(t),i!==null)return i;t=t.sibling}return null}var A=Object.assign,x=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),K=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),se=Symbol.for("react.profiler"),le=Symbol.for("react.consumer"),re=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),me=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function V(t){return t===null||typeof t!="object"?null:(t=k&&t[k]||t["@@iterator"],typeof t=="function"?t:null)}var N=Symbol.for("react.client.reference");function Rt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===N?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case G:return"Fragment";case se:return"Profiler";case F:return"StrictMode";case me:return"Suspense";case ne:return"SuspenseList";case C:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case K:return"Portal";case re:return t.displayName||"Context";case le:return(t._context.displayName||"Context")+".Consumer";case ee:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case R:return i=t.displayName||null,i!==null?i:Rt(t.type)||"Memo";case S:i=t._payload,t=t._init;try{return Rt(t(i))}catch{}}return null}var Ut=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},Pe=[],Fe=-1;function M(t){return{current:t}}function Y(t){0>Fe||(t.current=Pe[Fe],Pe[Fe]=null,Fe--)}function ie(t,i){Fe++,Pe[Fe]=t.current,t.current=i}var he=M(null),ve=M(null),Re=M(null),ke=M(null);function Pt(t,i){switch(ie(Re,i),ie(ve,t),ie(he,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?ev(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=ev(i),t=tv(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Y(he),ie(he,t)}function rt(){Y(he),Y(ve),Y(Re)}function si(t){t.memoizedState!==null&&ie(ke,t);var i=he.current,a=tv(i,t.type);i!==a&&(ie(ve,t),ie(he,a))}function Ai(t){ve.current===t&&(Y(he),Y(ve)),ke.current===t&&(Y(ke),Tl._currentValue=ge)}var yr,ha;function $n(t){if(yr===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);yr=i&&i[1]||"",ha=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+yr+t+ha}var _r=!1;function da(t,i){if(!t||_r)return"";_r=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(q){var B=q}Reflect.construct(t,[],J)}else{try{J.call()}catch(q){B=q}t.call(J.prototype)}}else{try{throw Error()}catch(q){B=q}(J=t())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(q){if(q&&B&&typeof q.stack=="string")return[q.stack,B.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),_=f[0],T=f[1];if(_&&T){var I=_.split(`
`),z=T.split(`
`);for(h=l=0;l<I.length&&!I[l].includes("DetermineComponentFrameRoot");)l++;for(;h<z.length&&!z[h].includes("DetermineComponentFrameRoot");)h++;if(l===I.length||h===z.length)for(l=I.length-1,h=z.length-1;1<=l&&0<=h&&I[l]!==z[h];)h--;for(;1<=l&&0<=h;l--,h--)if(I[l]!==z[h]){if(l!==1||h!==1)do if(l--,h--,0>h||I[l]!==z[h]){var Q=`
`+I[l].replace(" at new "," at ");return t.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",t.displayName)),Q}while(1<=l&&0<=h);break}}}finally{_r=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?$n(a):""}function id(t,i){switch(t.tag){case 26:case 27:case 5:return $n(t.type);case 16:return $n("Lazy");case 13:return t.child!==i&&i!==null?$n("Suspense Fallback"):$n("Suspense");case 19:return $n("SuspenseList");case 0:case 15:return da(t.type,!1);case 11:return da(t.type.render,!1);case 1:return da(t.type,!0);case 31:return $n("Activity");default:return""}}function uu(t){try{var i="",a=null;do i+=id(t,a),a=t,t=t.return;while(t);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var fa=Object.prototype.hasOwnProperty,vr=s.unstable_scheduleCallback,ma=s.unstable_cancelCallback,sd=s.unstable_shouldYield,So=s.unstable_requestPaint,Lt=s.unstable_now,cu=s.unstable_getCurrentPriorityLevel,Ct=s.unstable_ImmediatePriority,Dt=s.unstable_UserBlockingPriority,Si=s.unstable_NormalPriority,hu=s.unstable_LowPriority,xo=s.unstable_IdlePriority,rd=s.log,Er=s.unstable_setDisableYieldValue,ds=null,Xt=null;function kn(t){if(typeof rd=="function"&&Er(t),Xt&&typeof Xt.setStrictMode=="function")try{Xt.setStrictMode(ds,t)}catch{}}var rn=Math.clz32?Math.clz32:du,ad=Math.log,Ro=Math.LN2;function du(t){return t>>>=0,t===0?32:31-(ad(t)/Ro|0)|0}var br=256,ri=262144,fs=4194304;function Yn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Vn(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,f=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~f,l!==0?h=Yn(l):(_&=T,_!==0?h=Yn(_):a||(a=T&~t,a!==0&&(h=Yn(a))))):(T=l&~f,T!==0?h=Yn(T):_!==0?h=Yn(_):a||(a=l&~t,a!==0&&(h=Yn(a)))),h===0?0:i!==0&&i!==h&&(i&f)===0&&(f=h&-h,a=i&-i,f>=a||f===32&&(a&4194048)!==0)?i:h}function ms(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function pa(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Co(){var t=fs;return fs<<=1,(fs&62914560)===0&&(fs=4194304),t}function xi(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function ps(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function zt(t,i,a,l,h,f){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,I=t.expirationTimes,z=t.hiddenUpdates;for(a=_&~a;0<a;){var Q=31-rn(a),J=1<<Q;T[Q]=0,I[Q]=-1;var B=z[Q];if(B!==null)for(z[Q]=null,Q=0;Q<B.length;Q++){var q=B[Q];q!==null&&(q.lane&=-536870913)}a&=~J}l!==0&&No(t,l,0),f!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=f&~(_&~i))}function No(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-rn(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function gs(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-rn(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function ys(t,i){var a=i&-i;return a=(a&42)!==0?1:Io(a),(a&(t.suspendedLanes|i))!==0?0:a}function Io(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Do(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ri(){var t=oe.p;return t!==0?t:(t=window.event,t===void 0?32:Av(t.type))}function fu(t,i){var a=oe.p;try{return oe.p=t,i()}finally{oe.p=a}}var ai=Math.random().toString(36).slice(2),lt="__reactFiber$"+ai,Bt="__reactProps$"+ai,oi="__reactContainer$"+ai,_s="__reactEvents$"+ai,li="__reactListeners$"+ai,mu="__reactHandles$"+ai,Oo="__reactResources$"+ai,Ci="__reactMarker$"+ai;function Tr(t){delete t[lt],delete t[Bt],delete t[_s],delete t[li],delete t[mu]}function Ni(t){var i=t[lt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[oi]||a[lt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=lv(t);t!==null;){if(a=t[lt])return a;t=lv(t)}return i}t=a,a=t.parentNode}return null}function Ii(t){if(t=t[lt]||t[oi]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function wr(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(r(33))}function Xn(t){var i=t[Oo];return i||(i=t[Oo]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function mt(t){t[Ci]=!0}var ga=new Set,vs={};function an(t,i){ui(t,i),ui(t+"Capture",i)}function ui(t,i){for(vs[t]=i,t=0;t<i.length;t++)ga.add(i[t])}var od=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Mo={},ko={};function pu(t){return fa.call(ko,t)?!0:fa.call(Mo,t)?!1:od.test(t)?ko[t]=!0:(Mo[t]=!0,!1)}function Es(t,i,a){if(pu(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function bs(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function jn(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}function on(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function gu(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function ld(t,i,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,f=l.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(_){a=""+_,f.call(this,_)}}),Object.defineProperty(t,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function ya(t){if(!t._valueTracker){var i=gu(t)?"checked":"value";t._valueTracker=ld(t,i,""+t[i])}}function Vo(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=gu(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function _a(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Di=/[\n"\\]/g;function ut(t){return t.replace(Di,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Ts(t,i,a,l,h,f,_,T){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),i!=null?_==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+on(i)):t.value!==""+on(i)&&(t.value=""+on(i)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),i!=null?va(t,_,on(i)):a!=null?va(t,_,on(a)):l!=null&&t.removeAttribute("value"),h==null&&f!=null&&(t.defaultChecked=!!f),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+on(T):t.removeAttribute("name")}function Ar(t,i,a,l,h,f,_,T){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),i!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||i!=null)){ya(t);return}a=a!=null?""+on(a):"",i=i!=null?""+on(i):a,T||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),ya(t)}function va(t,i,a){i==="number"&&_a(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Le(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+on(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function Sr(t,i,a){if(i!=null&&(i=""+on(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+on(a):""}function ws(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(Ut(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=on(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),ya(t)}function Un(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var ud=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jo(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||ud.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function yu(t,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&jo(t,h,l)}else for(var f in i)i.hasOwnProperty(f)&&jo(t,f,i[f])}function Uo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ci(t){return hd.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Ot(){}var Ea=null;function ba(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Oi=null,bn=null;function _u(t){var i=Ii(t);if(i&&(t=i.stateNode)){var a=t[Bt]||null;e:switch(t=i.stateNode,i.type){case"input":if(Ts(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ut(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[Bt]||null;if(!h)throw Error(r(90));Ts(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&Vo(l)}break e;case"textarea":Sr(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Le(t,!!a.multiple,i,!1)}}}var Po=!1;function vu(t,i,a){if(Po)return t(i,a);Po=!0;try{var l=t(i);return l}finally{if(Po=!1,(Oi!==null||bn!==null)&&(pc(),Oi&&(i=Oi,t=bn,bn=Oi=null,_u(i),t)))for(i=0;i<t.length;i++)_u(t[i])}}function dn(t,i){var a=t.stateNode;if(a===null)return null;var l=a[Bt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var Jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lo=!1;if(Jn)try{var hi={};Object.defineProperty(hi,"passive",{get:function(){Lo=!0}}),window.addEventListener("test",hi,hi),window.removeEventListener("test",hi,hi)}catch{Lo=!1}var Tn=null,Ta=null,di=null;function As(){if(di)return di;var t,i=Ta,a=i.length,l,h="value"in Tn?Tn.value:Tn.textContent,f=h.length;for(t=0;t<a&&i[t]===h[t];t++);var _=a-t;for(l=1;l<=_&&i[a-l]===h[f-l];l++);return di=h.slice(t,1<l?1-l:void 0)}function xr(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Ss(){return!0}function et(){return!1}function Jt(t){function i(a,l,h,f,_){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=f,this.target=_,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(f):f[T]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Ss:et,this.isPropagationStopped=et,this}return A(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ss)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ss)},persist:function(){},isPersistent:Ss}),i}var Mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rr=Jt(Mi),xs=A({},Mi,{view:0,detail:0}),Eu=Jt(xs),Rs,wa,ln,Cr=A({},xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ns,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ln&&(ln&&t.type==="mousemove"?(Rs=t.screenX-ln.screenX,wa=t.screenY-ln.screenY):wa=Rs=0,ln=t),Rs)},movementY:function(t){return"movementY"in t?t.movementY:wa}}),bu=Jt(Cr),Nr=A({},Cr,{dataTransfer:0}),Tu=Jt(Nr),zo=A({},xs,{relatedTarget:0}),Cs=Jt(zo),wu=A({},Mi,{animationName:0,elapsedTime:0,pseudoElement:0}),Aa=Jt(wu),dd=A({},Mi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Au=Jt(dd),Ir=A({},Mi,{data:0}),Bo=Jt(Ir),Su={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ho={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xu(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Ho[t])?!!i[t]:!1}function Ns(){return xu}var Ru=A({},xs,{key:function(t){if(t.key){var i=Su[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=xr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?qo[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ns,charCode:function(t){return t.type==="keypress"?xr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Cu=Jt(Ru),ki=A({},Cr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fo=Jt(ki),Nu=A({},xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ns}),Iu=Jt(Nu),Du=A({},Mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sa=Jt(Du),un=A({},Cr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ou=Jt(un),Mu=A({},Mi,{newState:0,oldState:0}),Is=Jt(Mu),c=[9,13,27,32],p=Jn&&"CompositionEvent"in window,E=null;Jn&&"documentMode"in document&&(E=document.documentMode);var w=Jn&&"TextEvent"in window&&!E,P=Jn&&(!p||E&&8<E&&11>=E),H=" ",ae=!1;function Ge(t,i){switch(t){case"keyup":return c.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Et(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ce=!1;function Mt(t,i){switch(t){case"compositionend":return Et(i);case"keypress":return i.which!==32?null:(ae=!0,H);case"textInput":return t=i.data,t===H&&ae?null:t;default:return null}}function kt(t,i){if(Ce)return t==="compositionend"||!p&&Ge(t,i)?(t=As(),di=Ta=Tn=null,Ce=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return P&&i.locale!=="ko"?null:i.data;default:return null}}var Ds={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fn(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Ds[t.type]:i==="textarea"}function Dr(t,i,a,l){Oi?bn?bn.push(l):bn=[l]:Oi=l,i=Tc(i,"onChange"),0<i.length&&(a=new Rr("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var Vi=null,Go=null;function uw(t){$_(t,0)}function ku(t){var i=wr(t);if(Vo(i))return t}function fg(t,i){if(t==="change")return i}var mg=!1;if(Jn){var fd;if(Jn){var md="oninput"in document;if(!md){var pg=document.createElement("div");pg.setAttribute("oninput","return;"),md=typeof pg.oninput=="function"}fd=md}else fd=!1;mg=fd&&(!document.documentMode||9<document.documentMode)}function gg(){Vi&&(Vi.detachEvent("onpropertychange",yg),Go=Vi=null)}function yg(t){if(t.propertyName==="value"&&ku(Go)){var i=[];Dr(i,Go,t,ba(t)),vu(uw,i)}}function cw(t,i,a){t==="focusin"?(gg(),Vi=i,Go=a,Vi.attachEvent("onpropertychange",yg)):t==="focusout"&&gg()}function hw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ku(Go)}function dw(t,i){if(t==="click")return ku(i)}function fw(t,i){if(t==="input"||t==="change")return ku(i)}function mw(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var wn=typeof Object.is=="function"?Object.is:mw;function Ko(t,i){if(wn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!fa.call(i,h)||!wn(t[h],i[h]))return!1}return!0}function _g(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vg(t,i){var a=_g(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=_g(a)}}function Eg(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Eg(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function bg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=_a(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=_a(t.document)}return i}function pd(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var pw=Jn&&"documentMode"in document&&11>=document.documentMode,xa=null,gd=null,Qo=null,yd=!1;function Tg(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;yd||xa==null||xa!==_a(l)||(l=xa,"selectionStart"in l&&pd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Qo&&Ko(Qo,l)||(Qo=l,l=Tc(gd,"onSelect"),0<l.length&&(i=new Rr("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=xa)))}function Or(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var Ra={animationend:Or("Animation","AnimationEnd"),animationiteration:Or("Animation","AnimationIteration"),animationstart:Or("Animation","AnimationStart"),transitionrun:Or("Transition","TransitionRun"),transitionstart:Or("Transition","TransitionStart"),transitioncancel:Or("Transition","TransitionCancel"),transitionend:Or("Transition","TransitionEnd")},_d={},wg={};Jn&&(wg=document.createElement("div").style,"AnimationEvent"in window||(delete Ra.animationend.animation,delete Ra.animationiteration.animation,delete Ra.animationstart.animation),"TransitionEvent"in window||delete Ra.transitionend.transition);function Mr(t){if(_d[t])return _d[t];if(!Ra[t])return t;var i=Ra[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in wg)return _d[t]=i[a];return t}var Ag=Mr("animationend"),Sg=Mr("animationiteration"),xg=Mr("animationstart"),gw=Mr("transitionrun"),yw=Mr("transitionstart"),_w=Mr("transitioncancel"),Rg=Mr("transitionend"),Cg=new Map,vd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vd.push("scrollEnd");function Zn(t,i){Cg.set(t,i),an(i,[t])}var Vu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Pn=[],Ca=0,Ed=0;function ju(){for(var t=Ca,i=Ed=Ca=0;i<t;){var a=Pn[i];Pn[i++]=null;var l=Pn[i];Pn[i++]=null;var h=Pn[i];Pn[i++]=null;var f=Pn[i];if(Pn[i++]=null,l!==null&&h!==null){var _=l.pending;_===null?h.next=h:(h.next=_.next,_.next=h),l.pending=h}f!==0&&Ng(a,h,f)}}function Uu(t,i,a,l){Pn[Ca++]=t,Pn[Ca++]=i,Pn[Ca++]=a,Pn[Ca++]=l,Ed|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function bd(t,i,a,l){return Uu(t,i,a,l),Pu(t)}function kr(t,i){return Uu(t,null,null,i),Pu(t)}function Ng(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(h=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,h&&i!==null&&(h=31-rn(a),t=f.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=a|536870912),f):null}function Pu(t){if(50<pl)throw pl=0,Df=null,Error(r(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Na={};function vw(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(t,i,a,l){return new vw(t,i,a,l)}function Td(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ji(t,i){var a=t.alternate;return a===null?(a=An(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Ig(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Lu(t,i,a,l,h,f){var _=0;if(l=t,typeof t=="function")Td(t)&&(_=1);else if(typeof t=="string")_=AA(t,a,he.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case C:return t=An(31,a,i,h),t.elementType=C,t.lanes=f,t;case G:return Vr(a.children,h,f,i);case F:_=8,h|=24;break;case se:return t=An(12,a,i,h|2),t.elementType=se,t.lanes=f,t;case me:return t=An(13,a,i,h),t.elementType=me,t.lanes=f,t;case ne:return t=An(19,a,i,h),t.elementType=ne,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case re:_=10;break e;case le:_=9;break e;case ee:_=11;break e;case R:_=14;break e;case S:_=16,l=null;break e}_=29,a=Error(r(130,t===null?"null":typeof t,"")),l=null}return i=An(_,a,i,h),i.elementType=t,i.type=l,i.lanes=f,i}function Vr(t,i,a,l){return t=An(7,t,l,i),t.lanes=a,t}function wd(t,i,a){return t=An(6,t,null,i),t.lanes=a,t}function Dg(t){var i=An(18,null,null,0);return i.stateNode=t,i}function Ad(t,i,a){return i=An(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Og=new WeakMap;function Ln(t,i){if(typeof t=="object"&&t!==null){var a=Og.get(t);return a!==void 0?a:(i={value:t,source:i,stack:uu(i)},Og.set(t,i),i)}return{value:t,source:i,stack:uu(i)}}var Ia=[],Da=0,zu=null,$o=0,zn=[],Bn=0,Os=null,fi=1,mi="";function Ui(t,i){Ia[Da++]=$o,Ia[Da++]=zu,zu=t,$o=i}function Mg(t,i,a){zn[Bn++]=fi,zn[Bn++]=mi,zn[Bn++]=Os,Os=t;var l=fi;t=mi;var h=32-rn(l)-1;l&=~(1<<h),a+=1;var f=32-rn(i)+h;if(30<f){var _=h-h%5;f=(l&(1<<_)-1).toString(32),l>>=_,h-=_,fi=1<<32-rn(i)+h|a<<h|l,mi=f+t}else fi=1<<f|a<<h|l,mi=t}function Sd(t){t.return!==null&&(Ui(t,1),Mg(t,1,0))}function xd(t){for(;t===zu;)zu=Ia[--Da],Ia[Da]=null,$o=Ia[--Da],Ia[Da]=null;for(;t===Os;)Os=zn[--Bn],zn[Bn]=null,mi=zn[--Bn],zn[Bn]=null,fi=zn[--Bn],zn[Bn]=null}function kg(t,i){zn[Bn++]=fi,zn[Bn++]=mi,zn[Bn++]=Os,fi=i.id,mi=i.overflow,Os=t}var qt=null,tt=null,Ve=!1,Ms=null,qn=!1,Rd=Error(r(519));function ks(t){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Yo(Ln(i,t)),Rd}function Vg(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[lt]=t,i[Bt]=l,a){case"dialog":Ie("cancel",i),Ie("close",i);break;case"iframe":case"object":case"embed":Ie("load",i);break;case"video":case"audio":for(a=0;a<yl.length;a++)Ie(yl[a],i);break;case"source":Ie("error",i);break;case"img":case"image":case"link":Ie("error",i),Ie("load",i);break;case"details":Ie("toggle",i);break;case"input":Ie("invalid",i),Ar(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ie("invalid",i);break;case"textarea":Ie("invalid",i),ws(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||Z_(i.textContent,a)?(l.popover!=null&&(Ie("beforetoggle",i),Ie("toggle",i)),l.onScroll!=null&&Ie("scroll",i),l.onScrollEnd!=null&&Ie("scrollend",i),l.onClick!=null&&(i.onclick=Ot),i=!0):i=!1,i||ks(t,!0)}function jg(t){for(qt=t.return;qt;)switch(qt.tag){case 5:case 31:case 13:qn=!1;return;case 27:case 3:qn=!0;return;default:qt=qt.return}}function Oa(t){if(t!==qt)return!1;if(!Ve)return jg(t),Ve=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Kf(t.type,t.memoizedProps)),a=!a),a&&tt&&ks(t),jg(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));tt=ov(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));tt=ov(t)}else i===27?(i=tt,$s(t.type)?(t=Jf,Jf=null,tt=t):tt=i):tt=qt?Fn(t.stateNode.nextSibling):null;return!0}function jr(){tt=qt=null,Ve=!1}function Cd(){var t=Ms;return t!==null&&(yn===null?yn=t:yn.push.apply(yn,t),Ms=null),t}function Yo(t){Ms===null?Ms=[t]:Ms.push(t)}var Nd=M(null),Ur=null,Pi=null;function Vs(t,i,a){ie(Nd,i._currentValue),i._currentValue=a}function Li(t){t._currentValue=Nd.current,Y(Nd)}function Id(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function Dd(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var f=h.dependencies;if(f!==null){var _=h.child;f=f.firstContext;e:for(;f!==null;){var T=f;f=h;for(var I=0;I<i.length;I++)if(T.context===i[I]){f.lanes|=a,T=f.alternate,T!==null&&(T.lanes|=a),Id(f.return,a,t),l||(_=null);break e}f=T.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(r(341));_.lanes|=a,f=_.alternate,f!==null&&(f.lanes|=a),Id(_,a,t),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===t){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function Ma(t,i,a,l){t=null;for(var h=i,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var T=h.type;wn(h.pendingProps.value,_.value)||(t!==null?t.push(T):t=[T])}}else if(h===ke.current){if(_=h.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Tl):t=[Tl])}h=h.return}t!==null&&Dd(i,t,a,l),i.flags|=262144}function Bu(t){for(t=t.firstContext;t!==null;){if(!wn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Pr(t){Ur=t,Pi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ht(t){return Ug(Ur,t)}function qu(t,i){return Ur===null&&Pr(t),Ug(t,i)}function Ug(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Pi===null){if(t===null)throw Error(r(308));Pi=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Pi=Pi.next=i;return a}var Ew=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},bw=s.unstable_scheduleCallback,Tw=s.unstable_NormalPriority,bt={$$typeof:re,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Od(){return{controller:new Ew,data:new Map,refCount:0}}function Xo(t){t.refCount--,t.refCount===0&&bw(Tw,function(){t.controller.abort()})}var Jo=null,Md=0,ka=0,Va=null;function ww(t,i){if(Jo===null){var a=Jo=[];Md=0,ka=Uf(),Va={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Md++,i.then(Pg,Pg),i}function Pg(){if(--Md===0&&Jo!==null){Va!==null&&(Va.status="fulfilled");var t=Jo;Jo=null,ka=0,Va=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function Aw(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Lg=$.S;$.S=function(t,i){T_=Lt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&ww(t,i),Lg!==null&&Lg(t,i)};var Lr=M(null);function kd(){var t=Lr.current;return t!==null?t:Ze.pooledCache}function Hu(t,i){i===null?ie(Lr,Lr.current):ie(Lr,i.pool)}function zg(){var t=kd();return t===null?null:{parent:bt._currentValue,pool:t}}var ja=Error(r(460)),Vd=Error(r(474)),Fu=Error(r(542)),Gu={then:function(){}};function Bg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function qg(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Ot,Ot),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Fg(t),t;default:if(typeof i.status=="string")i.then(Ot,Ot);else{if(t=Ze,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Fg(t),t}throw Br=i,ja}}function zr(t){try{var i=t._init;return i(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Br=a,ja):a}}var Br=null;function Hg(){if(Br===null)throw Error(r(459));var t=Br;return Br=null,t}function Fg(t){if(t===ja||t===Fu)throw Error(r(483))}var Ua=null,Zo=0;function Ku(t){var i=Zo;return Zo+=1,Ua===null&&(Ua=[]),qg(Ua,t,i)}function Wo(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Qu(t,i){throw i.$$typeof===x?Error(r(525)):(t=Object.prototype.toString.call(i),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Gg(t){function i(U,D){if(t){var L=U.deletions;L===null?(U.deletions=[D],U.flags|=16):L.push(D)}}function a(U,D){if(!t)return null;for(;D!==null;)i(U,D),D=D.sibling;return null}function l(U){for(var D=new Map;U!==null;)U.key!==null?D.set(U.key,U):D.set(U.index,U),U=U.sibling;return D}function h(U,D){return U=ji(U,D),U.index=0,U.sibling=null,U}function f(U,D,L){return U.index=L,t?(L=U.alternate,L!==null?(L=L.index,L<D?(U.flags|=67108866,D):L):(U.flags|=67108866,D)):(U.flags|=1048576,D)}function _(U){return t&&U.alternate===null&&(U.flags|=67108866),U}function T(U,D,L,X){return D===null||D.tag!==6?(D=wd(L,U.mode,X),D.return=U,D):(D=h(D,L),D.return=U,D)}function I(U,D,L,X){var pe=L.type;return pe===G?Q(U,D,L.props.children,X,L.key):D!==null&&(D.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===S&&zr(pe)===D.type)?(D=h(D,L.props),Wo(D,L),D.return=U,D):(D=Lu(L.type,L.key,L.props,null,U.mode,X),Wo(D,L),D.return=U,D)}function z(U,D,L,X){return D===null||D.tag!==4||D.stateNode.containerInfo!==L.containerInfo||D.stateNode.implementation!==L.implementation?(D=Ad(L,U.mode,X),D.return=U,D):(D=h(D,L.children||[]),D.return=U,D)}function Q(U,D,L,X,pe){return D===null||D.tag!==7?(D=Vr(L,U.mode,X,pe),D.return=U,D):(D=h(D,L),D.return=U,D)}function J(U,D,L){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=wd(""+D,U.mode,L),D.return=U,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case j:return L=Lu(D.type,D.key,D.props,null,U.mode,L),Wo(L,D),L.return=U,L;case K:return D=Ad(D,U.mode,L),D.return=U,D;case S:return D=zr(D),J(U,D,L)}if(Ut(D)||V(D))return D=Vr(D,U.mode,L,null),D.return=U,D;if(typeof D.then=="function")return J(U,Ku(D),L);if(D.$$typeof===re)return J(U,qu(U,D),L);Qu(U,D)}return null}function B(U,D,L,X){var pe=D!==null?D.key:null;if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return pe!==null?null:T(U,D,""+L,X);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case j:return L.key===pe?I(U,D,L,X):null;case K:return L.key===pe?z(U,D,L,X):null;case S:return L=zr(L),B(U,D,L,X)}if(Ut(L)||V(L))return pe!==null?null:Q(U,D,L,X,null);if(typeof L.then=="function")return B(U,D,Ku(L),X);if(L.$$typeof===re)return B(U,D,qu(U,L),X);Qu(U,L)}return null}function q(U,D,L,X,pe){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return U=U.get(L)||null,T(D,U,""+X,pe);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case j:return U=U.get(X.key===null?L:X.key)||null,I(D,U,X,pe);case K:return U=U.get(X.key===null?L:X.key)||null,z(D,U,X,pe);case S:return X=zr(X),q(U,D,L,X,pe)}if(Ut(X)||V(X))return U=U.get(L)||null,Q(D,U,X,pe,null);if(typeof X.then=="function")return q(U,D,L,Ku(X),pe);if(X.$$typeof===re)return q(U,D,L,qu(D,X),pe);Qu(D,X)}return null}function ce(U,D,L,X){for(var pe=null,ze=null,fe=D,xe=D=0,Oe=null;fe!==null&&xe<L.length;xe++){fe.index>xe?(Oe=fe,fe=null):Oe=fe.sibling;var Be=B(U,fe,L[xe],X);if(Be===null){fe===null&&(fe=Oe);break}t&&fe&&Be.alternate===null&&i(U,fe),D=f(Be,D,xe),ze===null?pe=Be:ze.sibling=Be,ze=Be,fe=Oe}if(xe===L.length)return a(U,fe),Ve&&Ui(U,xe),pe;if(fe===null){for(;xe<L.length;xe++)fe=J(U,L[xe],X),fe!==null&&(D=f(fe,D,xe),ze===null?pe=fe:ze.sibling=fe,ze=fe);return Ve&&Ui(U,xe),pe}for(fe=l(fe);xe<L.length;xe++)Oe=q(fe,U,xe,L[xe],X),Oe!==null&&(t&&Oe.alternate!==null&&fe.delete(Oe.key===null?xe:Oe.key),D=f(Oe,D,xe),ze===null?pe=Oe:ze.sibling=Oe,ze=Oe);return t&&fe.forEach(function(Ws){return i(U,Ws)}),Ve&&Ui(U,xe),pe}function _e(U,D,L,X){if(L==null)throw Error(r(151));for(var pe=null,ze=null,fe=D,xe=D=0,Oe=null,Be=L.next();fe!==null&&!Be.done;xe++,Be=L.next()){fe.index>xe?(Oe=fe,fe=null):Oe=fe.sibling;var Ws=B(U,fe,Be.value,X);if(Ws===null){fe===null&&(fe=Oe);break}t&&fe&&Ws.alternate===null&&i(U,fe),D=f(Ws,D,xe),ze===null?pe=Ws:ze.sibling=Ws,ze=Ws,fe=Oe}if(Be.done)return a(U,fe),Ve&&Ui(U,xe),pe;if(fe===null){for(;!Be.done;xe++,Be=L.next())Be=J(U,Be.value,X),Be!==null&&(D=f(Be,D,xe),ze===null?pe=Be:ze.sibling=Be,ze=Be);return Ve&&Ui(U,xe),pe}for(fe=l(fe);!Be.done;xe++,Be=L.next())Be=q(fe,U,xe,Be.value,X),Be!==null&&(t&&Be.alternate!==null&&fe.delete(Be.key===null?xe:Be.key),D=f(Be,D,xe),ze===null?pe=Be:ze.sibling=Be,ze=Be);return t&&fe.forEach(function(VA){return i(U,VA)}),Ve&&Ui(U,xe),pe}function Je(U,D,L,X){if(typeof L=="object"&&L!==null&&L.type===G&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case j:e:{for(var pe=L.key;D!==null;){if(D.key===pe){if(pe=L.type,pe===G){if(D.tag===7){a(U,D.sibling),X=h(D,L.props.children),X.return=U,U=X;break e}}else if(D.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===S&&zr(pe)===D.type){a(U,D.sibling),X=h(D,L.props),Wo(X,L),X.return=U,U=X;break e}a(U,D);break}else i(U,D);D=D.sibling}L.type===G?(X=Vr(L.props.children,U.mode,X,L.key),X.return=U,U=X):(X=Lu(L.type,L.key,L.props,null,U.mode,X),Wo(X,L),X.return=U,U=X)}return _(U);case K:e:{for(pe=L.key;D!==null;){if(D.key===pe)if(D.tag===4&&D.stateNode.containerInfo===L.containerInfo&&D.stateNode.implementation===L.implementation){a(U,D.sibling),X=h(D,L.children||[]),X.return=U,U=X;break e}else{a(U,D);break}else i(U,D);D=D.sibling}X=Ad(L,U.mode,X),X.return=U,U=X}return _(U);case S:return L=zr(L),Je(U,D,L,X)}if(Ut(L))return ce(U,D,L,X);if(V(L)){if(pe=V(L),typeof pe!="function")throw Error(r(150));return L=pe.call(L),_e(U,D,L,X)}if(typeof L.then=="function")return Je(U,D,Ku(L),X);if(L.$$typeof===re)return Je(U,D,qu(U,L),X);Qu(U,L)}return typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint"?(L=""+L,D!==null&&D.tag===6?(a(U,D.sibling),X=h(D,L),X.return=U,U=X):(a(U,D),X=wd(L,U.mode,X),X.return=U,U=X),_(U)):a(U,D)}return function(U,D,L,X){try{Zo=0;var pe=Je(U,D,L,X);return Ua=null,pe}catch(fe){if(fe===ja||fe===Fu)throw fe;var ze=An(29,fe,null,U.mode);return ze.lanes=X,ze.return=U,ze}finally{}}}var qr=Gg(!0),Kg=Gg(!1),js=!1;function jd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ud(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Us(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ps(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(He&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=Pu(t),Ng(t,null,a),i}return Uu(t,l,i,a),Pu(t)}function el(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,gs(t,a)}}function Pd(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=_:f=f.next=_,a=a.next}while(a!==null);f===null?h=f=i:f=f.next=i}else h=f=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Ld=!1;function tl(){if(Ld){var t=Va;if(t!==null)throw t}}function nl(t,i,a,l){Ld=!1;var h=t.updateQueue;js=!1;var f=h.firstBaseUpdate,_=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var I=T,z=I.next;I.next=null,_===null?f=z:_.next=z,_=I;var Q=t.alternate;Q!==null&&(Q=Q.updateQueue,T=Q.lastBaseUpdate,T!==_&&(T===null?Q.firstBaseUpdate=z:T.next=z,Q.lastBaseUpdate=I))}if(f!==null){var J=h.baseState;_=0,Q=z=I=null,T=f;do{var B=T.lane&-536870913,q=B!==T.lane;if(q?(De&B)===B:(l&B)===B){B!==0&&B===ka&&(Ld=!0),Q!==null&&(Q=Q.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var ce=t,_e=T;B=i;var Je=a;switch(_e.tag){case 1:if(ce=_e.payload,typeof ce=="function"){J=ce.call(Je,J,B);break e}J=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=_e.payload,B=typeof ce=="function"?ce.call(Je,J,B):ce,B==null)break e;J=A({},J,B);break e;case 2:js=!0}}B=T.callback,B!==null&&(t.flags|=64,q&&(t.flags|=8192),q=h.callbacks,q===null?h.callbacks=[B]:q.push(B))}else q={lane:B,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Q===null?(z=Q=q,I=J):Q=Q.next=q,_|=B;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;q=T,T=q.next,q.next=null,h.lastBaseUpdate=q,h.shared.pending=null}}while(!0);Q===null&&(I=J),h.baseState=I,h.firstBaseUpdate=z,h.lastBaseUpdate=Q,f===null&&(h.shared.lanes=0),Hs|=_,t.lanes=_,t.memoizedState=J}}function Qg(t,i){if(typeof t!="function")throw Error(r(191,t));t.call(i)}function $g(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Qg(a[t],i)}var Pa=M(null),$u=M(0);function Yg(t,i){t=$i,ie($u,t),ie(Pa,i),$i=t|i.baseLanes}function zd(){ie($u,$i),ie(Pa,Pa.current)}function Bd(){$i=$u.current,Y(Pa),Y($u)}var Sn=M(null),Hn=null;function Ls(t){var i=t.alternate;ie(pt,pt.current&1),ie(Sn,t),Hn===null&&(i===null||Pa.current!==null||i.memoizedState!==null)&&(Hn=t)}function qd(t){ie(pt,pt.current),ie(Sn,t),Hn===null&&(Hn=t)}function Xg(t){t.tag===22?(ie(pt,pt.current),ie(Sn,t),Hn===null&&(Hn=t)):zs()}function zs(){ie(pt,pt.current),ie(Sn,Sn.current)}function xn(t){Y(Sn),Hn===t&&(Hn=null),Y(pt)}var pt=M(0);function Yu(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Yf(a)||Xf(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var zi=0,Se=null,Ye=null,Tt=null,Xu=!1,La=!1,Hr=!1,Ju=0,il=0,za=null,Sw=0;function ct(){throw Error(r(321))}function Hd(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!wn(t[a],i[a]))return!1;return!0}function Fd(t,i,a,l,h,f){return zi=f,Se=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,$.H=t===null||t.memoizedState===null?My:af,Hr=!1,f=a(l,h),Hr=!1,La&&(f=Zg(i,a,l,h)),Jg(t),f}function Jg(t){$.H=al;var i=Ye!==null&&Ye.next!==null;if(zi=0,Tt=Ye=Se=null,Xu=!1,il=0,za=null,i)throw Error(r(300));t===null||wt||(t=t.dependencies,t!==null&&Bu(t)&&(wt=!0))}function Zg(t,i,a,l){Se=t;var h=0;do{if(La&&(za=null),il=0,La=!1,25<=h)throw Error(r(301));if(h+=1,Tt=Ye=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}$.H=ky,f=i(a,l)}while(La);return f}function xw(){var t=$.H,i=t.useState()[0];return i=typeof i.then=="function"?sl(i):i,t=t.useState()[0],(Ye!==null?Ye.memoizedState:null)!==t&&(Se.flags|=1024),i}function Gd(){var t=Ju!==0;return Ju=0,t}function Kd(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Qd(t){if(Xu){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Xu=!1}zi=0,Tt=Ye=Se=null,La=!1,il=Ju=0,za=null}function cn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?Se.memoizedState=Tt=t:Tt=Tt.next=t,Tt}function gt(){if(Ye===null){var t=Se.alternate;t=t!==null?t.memoizedState:null}else t=Ye.next;var i=Tt===null?Se.memoizedState:Tt.next;if(i!==null)Tt=i,Ye=t;else{if(t===null)throw Se.alternate===null?Error(r(467)):Error(r(310));Ye=t,t={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},Tt===null?Se.memoizedState=Tt=t:Tt=Tt.next=t}return Tt}function Zu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function sl(t){var i=il;return il+=1,za===null&&(za=[]),t=qg(za,t,i),i=Se,(Tt===null?i.memoizedState:Tt.next)===null&&(i=i.alternate,$.H=i===null||i.memoizedState===null?My:af),t}function Wu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return sl(t);if(t.$$typeof===re)return Ht(t)}throw Error(r(438,String(t)))}function $d(t){var i=null,a=Se.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Se.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Zu(),Se.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=O;return i.index++,a}function Bi(t,i){return typeof i=="function"?i(t):i}function ec(t){var i=gt();return Yd(i,Ye,t)}function Yd(t,i,a){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var h=t.baseQueue,f=l.pending;if(f!==null){if(h!==null){var _=h.next;h.next=f.next,f.next=_}i.baseQueue=h=f,l.pending=null}if(f=t.baseState,h===null)t.memoizedState=f;else{i=h.next;var T=_=null,I=null,z=i,Q=!1;do{var J=z.lane&-536870913;if(J!==z.lane?(De&J)===J:(zi&J)===J){var B=z.revertLane;if(B===0)I!==null&&(I=I.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),J===ka&&(Q=!0);else if((zi&B)===B){z=z.next,B===ka&&(Q=!0);continue}else J={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},I===null?(T=I=J,_=f):I=I.next=J,Se.lanes|=B,Hs|=B;J=z.action,Hr&&a(f,J),f=z.hasEagerState?z.eagerState:a(f,J)}else B={lane:J,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},I===null?(T=I=B,_=f):I=I.next=B,Se.lanes|=J,Hs|=J;z=z.next}while(z!==null&&z!==i);if(I===null?_=f:I.next=T,!wn(f,t.memoizedState)&&(wt=!0,Q&&(a=Va,a!==null)))throw a;t.memoizedState=f,t.baseState=_,t.baseQueue=I,l.lastRenderedState=f}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Xd(t){var i=gt(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,f=i.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do f=t(f,_.action),_=_.next;while(_!==h);wn(f,i.memoizedState)||(wt=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),a.lastRenderedState=f}return[f,l]}function Wg(t,i,a){var l=Se,h=gt(),f=Ve;if(f){if(a===void 0)throw Error(r(407));a=a()}else a=i();var _=!wn((Ye||h).memoizedState,a);if(_&&(h.memoizedState=a,wt=!0),h=h.queue,Wd(ny.bind(null,l,h,t),[t]),h.getSnapshot!==i||_||Tt!==null&&Tt.memoizedState.tag&1){if(l.flags|=2048,Ba(9,{destroy:void 0},ty.bind(null,l,h,a,i),null),Ze===null)throw Error(r(349));f||(zi&127)!==0||ey(l,i,a)}return a}function ey(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Se.updateQueue,i===null?(i=Zu(),Se.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function ty(t,i,a,l){i.value=a,i.getSnapshot=l,iy(i)&&sy(t)}function ny(t,i,a){return a(function(){iy(i)&&sy(t)})}function iy(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!wn(t,a)}catch{return!0}}function sy(t){var i=kr(t,2);i!==null&&_n(i,t,2)}function Jd(t){var i=cn();if(typeof t=="function"){var a=t;if(t=a(),Hr){kn(!0);try{a()}finally{kn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:t},i}function ry(t,i,a,l){return t.baseState=a,Yd(t,Ye,typeof l=="function"?l:Bi)}function Rw(t,i,a,l,h){if(ic(t))throw Error(r(485));if(t=i.action,t!==null){var f={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){f.listeners.push(_)}};$.T!==null?a(!0):f.isTransition=!1,l(f),a=i.pending,a===null?(f.next=i.pending=f,ay(i,f)):(f.next=a.next,i.pending=a.next=f)}}function ay(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var f=$.T,_={};$.T=_;try{var T=a(h,l),I=$.S;I!==null&&I(_,T),oy(t,i,T)}catch(z){Zd(t,i,z)}finally{f!==null&&_.types!==null&&(f.types=_.types),$.T=f}}else try{f=a(h,l),oy(t,i,f)}catch(z){Zd(t,i,z)}}function oy(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){ly(t,i,l)},function(l){return Zd(t,i,l)}):ly(t,i,a)}function ly(t,i,a){i.status="fulfilled",i.value=a,uy(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,ay(t,a)))}function Zd(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,uy(i),i=i.next;while(i!==l)}t.action=null}function uy(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function cy(t,i){return i}function hy(t,i){if(Ve){var a=Ze.formState;if(a!==null){e:{var l=Se;if(Ve){if(tt){t:{for(var h=tt,f=qn;h.nodeType!==8;){if(!f){h=null;break t}if(h=Fn(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){tt=Fn(h.nextSibling),l=h.data==="F!";break e}}ks(l)}l=!1}l&&(i=a[0])}}return a=cn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cy,lastRenderedState:i},a.queue=l,a=Iy.bind(null,Se,l),l.dispatch=a,l=Jd(!1),f=rf.bind(null,Se,!1,l.queue),l=cn(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=Rw.bind(null,Se,h,f,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function dy(t){var i=gt();return fy(i,Ye,t)}function fy(t,i,a){if(i=Yd(t,i,cy)[0],t=ec(Bi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=sl(i)}catch(_){throw _===ja?Fu:_}else l=i;i=gt();var h=i.queue,f=h.dispatch;return a!==i.memoizedState&&(Se.flags|=2048,Ba(9,{destroy:void 0},Cw.bind(null,h,a),null)),[l,f,t]}function Cw(t,i){t.action=i}function my(t){var i=gt(),a=Ye;if(a!==null)return fy(i,a,t);gt(),i=i.memoizedState,a=gt();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function Ba(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=Se.updateQueue,i===null&&(i=Zu(),Se.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function py(){return gt().memoizedState}function tc(t,i,a,l){var h=cn();Se.flags|=t,h.memoizedState=Ba(1|i,{destroy:void 0},a,l===void 0?null:l)}function nc(t,i,a,l){var h=gt();l=l===void 0?null:l;var f=h.memoizedState.inst;Ye!==null&&l!==null&&Hd(l,Ye.memoizedState.deps)?h.memoizedState=Ba(i,f,a,l):(Se.flags|=t,h.memoizedState=Ba(1|i,f,a,l))}function gy(t,i){tc(8390656,8,t,i)}function Wd(t,i){nc(2048,8,t,i)}function Nw(t){Se.flags|=4;var i=Se.updateQueue;if(i===null)i=Zu(),Se.updateQueue=i,i.events=[t];else{var a=i.events;a===null?i.events=[t]:a.push(t)}}function yy(t){var i=gt().memoizedState;return Nw({ref:i,nextImpl:t}),function(){if((He&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function _y(t,i){return nc(4,2,t,i)}function vy(t,i){return nc(4,4,t,i)}function Ey(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function by(t,i,a){a=a!=null?a.concat([t]):null,nc(4,4,Ey.bind(null,i,t),a)}function ef(){}function Ty(t,i){var a=gt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Hd(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function wy(t,i){var a=gt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Hd(i,l[1]))return l[0];if(l=t(),Hr){kn(!0);try{t()}finally{kn(!1)}}return a.memoizedState=[l,i],l}function tf(t,i,a){return a===void 0||(zi&1073741824)!==0&&(De&261930)===0?t.memoizedState=i:(t.memoizedState=a,t=A_(),Se.lanes|=t,Hs|=t,a)}function Ay(t,i,a,l){return wn(a,i)?a:Pa.current!==null?(t=tf(t,a,l),wn(t,i)||(wt=!0),t):(zi&42)===0||(zi&1073741824)!==0&&(De&261930)===0?(wt=!0,t.memoizedState=a):(t=A_(),Se.lanes|=t,Hs|=t,i)}function Sy(t,i,a,l,h){var f=oe.p;oe.p=f!==0&&8>f?f:8;var _=$.T,T={};$.T=T,rf(t,!1,i,a);try{var I=h(),z=$.S;if(z!==null&&z(T,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var Q=Aw(I,l);rl(t,i,Q,Nn(t))}else rl(t,i,l,Nn(t))}catch(J){rl(t,i,{then:function(){},status:"rejected",reason:J},Nn())}finally{oe.p=f,_!==null&&T.types!==null&&(_.types=T.types),$.T=_}}function Iw(){}function nf(t,i,a,l){if(t.tag!==5)throw Error(r(476));var h=xy(t).queue;Sy(t,h,i,ge,a===null?Iw:function(){return Ry(t),a(l)})}function xy(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:ge},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Ry(t){var i=xy(t);i.next===null&&(i=t.alternate.memoizedState),rl(t,i.next.queue,{},Nn())}function sf(){return Ht(Tl)}function Cy(){return gt().memoizedState}function Ny(){return gt().memoizedState}function Dw(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=Nn();t=Us(a);var l=Ps(i,t,a);l!==null&&(_n(l,i,a),el(l,i,a)),i={cache:Od()},t.payload=i;return}i=i.return}}function Ow(t,i,a){var l=Nn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ic(t)?Dy(i,a):(a=bd(t,i,a,l),a!==null&&(_n(a,t,l),Oy(a,i,l)))}function Iy(t,i,a){var l=Nn();rl(t,i,a,l)}function rl(t,i,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(ic(t))Dy(i,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var _=i.lastRenderedState,T=f(_,a);if(h.hasEagerState=!0,h.eagerState=T,wn(T,_))return Uu(t,i,h,0),Ze===null&&ju(),!1}catch{}finally{}if(a=bd(t,i,h,l),a!==null)return _n(a,t,l),Oy(a,i,l),!0}return!1}function rf(t,i,a,l){if(l={lane:2,revertLane:Uf(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ic(t)){if(i)throw Error(r(479))}else i=bd(t,a,l,2),i!==null&&_n(i,t,2)}function ic(t){var i=t.alternate;return t===Se||i!==null&&i===Se}function Dy(t,i){La=Xu=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function Oy(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,gs(t,a)}}var al={readContext:Ht,use:Wu,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useLayoutEffect:ct,useInsertionEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useSyncExternalStore:ct,useId:ct,useHostTransitionStatus:ct,useFormState:ct,useActionState:ct,useOptimistic:ct,useMemoCache:ct,useCacheRefresh:ct};al.useEffectEvent=ct;var My={readContext:Ht,use:Wu,useCallback:function(t,i){return cn().memoizedState=[t,i===void 0?null:i],t},useContext:Ht,useEffect:gy,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,tc(4194308,4,Ey.bind(null,i,t),a)},useLayoutEffect:function(t,i){return tc(4194308,4,t,i)},useInsertionEffect:function(t,i){tc(4,2,t,i)},useMemo:function(t,i){var a=cn();i=i===void 0?null:i;var l=t();if(Hr){kn(!0);try{t()}finally{kn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=cn();if(a!==void 0){var h=a(i);if(Hr){kn(!0);try{a(i)}finally{kn(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=Ow.bind(null,Se,t),[l.memoizedState,t]},useRef:function(t){var i=cn();return t={current:t},i.memoizedState=t},useState:function(t){t=Jd(t);var i=t.queue,a=Iy.bind(null,Se,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:ef,useDeferredValue:function(t,i){var a=cn();return tf(a,t,i)},useTransition:function(){var t=Jd(!1);return t=Sy.bind(null,Se,t.queue,!0,!1),cn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Se,h=cn();if(Ve){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),Ze===null)throw Error(r(349));(De&127)!==0||ey(l,i,a)}h.memoizedState=a;var f={value:a,getSnapshot:i};return h.queue=f,gy(ny.bind(null,l,f,t),[t]),l.flags|=2048,Ba(9,{destroy:void 0},ty.bind(null,l,f,a,i),null),a},useId:function(){var t=cn(),i=Ze.identifierPrefix;if(Ve){var a=mi,l=fi;a=(l&~(1<<32-rn(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=Ju++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=Sw++,i="_"+i+"r_"+a.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:sf,useFormState:hy,useActionState:hy,useOptimistic:function(t){var i=cn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=rf.bind(null,Se,!0,a),a.dispatch=i,[t,i]},useMemoCache:$d,useCacheRefresh:function(){return cn().memoizedState=Dw.bind(null,Se)},useEffectEvent:function(t){var i=cn(),a={impl:t};return i.memoizedState=a,function(){if((He&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},af={readContext:Ht,use:Wu,useCallback:Ty,useContext:Ht,useEffect:Wd,useImperativeHandle:by,useInsertionEffect:_y,useLayoutEffect:vy,useMemo:wy,useReducer:ec,useRef:py,useState:function(){return ec(Bi)},useDebugValue:ef,useDeferredValue:function(t,i){var a=gt();return Ay(a,Ye.memoizedState,t,i)},useTransition:function(){var t=ec(Bi)[0],i=gt().memoizedState;return[typeof t=="boolean"?t:sl(t),i]},useSyncExternalStore:Wg,useId:Cy,useHostTransitionStatus:sf,useFormState:dy,useActionState:dy,useOptimistic:function(t,i){var a=gt();return ry(a,Ye,t,i)},useMemoCache:$d,useCacheRefresh:Ny};af.useEffectEvent=yy;var ky={readContext:Ht,use:Wu,useCallback:Ty,useContext:Ht,useEffect:Wd,useImperativeHandle:by,useInsertionEffect:_y,useLayoutEffect:vy,useMemo:wy,useReducer:Xd,useRef:py,useState:function(){return Xd(Bi)},useDebugValue:ef,useDeferredValue:function(t,i){var a=gt();return Ye===null?tf(a,t,i):Ay(a,Ye.memoizedState,t,i)},useTransition:function(){var t=Xd(Bi)[0],i=gt().memoizedState;return[typeof t=="boolean"?t:sl(t),i]},useSyncExternalStore:Wg,useId:Cy,useHostTransitionStatus:sf,useFormState:my,useActionState:my,useOptimistic:function(t,i){var a=gt();return Ye!==null?ry(a,Ye,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:$d,useCacheRefresh:Ny};ky.useEffectEvent=yy;function of(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:A({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var lf={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=Nn(),h=Us(l);h.payload=i,a!=null&&(h.callback=a),i=Ps(t,h,l),i!==null&&(_n(i,t,l),el(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=Nn(),h=Us(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=Ps(t,h,l),i!==null&&(_n(i,t,l),el(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=Nn(),l=Us(a);l.tag=2,i!=null&&(l.callback=i),i=Ps(t,l,a),i!==null&&(_n(i,t,a),el(i,t,a))}};function Vy(t,i,a,l,h,f,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,_):i.prototype&&i.prototype.isPureReactComponent?!Ko(a,l)||!Ko(h,f):!0}function jy(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&lf.enqueueReplaceState(i,i.state,null)}function Fr(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=A({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function Uy(t){Vu(t)}function Py(t){console.error(t)}function Ly(t){Vu(t)}function sc(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function zy(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function uf(t,i,a){return a=Us(a),a.tag=3,a.payload={element:null},a.callback=function(){sc(t,i)},a}function By(t){return t=Us(t),t.tag=3,t}function qy(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=l.value;t.payload=function(){return h(f)},t.callback=function(){zy(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){zy(i,a,l),typeof h!="function"&&(Fs===null?Fs=new Set([this]):Fs.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function Mw(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Ma(i,a,h,!0),a=Sn.current,a!==null){switch(a.tag){case 31:case 13:return Hn===null?gc():a.alternate===null&&ht===0&&(ht=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Gu?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),kf(t,l,h)),!1;case 22:return a.flags|=65536,l===Gu?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),kf(t,l,h)),!1}throw Error(r(435,a.tag))}return kf(t,l,h),gc(),!1}if(Ve)return i=Sn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==Rd&&(t=Error(r(422),{cause:l}),Yo(Ln(t,a)))):(l!==Rd&&(i=Error(r(423),{cause:l}),Yo(Ln(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Ln(l,a),h=uf(t.stateNode,l,h),Pd(t,h),ht!==4&&(ht=2)),!1;var f=Error(r(520),{cause:l});if(f=Ln(f,a),ml===null?ml=[f]:ml.push(f),ht!==4&&(ht=2),i===null)return!0;l=Ln(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=uf(a.stateNode,l,t),Pd(a,t),!1;case 1:if(i=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Fs===null||!Fs.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=By(h),qy(h,t,a,l),Pd(a,h),!1}a=a.return}while(a!==null);return!1}var cf=Error(r(461)),wt=!1;function Ft(t,i,a,l){i.child=t===null?Kg(i,null,a,l):qr(i,t.child,a,l)}function Hy(t,i,a,l,h){a=a.render;var f=i.ref;if("ref"in l){var _={};for(var T in l)T!=="ref"&&(_[T]=l[T])}else _=l;return Pr(i),l=Fd(t,i,a,_,f,h),T=Gd(),t!==null&&!wt?(Kd(t,i,h),qi(t,i,h)):(Ve&&T&&Sd(i),i.flags|=1,Ft(t,i,l,h),i.child)}function Fy(t,i,a,l,h){if(t===null){var f=a.type;return typeof f=="function"&&!Td(f)&&f.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=f,Gy(t,i,f,l,h)):(t=Lu(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(f=t.child,!_f(t,h)){var _=f.memoizedProps;if(a=a.compare,a=a!==null?a:Ko,a(_,l)&&t.ref===i.ref)return qi(t,i,h)}return i.flags|=1,t=ji(f,l),t.ref=i.ref,t.return=i,i.child=t}function Gy(t,i,a,l,h){if(t!==null){var f=t.memoizedProps;if(Ko(f,l)&&t.ref===i.ref)if(wt=!1,i.pendingProps=l=f,_f(t,h))(t.flags&131072)!==0&&(wt=!0);else return i.lanes=t.lanes,qi(t,i,h)}return hf(t,i,a,l,h)}function Ky(t,i,a,l){var h=l.children,f=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(f=f!==null?f.baseLanes|a:a,t!==null){for(l=i.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~f}else l=0,i.child=null;return Qy(t,i,f,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Hu(i,f!==null?f.cachePool:null),f!==null?Yg(i,f):zd(),Xg(i);else return l=i.lanes=536870912,Qy(t,i,f!==null?f.baseLanes|a:a,a,l)}else f!==null?(Hu(i,f.cachePool),Yg(i,f),zs(),i.memoizedState=null):(t!==null&&Hu(i,null),zd(),zs());return Ft(t,i,h,a),i.child}function ol(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Qy(t,i,a,l,h){var f=kd();return f=f===null?null:{parent:bt._currentValue,pool:f},i.memoizedState={baseLanes:a,cachePool:f},t!==null&&Hu(i,null),zd(),Xg(i),t!==null&&Ma(t,i,l,!0),i.childLanes=h,null}function rc(t,i){return i=oc({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function $y(t,i,a){return qr(i,t.child,null,a),t=rc(i,i.pendingProps),t.flags|=2,xn(i),i.memoizedState=null,t}function kw(t,i,a){var l=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(Ve){if(l.mode==="hidden")return t=rc(i,l),i.lanes=536870912,ol(null,t);if(qd(i),(t=tt)?(t=av(t,qn),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Os!==null?{id:fi,overflow:mi}:null,retryLane:536870912,hydrationErrors:null},a=Dg(t),a.return=i,i.child=a,qt=i,tt=null)):t=null,t===null)throw ks(i);return i.lanes=536870912,null}return rc(i,l)}var f=t.memoizedState;if(f!==null){var _=f.dehydrated;if(qd(i),h)if(i.flags&256)i.flags&=-257,i=$y(t,i,a);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(r(558));else if(wt||Ma(t,i,a,!1),h=(a&t.childLanes)!==0,wt||h){if(l=Ze,l!==null&&(_=ys(l,a),_!==0&&_!==f.retryLane))throw f.retryLane=_,kr(t,_),_n(l,t,_),cf;gc(),i=$y(t,i,a)}else t=f.treeContext,tt=Fn(_.nextSibling),qt=i,Ve=!0,Ms=null,qn=!1,t!==null&&kg(i,t),i=rc(i,l),i.flags|=4096;return i}return t=ji(t.child,{mode:l.mode,children:l.children}),t.ref=i.ref,i.child=t,t.return=i,t}function ac(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function hf(t,i,a,l,h){return Pr(i),a=Fd(t,i,a,l,void 0,h),l=Gd(),t!==null&&!wt?(Kd(t,i,h),qi(t,i,h)):(Ve&&l&&Sd(i),i.flags|=1,Ft(t,i,a,h),i.child)}function Yy(t,i,a,l,h,f){return Pr(i),i.updateQueue=null,a=Zg(i,l,a,h),Jg(t),l=Gd(),t!==null&&!wt?(Kd(t,i,f),qi(t,i,f)):(Ve&&l&&Sd(i),i.flags|=1,Ft(t,i,a,f),i.child)}function Xy(t,i,a,l,h){if(Pr(i),i.stateNode===null){var f=Na,_=a.contextType;typeof _=="object"&&_!==null&&(f=Ht(_)),f=new a(l,f),i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=lf,i.stateNode=f,f._reactInternals=i,f=i.stateNode,f.props=l,f.state=i.memoizedState,f.refs={},jd(i),_=a.contextType,f.context=typeof _=="object"&&_!==null?Ht(_):Na,f.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(of(i,a,_,l),f.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(_=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),_!==f.state&&lf.enqueueReplaceState(f,f.state,null),nl(i,l,f,h),tl(),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){f=i.stateNode;var T=i.memoizedProps,I=Fr(a,T);f.props=I;var z=f.context,Q=a.contextType;_=Na,typeof Q=="object"&&Q!==null&&(_=Ht(Q));var J=a.getDerivedStateFromProps;Q=typeof J=="function"||typeof f.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,Q||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(T||z!==_)&&jy(i,f,l,_),js=!1;var B=i.memoizedState;f.state=B,nl(i,l,f,h),tl(),z=i.memoizedState,T||B!==z||js?(typeof J=="function"&&(of(i,a,J,l),z=i.memoizedState),(I=js||Vy(i,a,I,l,B,z,_))?(Q||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(i.flags|=4194308)):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=z),f.props=l,f.state=z,f.context=_,l=I):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{f=i.stateNode,Ud(t,i),_=i.memoizedProps,Q=Fr(a,_),f.props=Q,J=i.pendingProps,B=f.context,z=a.contextType,I=Na,typeof z=="object"&&z!==null&&(I=Ht(z)),T=a.getDerivedStateFromProps,(z=typeof T=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(_!==J||B!==I)&&jy(i,f,l,I),js=!1,B=i.memoizedState,f.state=B,nl(i,l,f,h),tl();var q=i.memoizedState;_!==J||B!==q||js||t!==null&&t.dependencies!==null&&Bu(t.dependencies)?(typeof T=="function"&&(of(i,a,T,l),q=i.memoizedState),(Q=js||Vy(i,a,Q,l,B,q,I)||t!==null&&t.dependencies!==null&&Bu(t.dependencies))?(z||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,q,I),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,q,I)),typeof f.componentDidUpdate=="function"&&(i.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof f.componentDidUpdate!="function"||_===t.memoizedProps&&B===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&B===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=q),f.props=l,f.state=q,f.context=I,l=Q):(typeof f.componentDidUpdate!="function"||_===t.memoizedProps&&B===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&B===t.memoizedState||(i.flags|=1024),l=!1)}return f=l,ac(t,i),l=(i.flags&128)!==0,f||l?(f=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),i.flags|=1,t!==null&&l?(i.child=qr(i,t.child,null,h),i.child=qr(i,null,a,h)):Ft(t,i,a,h),i.memoizedState=f.state,t=i.child):t=qi(t,i,h),t}function Jy(t,i,a,l){return jr(),i.flags|=256,Ft(t,i,a,l),i.child}var df={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ff(t){return{baseLanes:t,cachePool:zg()}}function mf(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=Cn),t}function Zy(t,i,a){var l=i.pendingProps,h=!1,f=(i.flags&128)!==0,_;if((_=f)||(_=t!==null&&t.memoizedState===null?!1:(pt.current&2)!==0),_&&(h=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,t===null){if(Ve){if(h?Ls(i):zs(),(t=tt)?(t=av(t,qn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Os!==null?{id:fi,overflow:mi}:null,retryLane:536870912,hydrationErrors:null},a=Dg(t),a.return=i,i.child=a,qt=i,tt=null)):t=null,t===null)throw ks(i);return Xf(t)?i.lanes=32:i.lanes=536870912,null}var T=l.children;return l=l.fallback,h?(zs(),h=i.mode,T=oc({mode:"hidden",children:T},h),l=Vr(l,h,a,null),T.return=i,l.return=i,T.sibling=l,i.child=T,l=i.child,l.memoizedState=ff(a),l.childLanes=mf(t,_,a),i.memoizedState=df,ol(null,l)):(Ls(i),pf(i,T))}var I=t.memoizedState;if(I!==null&&(T=I.dehydrated,T!==null)){if(f)i.flags&256?(Ls(i),i.flags&=-257,i=gf(t,i,a)):i.memoizedState!==null?(zs(),i.child=t.child,i.flags|=128,i=null):(zs(),T=l.fallback,h=i.mode,l=oc({mode:"visible",children:l.children},h),T=Vr(T,h,a,null),T.flags|=2,l.return=i,T.return=i,l.sibling=T,i.child=l,qr(i,t.child,null,a),l=i.child,l.memoizedState=ff(a),l.childLanes=mf(t,_,a),i.memoizedState=df,i=ol(null,l));else if(Ls(i),Xf(T)){if(_=T.nextSibling&&T.nextSibling.dataset,_)var z=_.dgst;_=z,l=Error(r(419)),l.stack="",l.digest=_,Yo({value:l,source:null,stack:null}),i=gf(t,i,a)}else if(wt||Ma(t,i,a,!1),_=(a&t.childLanes)!==0,wt||_){if(_=Ze,_!==null&&(l=ys(_,a),l!==0&&l!==I.retryLane))throw I.retryLane=l,kr(t,l),_n(_,t,l),cf;Yf(T)||gc(),i=gf(t,i,a)}else Yf(T)?(i.flags|=192,i.child=t.child,i=null):(t=I.treeContext,tt=Fn(T.nextSibling),qt=i,Ve=!0,Ms=null,qn=!1,t!==null&&kg(i,t),i=pf(i,l.children),i.flags|=4096);return i}return h?(zs(),T=l.fallback,h=i.mode,I=t.child,z=I.sibling,l=ji(I,{mode:"hidden",children:l.children}),l.subtreeFlags=I.subtreeFlags&65011712,z!==null?T=ji(z,T):(T=Vr(T,h,a,null),T.flags|=2),T.return=i,l.return=i,l.sibling=T,i.child=l,ol(null,l),l=i.child,T=t.child.memoizedState,T===null?T=ff(a):(h=T.cachePool,h!==null?(I=bt._currentValue,h=h.parent!==I?{parent:I,pool:I}:h):h=zg(),T={baseLanes:T.baseLanes|a,cachePool:h}),l.memoizedState=T,l.childLanes=mf(t,_,a),i.memoizedState=df,ol(t.child,l)):(Ls(i),a=t.child,t=a.sibling,a=ji(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(_=i.deletions,_===null?(i.deletions=[t],i.flags|=16):_.push(t)),i.child=a,i.memoizedState=null,a)}function pf(t,i){return i=oc({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function oc(t,i){return t=An(22,t,null,i),t.lanes=0,t}function gf(t,i,a){return qr(i,t.child,null,a),t=pf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Wy(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),Id(t.return,i,a)}function yf(t,i,a,l,h,f){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:f}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=h,_.treeForkCount=f)}function e_(t,i,a){var l=i.pendingProps,h=l.revealOrder,f=l.tail;l=l.children;var _=pt.current,T=(_&2)!==0;if(T?(_=_&1|2,i.flags|=128):_&=1,ie(pt,_),Ft(t,i,l,a),l=Ve?$o:0,!T&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Wy(t,a,i);else if(t.tag===19)Wy(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&Yu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),yf(i,!1,h,a,f,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&Yu(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}yf(i,!0,a,null,f,l);break;case"together":yf(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function qi(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Hs|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Ma(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(r(153));if(i.child!==null){for(t=i.child,a=ji(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=ji(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function _f(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Bu(t)))}function Vw(t,i,a){switch(i.tag){case 3:Pt(i,i.stateNode.containerInfo),Vs(i,bt,t.memoizedState.cache),jr();break;case 27:case 5:si(i);break;case 4:Pt(i,i.stateNode.containerInfo);break;case 10:Vs(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,qd(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Ls(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Zy(t,i,a):(Ls(i),t=qi(t,i,a),t!==null?t.sibling:null);Ls(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Ma(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return e_(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ie(pt,pt.current),l)break;return null;case 22:return i.lanes=0,Ky(t,i,a,i.pendingProps);case 24:Vs(i,bt,t.memoizedState.cache)}return qi(t,i,a)}function t_(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)wt=!0;else{if(!_f(t,a)&&(i.flags&128)===0)return wt=!1,Vw(t,i,a);wt=(t.flags&131072)!==0}else wt=!1,Ve&&(i.flags&1048576)!==0&&Mg(i,$o,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(t=zr(i.elementType),i.type=t,typeof t=="function")Td(t)?(l=Fr(t,l),i.tag=1,i=Xy(null,i,t,l,a)):(i.tag=0,i=hf(null,i,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===ee){i.tag=11,i=Hy(null,i,t,l,a);break e}else if(h===R){i.tag=14,i=Fy(null,i,t,l,a);break e}}throw i=Rt(t)||t,Error(r(306,i,""))}}return i;case 0:return hf(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=Fr(l,i.pendingProps),Xy(t,i,l,h,a);case 3:e:{if(Pt(i,i.stateNode.containerInfo),t===null)throw Error(r(387));l=i.pendingProps;var f=i.memoizedState;h=f.element,Ud(t,i),nl(i,l,null,a);var _=i.memoizedState;if(l=_.cache,Vs(i,bt,l),l!==f.cache&&Dd(i,[bt],a,!0),tl(),l=_.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=Jy(t,i,l,a);break e}else if(l!==h){h=Ln(Error(r(424)),i),Yo(h),i=Jy(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(tt=Fn(t.firstChild),qt=i,Ve=!0,Ms=null,qn=!0,a=Kg(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(jr(),l===h){i=qi(t,i,a);break e}Ft(t,i,l,a)}i=i.child}return i;case 26:return ac(t,i),t===null?(a=dv(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ve||(a=i.type,t=i.pendingProps,l=wc(Re.current).createElement(a),l[lt]=i,l[Bt]=t,Gt(l,a,t),mt(l),i.stateNode=l):i.memoizedState=dv(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return si(i),t===null&&Ve&&(l=i.stateNode=uv(i.type,i.pendingProps,Re.current),qt=i,qn=!0,h=tt,$s(i.type)?(Jf=h,tt=Fn(l.firstChild)):tt=h),Ft(t,i,i.pendingProps.children,a),ac(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Ve&&((h=l=tt)&&(l=hA(l,i.type,i.pendingProps,qn),l!==null?(i.stateNode=l,qt=i,tt=Fn(l.firstChild),qn=!1,h=!0):h=!1),h||ks(i)),si(i),h=i.type,f=i.pendingProps,_=t!==null?t.memoizedProps:null,l=f.children,Kf(h,f)?l=null:_!==null&&Kf(h,_)&&(i.flags|=32),i.memoizedState!==null&&(h=Fd(t,i,xw,null,null,a),Tl._currentValue=h),ac(t,i),Ft(t,i,l,a),i.child;case 6:return t===null&&Ve&&((t=a=tt)&&(a=dA(a,i.pendingProps,qn),a!==null?(i.stateNode=a,qt=i,tt=null,t=!0):t=!1),t||ks(i)),null;case 13:return Zy(t,i,a);case 4:return Pt(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=qr(i,null,l,a):Ft(t,i,l,a),i.child;case 11:return Hy(t,i,i.type,i.pendingProps,a);case 7:return Ft(t,i,i.pendingProps,a),i.child;case 8:return Ft(t,i,i.pendingProps.children,a),i.child;case 12:return Ft(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Vs(i,i.type,l.value),Ft(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,Pr(i),h=Ht(h),l=l(h),i.flags|=1,Ft(t,i,l,a),i.child;case 14:return Fy(t,i,i.type,i.pendingProps,a);case 15:return Gy(t,i,i.type,i.pendingProps,a);case 19:return e_(t,i,a);case 31:return kw(t,i,a);case 22:return Ky(t,i,a,i.pendingProps);case 24:return Pr(i),l=Ht(bt),t===null?(h=kd(),h===null&&(h=Ze,f=Od(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),i.memoizedState={parent:l,cache:h},jd(i),Vs(i,bt,h)):((t.lanes&a)!==0&&(Ud(t,i),nl(i,null,null,a),tl()),h=t.memoizedState,f=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Vs(i,bt,l)):(l=f.cache,Vs(i,bt,l),l!==h.cache&&Dd(i,[bt],a,!0))),Ft(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function Hi(t){t.flags|=4}function vf(t,i,a,l,h){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(C_())t.flags|=8192;else throw Br=Gu,Vd}else t.flags&=-16777217}function n_(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!yv(i))if(C_())t.flags|=8192;else throw Br=Gu,Vd}function lc(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Co():536870912,t.lanes|=i,Ga|=i)}function ll(t,i){if(!Ve)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function nt(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function jw(t,i,a){var l=i.pendingProps;switch(xd(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nt(i),null;case 1:return nt(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Li(bt),rt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Oa(i)?Hi(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Cd())),nt(i),null;case 26:var h=i.type,f=i.memoizedState;return t===null?(Hi(i),f!==null?(nt(i),n_(i,f)):(nt(i),vf(i,h,null,l,a))):f?f!==t.memoizedState?(Hi(i),nt(i),n_(i,f)):(nt(i),i.flags&=-16777217):(t=t.memoizedProps,t!==l&&Hi(i),nt(i),vf(i,h,t,l,a)),null;case 27:if(Ai(i),a=Re.current,h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Hi(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return nt(i),null}t=he.current,Oa(i)?Vg(i):(t=uv(h,l,a),i.stateNode=t,Hi(i))}return nt(i),null;case 5:if(Ai(i),h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Hi(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return nt(i),null}if(f=he.current,Oa(i))Vg(i);else{var _=wc(Re.current);switch(f){case 1:f=_.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:f=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":f=_.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":f=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":f=_.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?f.multiple=!0:l.size&&(f.size=l.size);break;default:f=typeof l.is=="string"?_.createElement(h,{is:l.is}):_.createElement(h)}}f[lt]=i,f[Bt]=l;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)f.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=f;e:switch(Gt(f,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Hi(i)}}return nt(i),vf(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,a),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&Hi(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(t=Re.current,Oa(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=qt,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[lt]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Z_(t.nodeValue,a)),t||ks(i,!0)}else t=wc(t).createTextNode(l),t[lt]=i,i.stateNode=t}return nt(i),null;case 31:if(a=i.memoizedState,t===null||t.memoizedState!==null){if(l=Oa(i),a!==null){if(t===null){if(!l)throw Error(r(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[lt]=i}else jr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;nt(i),t=!1}else a=Cd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return i.flags&256?(xn(i),i):(xn(i),null);if((i.flags&128)!==0)throw Error(r(558))}return nt(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Oa(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[lt]=i}else jr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;nt(i),h=!1}else h=Cd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(xn(i),i):(xn(i),null)}return xn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),f=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==h&&(l.flags|=2048)),a!==t&&a&&(i.child.flags|=8192),lc(i,i.updateQueue),nt(i),null);case 4:return rt(),t===null&&Bf(i.stateNode.containerInfo),nt(i),null;case 10:return Li(i.type),nt(i),null;case 19:if(Y(pt),l=i.memoizedState,l===null)return nt(i),null;if(h=(i.flags&128)!==0,f=l.rendering,f===null)if(h)ll(l,!1);else{if(ht!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(f=Yu(t),f!==null){for(i.flags|=128,ll(l,!1),t=f.updateQueue,i.updateQueue=t,lc(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)Ig(a,t),a=a.sibling;return ie(pt,pt.current&1|2),Ve&&Ui(i,l.treeForkCount),i.child}t=t.sibling}l.tail!==null&&Lt()>fc&&(i.flags|=128,h=!0,ll(l,!1),i.lanes=4194304)}else{if(!h)if(t=Yu(f),t!==null){if(i.flags|=128,h=!0,t=t.updateQueue,i.updateQueue=t,lc(i,t),ll(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!Ve)return nt(i),null}else 2*Lt()-l.renderingStartTime>fc&&a!==536870912&&(i.flags|=128,h=!0,ll(l,!1),i.lanes=4194304);l.isBackwards?(f.sibling=i.child,i.child=f):(t=l.last,t!==null?t.sibling=f:i.child=f,l.last=f)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Lt(),t.sibling=null,a=pt.current,ie(pt,h?a&1|2:a&1),Ve&&Ui(i,l.treeForkCount),t):(nt(i),null);case 22:case 23:return xn(i),Bd(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(nt(i),i.subtreeFlags&6&&(i.flags|=8192)):nt(i),a=i.updateQueue,a!==null&&lc(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&Y(Lr),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Li(bt),nt(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function Uw(t,i){switch(xd(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Li(bt),rt(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Ai(i),null;case 31:if(i.memoizedState!==null){if(xn(i),i.alternate===null)throw Error(r(340));jr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(xn(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(r(340));jr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return Y(pt),null;case 4:return rt(),null;case 10:return Li(i.type),null;case 22:case 23:return xn(i),Bd(),t!==null&&Y(Lr),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Li(bt),null;case 25:return null;default:return null}}function i_(t,i){switch(xd(i),i.tag){case 3:Li(bt),rt();break;case 26:case 27:case 5:Ai(i);break;case 4:rt();break;case 31:i.memoizedState!==null&&xn(i);break;case 13:xn(i);break;case 19:Y(pt);break;case 10:Li(i.type);break;case 22:case 23:xn(i),Bd(),t!==null&&Y(Lr);break;case 24:Li(bt)}}function ul(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var f=a.create,_=a.inst;l=f(),_.destroy=l}a=a.next}while(a!==h)}}catch(T){Qe(i,i.return,T)}}function Bs(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var f=h.next;l=f;do{if((l.tag&t)===t){var _=l.inst,T=_.destroy;if(T!==void 0){_.destroy=void 0,h=i;var I=a,z=T;try{z()}catch(Q){Qe(h,I,Q)}}}l=l.next}while(l!==f)}}catch(Q){Qe(i,i.return,Q)}}function s_(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{$g(i,a)}catch(l){Qe(t,t.return,l)}}}function r_(t,i,a){a.props=Fr(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){Qe(t,i,l)}}function cl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){Qe(t,i,h)}}function pi(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){Qe(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Qe(t,i,h)}else a.current=null}function a_(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){Qe(t,t.return,h)}}function Ef(t,i,a){try{var l=t.stateNode;rA(l,t.type,a,i),l[Bt]=i}catch(h){Qe(t,t.return,h)}}function o_(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&$s(t.type)||t.tag===4}function bf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||o_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&$s(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Tf(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Ot));else if(l!==4&&(l===27&&$s(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(Tf(t,i,a),t=t.sibling;t!==null;)Tf(t,i,a),t=t.sibling}function uc(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&$s(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(uc(t,i,a),t=t.sibling;t!==null;)uc(t,i,a),t=t.sibling}function l_(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Gt(i,l,a),i[lt]=t,i[Bt]=a}catch(f){Qe(t,t.return,f)}}var Fi=!1,At=!1,wf=!1,u_=typeof WeakSet=="function"?WeakSet:Set,Vt=null;function Pw(t,i){if(t=t.containerInfo,Ff=Ic,t=bg(t),pd(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var _=0,T=-1,I=-1,z=0,Q=0,J=t,B=null;t:for(;;){for(var q;J!==a||h!==0&&J.nodeType!==3||(T=_+h),J!==f||l!==0&&J.nodeType!==3||(I=_+l),J.nodeType===3&&(_+=J.nodeValue.length),(q=J.firstChild)!==null;)B=J,J=q;for(;;){if(J===t)break t;if(B===a&&++z===h&&(T=_),B===f&&++Q===l&&(I=_),(q=J.nextSibling)!==null)break;J=B,B=J.parentNode}J=q}a=T===-1||I===-1?null:{start:T,end:I}}else a=null}a=a||{start:0,end:0}}else a=null;for(Gf={focusedElem:t,selectionRange:a},Ic=!1,Vt=i;Vt!==null;)if(i=Vt,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Vt=t;else for(;Vt!==null;){switch(i=Vt,f=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=i,h=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var ce=Fr(a.type,h);t=l.getSnapshotBeforeUpdate(ce,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(_e){Qe(a,a.return,_e)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)$f(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":$f(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=i.sibling,t!==null){t.return=i.return,Vt=t;break}Vt=i.return}}function c_(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Ki(t,a),l&4&&ul(5,a);break;case 1:if(Ki(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(_){Qe(a,a.return,_)}else{var h=Fr(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(_){Qe(a,a.return,_)}}l&64&&s_(a),l&512&&cl(a,a.return);break;case 3:if(Ki(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{$g(t,i)}catch(_){Qe(a,a.return,_)}}break;case 27:i===null&&l&4&&l_(a);case 26:case 5:Ki(t,a),i===null&&l&4&&a_(a),l&512&&cl(a,a.return);break;case 12:Ki(t,a);break;case 31:Ki(t,a),l&4&&f_(t,a);break;case 13:Ki(t,a),l&4&&m_(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=Qw.bind(null,a),fA(t,a))));break;case 22:if(l=a.memoizedState!==null||Fi,!l){i=i!==null&&i.memoizedState!==null||At,h=Fi;var f=At;Fi=l,(At=i)&&!f?Qi(t,a,(a.subtreeFlags&8772)!==0):Ki(t,a),Fi=h,At=f}break;case 30:break;default:Ki(t,a)}}function h_(t){var i=t.alternate;i!==null&&(t.alternate=null,h_(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Tr(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var st=null,mn=!1;function Gi(t,i,a){for(a=a.child;a!==null;)d_(t,i,a),a=a.sibling}function d_(t,i,a){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount(ds,a)}catch{}switch(a.tag){case 26:At||pi(a,i),Gi(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:At||pi(a,i);var l=st,h=mn;$s(a.type)&&(st=a.stateNode,mn=!1),Gi(t,i,a),vl(a.stateNode),st=l,mn=h;break;case 5:At||pi(a,i);case 6:if(l=st,h=mn,st=null,Gi(t,i,a),st=l,mn=h,st!==null)if(mn)try{(st.nodeType===9?st.body:st.nodeName==="HTML"?st.ownerDocument.body:st).removeChild(a.stateNode)}catch(f){Qe(a,i,f)}else try{st.removeChild(a.stateNode)}catch(f){Qe(a,i,f)}break;case 18:st!==null&&(mn?(t=st,sv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Wa(t)):sv(st,a.stateNode));break;case 4:l=st,h=mn,st=a.stateNode.containerInfo,mn=!0,Gi(t,i,a),st=l,mn=h;break;case 0:case 11:case 14:case 15:Bs(2,a,i),At||Bs(4,a,i),Gi(t,i,a);break;case 1:At||(pi(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&r_(a,i,l)),Gi(t,i,a);break;case 21:Gi(t,i,a);break;case 22:At=(l=At)||a.memoizedState!==null,Gi(t,i,a),At=l;break;default:Gi(t,i,a)}}function f_(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Wa(t)}catch(a){Qe(i,i.return,a)}}}function m_(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Wa(t)}catch(a){Qe(i,i.return,a)}}function Lw(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new u_),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new u_),i;default:throw Error(r(435,t.tag))}}function cc(t,i){var a=Lw(t);i.forEach(function(l){if(!a.has(l)){a.add(l);var h=$w.bind(null,t,l);l.then(h,h)}})}function pn(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],f=t,_=i,T=_;e:for(;T!==null;){switch(T.tag){case 27:if($s(T.type)){st=T.stateNode,mn=!1;break e}break;case 5:st=T.stateNode,mn=!1;break e;case 3:case 4:st=T.stateNode.containerInfo,mn=!0;break e}T=T.return}if(st===null)throw Error(r(160));d_(f,_,h),st=null,mn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)p_(i,t),i=i.sibling}var Wn=null;function p_(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:pn(i,t),gn(t),l&4&&(Bs(3,t,t.return),ul(3,t),Bs(5,t,t.return));break;case 1:pn(i,t),gn(t),l&512&&(At||a===null||pi(a,a.return)),l&64&&Fi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Wn;if(pn(i,t),gn(t),l&512&&(At||a===null||pi(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":f=h.getElementsByTagName("title")[0],(!f||f[Ci]||f[lt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(l),h.head.insertBefore(f,h.querySelector("head > title"))),Gt(f,l,a),f[lt]=t,mt(f),l=f;break e;case"link":var _=pv("link","href",h).get(l+(a.href||""));if(_){for(var T=0;T<_.length;T++)if(f=_[T],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(T,1);break t}}f=h.createElement(l),Gt(f,l,a),h.head.appendChild(f);break;case"meta":if(_=pv("meta","content",h).get(l+(a.content||""))){for(T=0;T<_.length;T++)if(f=_[T],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(T,1);break t}}f=h.createElement(l),Gt(f,l,a),h.head.appendChild(f);break;default:throw Error(r(468,l))}f[lt]=t,mt(f),l=f}t.stateNode=l}else gv(h,t.type,t.stateNode);else t.stateNode=mv(h,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?gv(h,t.type,t.stateNode):mv(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Ef(t,t.memoizedProps,a.memoizedProps)}break;case 27:pn(i,t),gn(t),l&512&&(At||a===null||pi(a,a.return)),a!==null&&l&4&&Ef(t,t.memoizedProps,a.memoizedProps);break;case 5:if(pn(i,t),gn(t),l&512&&(At||a===null||pi(a,a.return)),t.flags&32){h=t.stateNode;try{Un(h,"")}catch(ce){Qe(t,t.return,ce)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Ef(t,h,a!==null?a.memoizedProps:h)),l&1024&&(wf=!0);break;case 6:if(pn(i,t),gn(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(ce){Qe(t,t.return,ce)}}break;case 3:if(xc=null,h=Wn,Wn=Ac(i.containerInfo),pn(i,t),Wn=h,gn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Wa(i.containerInfo)}catch(ce){Qe(t,t.return,ce)}wf&&(wf=!1,g_(t));break;case 4:l=Wn,Wn=Ac(t.stateNode.containerInfo),pn(i,t),gn(t),Wn=l;break;case 12:pn(i,t),gn(t);break;case 31:pn(i,t),gn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,cc(t,l)));break;case 13:pn(i,t),gn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(dc=Lt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,cc(t,l)));break;case 22:h=t.memoizedState!==null;var I=a!==null&&a.memoizedState!==null,z=Fi,Q=At;if(Fi=z||h,At=Q||I,pn(i,t),At=Q,Fi=z,gn(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||I||Fi||At||Gr(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){I=a=i;try{if(f=I.stateNode,h)_=f.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=I.stateNode;var J=I.memoizedProps.style,B=J!=null&&J.hasOwnProperty("display")?J.display:null;T.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(ce){Qe(I,I.return,ce)}}}else if(i.tag===6){if(a===null){I=i;try{I.stateNode.nodeValue=h?"":I.memoizedProps}catch(ce){Qe(I,I.return,ce)}}}else if(i.tag===18){if(a===null){I=i;try{var q=I.stateNode;h?rv(q,!0):rv(I.stateNode,!1)}catch(ce){Qe(I,I.return,ce)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,cc(t,a))));break;case 19:pn(i,t),gn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,cc(t,l)));break;case 30:break;case 21:break;default:pn(i,t),gn(t)}}function gn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(o_(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,f=bf(t);uc(t,f,h);break;case 5:var _=a.stateNode;a.flags&32&&(Un(_,""),a.flags&=-33);var T=bf(t);uc(t,T,_);break;case 3:case 4:var I=a.stateNode.containerInfo,z=bf(t);Tf(t,z,I);break;default:throw Error(r(161))}}catch(Q){Qe(t,t.return,Q)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function g_(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;g_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Ki(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)c_(t,i.alternate,i),i=i.sibling}function Gr(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Bs(4,i,i.return),Gr(i);break;case 1:pi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&r_(i,i.return,a),Gr(i);break;case 27:vl(i.stateNode);case 26:case 5:pi(i,i.return),Gr(i);break;case 22:i.memoizedState===null&&Gr(i);break;case 30:Gr(i);break;default:Gr(i)}t=t.sibling}}function Qi(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,f=i,_=f.flags;switch(f.tag){case 0:case 11:case 15:Qi(h,f,a),ul(4,f);break;case 1:if(Qi(h,f,a),l=f,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(z){Qe(l,l.return,z)}if(l=f,h=l.updateQueue,h!==null){var T=l.stateNode;try{var I=h.shared.hiddenCallbacks;if(I!==null)for(h.shared.hiddenCallbacks=null,h=0;h<I.length;h++)Qg(I[h],T)}catch(z){Qe(l,l.return,z)}}a&&_&64&&s_(f),cl(f,f.return);break;case 27:l_(f);case 26:case 5:Qi(h,f,a),a&&l===null&&_&4&&a_(f),cl(f,f.return);break;case 12:Qi(h,f,a);break;case 31:Qi(h,f,a),a&&_&4&&f_(h,f);break;case 13:Qi(h,f,a),a&&_&4&&m_(h,f);break;case 22:f.memoizedState===null&&Qi(h,f,a),cl(f,f.return);break;case 30:break;default:Qi(h,f,a)}i=i.sibling}}function Af(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Xo(a))}function Sf(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Xo(t))}function ei(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)y_(t,i,a,l),i=i.sibling}function y_(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:ei(t,i,a,l),h&2048&&ul(9,i);break;case 1:ei(t,i,a,l);break;case 3:ei(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Xo(t)));break;case 12:if(h&2048){ei(t,i,a,l),t=i.stateNode;try{var f=i.memoizedProps,_=f.id,T=f.onPostCommit;typeof T=="function"&&T(_,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(I){Qe(i,i.return,I)}}else ei(t,i,a,l);break;case 31:ei(t,i,a,l);break;case 13:ei(t,i,a,l);break;case 23:break;case 22:f=i.stateNode,_=i.alternate,i.memoizedState!==null?f._visibility&2?ei(t,i,a,l):hl(t,i):f._visibility&2?ei(t,i,a,l):(f._visibility|=2,qa(t,i,a,l,(i.subtreeFlags&10256)!==0||!1)),h&2048&&Af(_,i);break;case 24:ei(t,i,a,l),h&2048&&Sf(i.alternate,i);break;default:ei(t,i,a,l)}}function qa(t,i,a,l,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var f=t,_=i,T=a,I=l,z=_.flags;switch(_.tag){case 0:case 11:case 15:qa(f,_,T,I,h),ul(8,_);break;case 23:break;case 22:var Q=_.stateNode;_.memoizedState!==null?Q._visibility&2?qa(f,_,T,I,h):hl(f,_):(Q._visibility|=2,qa(f,_,T,I,h)),h&&z&2048&&Af(_.alternate,_);break;case 24:qa(f,_,T,I,h),h&&z&2048&&Sf(_.alternate,_);break;default:qa(f,_,T,I,h)}i=i.sibling}}function hl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:hl(a,l),h&2048&&Af(l.alternate,l);break;case 24:hl(a,l),h&2048&&Sf(l.alternate,l);break;default:hl(a,l)}i=i.sibling}}var dl=8192;function Ha(t,i,a){if(t.subtreeFlags&dl)for(t=t.child;t!==null;)__(t,i,a),t=t.sibling}function __(t,i,a){switch(t.tag){case 26:Ha(t,i,a),t.flags&dl&&t.memoizedState!==null&&SA(a,Wn,t.memoizedState,t.memoizedProps);break;case 5:Ha(t,i,a);break;case 3:case 4:var l=Wn;Wn=Ac(t.stateNode.containerInfo),Ha(t,i,a),Wn=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=dl,dl=16777216,Ha(t,i,a),dl=l):Ha(t,i,a));break;default:Ha(t,i,a)}}function v_(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function fl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Vt=l,b_(l,t)}v_(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)E_(t),t=t.sibling}function E_(t){switch(t.tag){case 0:case 11:case 15:fl(t),t.flags&2048&&Bs(9,t,t.return);break;case 3:fl(t);break;case 12:fl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,hc(t)):fl(t);break;default:fl(t)}}function hc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Vt=l,b_(l,t)}v_(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Bs(8,i,i.return),hc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,hc(i));break;default:hc(i)}t=t.sibling}}function b_(t,i){for(;Vt!==null;){var a=Vt;switch(a.tag){case 0:case 11:case 15:Bs(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Xo(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Vt=l;else e:for(a=t;Vt!==null;){l=Vt;var h=l.sibling,f=l.return;if(h_(l),l===a){Vt=null;break e}if(h!==null){h.return=f,Vt=h;break e}Vt=f}}}var zw={getCacheForType:function(t){var i=Ht(bt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a},cacheSignal:function(){return Ht(bt).controller.signal}},Bw=typeof WeakMap=="function"?WeakMap:Map,He=0,Ze=null,Ne=null,De=0,Ke=0,Rn=null,qs=!1,Fa=!1,xf=!1,$i=0,ht=0,Hs=0,Kr=0,Rf=0,Cn=0,Ga=0,ml=null,yn=null,Cf=!1,dc=0,T_=0,fc=1/0,mc=null,Fs=null,Nt=0,Gs=null,Ka=null,Yi=0,Nf=0,If=null,w_=null,pl=0,Df=null;function Nn(){return(He&2)!==0&&De!==0?De&-De:$.T!==null?Uf():Ri()}function A_(){if(Cn===0)if((De&536870912)===0||Ve){var t=ri;ri<<=1,(ri&3932160)===0&&(ri=262144),Cn=t}else Cn=536870912;return t=Sn.current,t!==null&&(t.flags|=32),Cn}function _n(t,i,a){(t===Ze&&(Ke===2||Ke===9)||t.cancelPendingCommit!==null)&&(Qa(t,0),Ks(t,De,Cn,!1)),ps(t,a),((He&2)===0||t!==Ze)&&(t===Ze&&((He&2)===0&&(Kr|=a),ht===4&&Ks(t,De,Cn,!1)),gi(t))}function S_(t,i,a){if((He&6)!==0)throw Error(r(327));var l=!a&&(i&127)===0&&(i&t.expiredLanes)===0||ms(t,i),h=l?Fw(t,i):Mf(t,i,!0),f=l;do{if(h===0){Fa&&!l&&Ks(t,i,0,!1);break}else{if(a=t.current.alternate,f&&!qw(a)){h=Mf(t,i,!1),f=!1;continue}if(h===2){if(f=i,t.errorRecoveryDisabledLanes&f)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var T=t;h=ml;var I=T.current.memoizedState.isDehydrated;if(I&&(Qa(T,_).flags|=256),_=Mf(T,_,!1),_!==2){if(xf&&!I){T.errorRecoveryDisabledLanes|=f,Kr|=f,h=4;break e}f=yn,yn=h,f!==null&&(yn===null?yn=f:yn.push.apply(yn,f))}h=_}if(f=!1,h!==2)continue}}if(h===1){Qa(t,0),Ks(t,i,0,!0);break}e:{switch(l=t,f=h,f){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Ks(l,i,Cn,!qs);break e;case 2:yn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(h=dc+300-Lt(),10<h)){if(Ks(l,i,Cn,!qs),Vn(l,0,!0)!==0)break e;Yi=i,l.timeoutHandle=nv(x_.bind(null,l,a,yn,mc,Cf,i,Cn,Kr,Ga,qs,f,"Throttled",-0,0),h);break e}x_(l,a,yn,mc,Cf,i,Cn,Kr,Ga,qs,f,null,-0,0)}}break}while(!0);gi(t)}function x_(t,i,a,l,h,f,_,T,I,z,Q,J,B,q){if(t.timeoutHandle=-1,J=i.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ot},__(i,f,J);var ce=(f&62914560)===f?dc-Lt():(f&4194048)===f?T_-Lt():0;if(ce=xA(J,ce),ce!==null){Yi=f,t.cancelPendingCommit=ce(k_.bind(null,t,i,f,a,l,h,_,T,I,Q,J,null,B,q)),Ks(t,f,_,!z);return}}k_(t,i,f,a,l,h,_,T,I)}function qw(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],f=h.getSnapshot;h=h.value;try{if(!wn(f(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ks(t,i,a,l){i&=~Rf,i&=~Kr,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var f=31-rn(h),_=1<<f;l[f]=-1,h&=~_}a!==0&&No(t,a,i)}function pc(){return(He&6)===0?(gl(0),!1):!0}function Of(){if(Ne!==null){if(Ke===0)var t=Ne.return;else t=Ne,Pi=Ur=null,Qd(t),Ua=null,Zo=0,t=Ne;for(;t!==null;)i_(t.alternate,t),t=t.return;Ne=null}}function Qa(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,lA(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Yi=0,Of(),Ze=t,Ne=a=ji(t.current,null),De=i,Ke=0,Rn=null,qs=!1,Fa=ms(t,i),xf=!1,Ga=Cn=Rf=Kr=Hs=ht=0,yn=ml=null,Cf=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-rn(l),f=1<<h;i|=t[h],l&=~f}return $i=i,ju(),a}function R_(t,i){Se=null,$.H=al,i===ja||i===Fu?(i=Hg(),Ke=3):i===Vd?(i=Hg(),Ke=4):Ke=i===cf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Rn=i,Ne===null&&(ht=1,sc(t,Ln(i,t.current)))}function C_(){var t=Sn.current;return t===null?!0:(De&4194048)===De?Hn===null:(De&62914560)===De||(De&536870912)!==0?t===Hn:!1}function N_(){var t=$.H;return $.H=al,t===null?al:t}function I_(){var t=$.A;return $.A=zw,t}function gc(){ht=4,qs||(De&4194048)!==De&&Sn.current!==null||(Fa=!0),(Hs&134217727)===0&&(Kr&134217727)===0||Ze===null||Ks(Ze,De,Cn,!1)}function Mf(t,i,a){var l=He;He|=2;var h=N_(),f=I_();(Ze!==t||De!==i)&&(mc=null,Qa(t,i)),i=!1;var _=ht;e:do try{if(Ke!==0&&Ne!==null){var T=Ne,I=Rn;switch(Ke){case 8:Of(),_=6;break e;case 3:case 2:case 9:case 6:Sn.current===null&&(i=!0);var z=Ke;if(Ke=0,Rn=null,$a(t,T,I,z),a&&Fa){_=0;break e}break;default:z=Ke,Ke=0,Rn=null,$a(t,T,I,z)}}Hw(),_=ht;break}catch(Q){R_(t,Q)}while(!0);return i&&t.shellSuspendCounter++,Pi=Ur=null,He=l,$.H=h,$.A=f,Ne===null&&(Ze=null,De=0,ju()),_}function Hw(){for(;Ne!==null;)D_(Ne)}function Fw(t,i){var a=He;He|=2;var l=N_(),h=I_();Ze!==t||De!==i?(mc=null,fc=Lt()+500,Qa(t,i)):Fa=ms(t,i);e:do try{if(Ke!==0&&Ne!==null){i=Ne;var f=Rn;t:switch(Ke){case 1:Ke=0,Rn=null,$a(t,i,f,1);break;case 2:case 9:if(Bg(f)){Ke=0,Rn=null,O_(i);break}i=function(){Ke!==2&&Ke!==9||Ze!==t||(Ke=7),gi(t)},f.then(i,i);break e;case 3:Ke=7;break e;case 4:Ke=5;break e;case 7:Bg(f)?(Ke=0,Rn=null,O_(i)):(Ke=0,Rn=null,$a(t,i,f,7));break;case 5:var _=null;switch(Ne.tag){case 26:_=Ne.memoizedState;case 5:case 27:var T=Ne;if(_?yv(_):T.stateNode.complete){Ke=0,Rn=null;var I=T.sibling;if(I!==null)Ne=I;else{var z=T.return;z!==null?(Ne=z,yc(z)):Ne=null}break t}}Ke=0,Rn=null,$a(t,i,f,5);break;case 6:Ke=0,Rn=null,$a(t,i,f,6);break;case 8:Of(),ht=6;break e;default:throw Error(r(462))}}Gw();break}catch(Q){R_(t,Q)}while(!0);return Pi=Ur=null,$.H=l,$.A=h,He=a,Ne!==null?0:(Ze=null,De=0,ju(),ht)}function Gw(){for(;Ne!==null&&!sd();)D_(Ne)}function D_(t){var i=t_(t.alternate,t,$i);t.memoizedProps=t.pendingProps,i===null?yc(t):Ne=i}function O_(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=Yy(a,i,i.pendingProps,i.type,void 0,De);break;case 11:i=Yy(a,i,i.pendingProps,i.type.render,i.ref,De);break;case 5:Qd(i);default:i_(a,i),i=Ne=Ig(i,$i),i=t_(a,i,$i)}t.memoizedProps=t.pendingProps,i===null?yc(t):Ne=i}function $a(t,i,a,l){Pi=Ur=null,Qd(i),Ua=null,Zo=0;var h=i.return;try{if(Mw(t,h,i,a,De)){ht=1,sc(t,Ln(a,t.current)),Ne=null;return}}catch(f){if(h!==null)throw Ne=h,f;ht=1,sc(t,Ln(a,t.current)),Ne=null;return}i.flags&32768?(Ve||l===1?t=!0:Fa||(De&536870912)!==0?t=!1:(qs=t=!0,(l===2||l===9||l===3||l===6)&&(l=Sn.current,l!==null&&l.tag===13&&(l.flags|=16384))),M_(i,t)):yc(i)}function yc(t){var i=t;do{if((i.flags&32768)!==0){M_(i,qs);return}t=i.return;var a=jw(i.alternate,i,$i);if(a!==null){Ne=a;return}if(i=i.sibling,i!==null){Ne=i;return}Ne=i=t}while(i!==null);ht===0&&(ht=5)}function M_(t,i){do{var a=Uw(t.alternate,t);if(a!==null){a.flags&=32767,Ne=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Ne=t;return}Ne=t=a}while(t!==null);ht=6,Ne=null}function k_(t,i,a,l,h,f,_,T,I){t.cancelPendingCommit=null;do _c();while(Nt!==0);if((He&6)!==0)throw Error(r(327));if(i!==null){if(i===t.current)throw Error(r(177));if(f=i.lanes|i.childLanes,f|=Ed,zt(t,a,f,_,T,I),t===Ze&&(Ne=Ze=null,De=0),Ka=i,Gs=t,Yi=a,Nf=f,If=h,w_=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Yw(Si,function(){return L_(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=$.T,$.T=null,h=oe.p,oe.p=2,_=He,He|=4;try{Pw(t,i,a)}finally{He=_,oe.p=h,$.T=l}}Nt=1,V_(),j_(),U_()}}function V_(){if(Nt===1){Nt=0;var t=Gs,i=Ka,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=$.T,$.T=null;var l=oe.p;oe.p=2;var h=He;He|=4;try{p_(i,t);var f=Gf,_=bg(t.containerInfo),T=f.focusedElem,I=f.selectionRange;if(_!==T&&T&&T.ownerDocument&&Eg(T.ownerDocument.documentElement,T)){if(I!==null&&pd(T)){var z=I.start,Q=I.end;if(Q===void 0&&(Q=z),"selectionStart"in T)T.selectionStart=z,T.selectionEnd=Math.min(Q,T.value.length);else{var J=T.ownerDocument||document,B=J&&J.defaultView||window;if(B.getSelection){var q=B.getSelection(),ce=T.textContent.length,_e=Math.min(I.start,ce),Je=I.end===void 0?_e:Math.min(I.end,ce);!q.extend&&_e>Je&&(_=Je,Je=_e,_e=_);var U=vg(T,_e),D=vg(T,Je);if(U&&D&&(q.rangeCount!==1||q.anchorNode!==U.node||q.anchorOffset!==U.offset||q.focusNode!==D.node||q.focusOffset!==D.offset)){var L=J.createRange();L.setStart(U.node,U.offset),q.removeAllRanges(),_e>Je?(q.addRange(L),q.extend(D.node,D.offset)):(L.setEnd(D.node,D.offset),q.addRange(L))}}}}for(J=[],q=T;q=q.parentNode;)q.nodeType===1&&J.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<J.length;T++){var X=J[T];X.element.scrollLeft=X.left,X.element.scrollTop=X.top}}Ic=!!Ff,Gf=Ff=null}finally{He=h,oe.p=l,$.T=a}}t.current=i,Nt=2}}function j_(){if(Nt===2){Nt=0;var t=Gs,i=Ka,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=$.T,$.T=null;var l=oe.p;oe.p=2;var h=He;He|=4;try{c_(t,i.alternate,i)}finally{He=h,oe.p=l,$.T=a}}Nt=3}}function U_(){if(Nt===4||Nt===3){Nt=0,So();var t=Gs,i=Ka,a=Yi,l=w_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Nt=5:(Nt=0,Ka=Gs=null,P_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Fs=null),Do(a),i=i.stateNode,Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot(ds,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=$.T,h=oe.p,oe.p=2,$.T=null;try{for(var f=t.onRecoverableError,_=0;_<l.length;_++){var T=l[_];f(T.value,{componentStack:T.stack})}}finally{$.T=i,oe.p=h}}(Yi&3)!==0&&_c(),gi(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===Df?pl++:(pl=0,Df=t):pl=0,gl(0)}}function P_(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Xo(i)))}function _c(){return V_(),j_(),U_(),L_()}function L_(){if(Nt!==5)return!1;var t=Gs,i=Nf;Nf=0;var a=Do(Yi),l=$.T,h=oe.p;try{oe.p=32>a?32:a,$.T=null,a=If,If=null;var f=Gs,_=Yi;if(Nt=0,Ka=Gs=null,Yi=0,(He&6)!==0)throw Error(r(331));var T=He;if(He|=4,E_(f.current),y_(f,f.current,_,a),He=T,gl(0,!1),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot(ds,f)}catch{}return!0}finally{oe.p=h,$.T=l,P_(t,i)}}function z_(t,i,a){i=Ln(a,i),i=uf(t.stateNode,i,2),t=Ps(t,i,2),t!==null&&(ps(t,2),gi(t))}function Qe(t,i,a){if(t.tag===3)z_(t,t,a);else for(;i!==null;){if(i.tag===3){z_(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Fs===null||!Fs.has(l))){t=Ln(a,t),a=By(2),l=Ps(i,a,2),l!==null&&(qy(a,l,i,t),ps(l,2),gi(l));break}}i=i.return}}function kf(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new Bw;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(xf=!0,h.add(a),t=Kw.bind(null,t,i,a),i.then(t,t))}function Kw(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Ze===t&&(De&a)===a&&(ht===4||ht===3&&(De&62914560)===De&&300>Lt()-dc?(He&2)===0&&Qa(t,0):Rf|=a,Ga===De&&(Ga=0)),gi(t)}function B_(t,i){i===0&&(i=Co()),t=kr(t,i),t!==null&&(ps(t,i),gi(t))}function Qw(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),B_(t,a)}function $w(t,i){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),B_(t,a)}function Yw(t,i){return vr(t,i)}var vc=null,Ya=null,Vf=!1,Ec=!1,jf=!1,Qs=0;function gi(t){t!==Ya&&t.next===null&&(Ya===null?vc=Ya=t:Ya=Ya.next=t),Ec=!0,Vf||(Vf=!0,Jw())}function gl(t,i){if(!jf&&Ec){jf=!0;do for(var a=!1,l=vc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var f=0;else{var _=l.suspendedLanes,T=l.pingedLanes;f=(1<<31-rn(42|t)+1)-1,f&=h&~(_&~T),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,G_(l,f))}else f=De,f=Vn(l,l===Ze?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||ms(l,f)||(a=!0,G_(l,f));l=l.next}while(a);jf=!1}}function Xw(){q_()}function q_(){Ec=Vf=!1;var t=0;Qs!==0&&oA()&&(t=Qs);for(var i=Lt(),a=null,l=vc;l!==null;){var h=l.next,f=H_(l,i);f===0?(l.next=null,a===null?vc=h:a.next=h,h===null&&(Ya=a)):(a=l,(t!==0||(f&3)!==0)&&(Ec=!0)),l=h}Nt!==0&&Nt!==5||gl(t),Qs!==0&&(Qs=0)}function H_(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var _=31-rn(f),T=1<<_,I=h[_];I===-1?((T&a)===0||(T&l)!==0)&&(h[_]=pa(T,i)):I<=i&&(t.expiredLanes|=T),f&=~T}if(i=Ze,a=De,a=Vn(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(Ke===2||Ke===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&ma(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||ms(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&ma(l),Do(a)){case 2:case 8:a=Dt;break;case 32:a=Si;break;case 268435456:a=xo;break;default:a=Si}return l=F_.bind(null,t),a=vr(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&ma(l),t.callbackPriority=2,t.callbackNode=null,2}function F_(t,i){if(Nt!==0&&Nt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(_c()&&t.callbackNode!==a)return null;var l=De;return l=Vn(t,t===Ze?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(S_(t,l,i),H_(t,Lt()),t.callbackNode!=null&&t.callbackNode===a?F_.bind(null,t):null)}function G_(t,i){if(_c())return null;S_(t,i,!0)}function Jw(){uA(function(){(He&6)!==0?vr(Ct,Xw):q_()})}function Uf(){if(Qs===0){var t=ka;t===0&&(t=br,br<<=1,(br&261888)===0&&(br=256)),Qs=t}return Qs}function K_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ci(""+t)}function Q_(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function Zw(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var f=K_((h[Bt]||null).action),_=l.submitter;_&&(i=(i=_[Bt]||null)?K_(i.formAction):_.getAttribute("formAction"),i!==null&&(f=i,_=null));var T=new Rr("action","action",null,l,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Qs!==0){var I=_?Q_(h,_):new FormData(h);nf(a,{pending:!0,data:I,method:h.method,action:f},null,I)}}else typeof f=="function"&&(T.preventDefault(),I=_?Q_(h,_):new FormData(h),nf(a,{pending:!0,data:I,method:h.method,action:f},f,I))},currentTarget:h}]})}}for(var Pf=0;Pf<vd.length;Pf++){var Lf=vd[Pf],Ww=Lf.toLowerCase(),eA=Lf[0].toUpperCase()+Lf.slice(1);Zn(Ww,"on"+eA)}Zn(Ag,"onAnimationEnd"),Zn(Sg,"onAnimationIteration"),Zn(xg,"onAnimationStart"),Zn("dblclick","onDoubleClick"),Zn("focusin","onFocus"),Zn("focusout","onBlur"),Zn(gw,"onTransitionRun"),Zn(yw,"onTransitionStart"),Zn(_w,"onTransitionCancel"),Zn(Rg,"onTransitionEnd"),ui("onMouseEnter",["mouseout","mouseover"]),ui("onMouseLeave",["mouseout","mouseover"]),ui("onPointerEnter",["pointerout","pointerover"]),ui("onPointerLeave",["pointerout","pointerover"]),an("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),an("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),an("onBeforeInput",["compositionend","keypress","textInput","paste"]),an("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),an("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),an("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yl));function $_(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var f=void 0;if(i)for(var _=l.length-1;0<=_;_--){var T=l[_],I=T.instance,z=T.currentTarget;if(T=T.listener,I!==f&&h.isPropagationStopped())break e;f=T,h.currentTarget=z;try{f(h)}catch(Q){Vu(Q)}h.currentTarget=null,f=I}else for(_=0;_<l.length;_++){if(T=l[_],I=T.instance,z=T.currentTarget,T=T.listener,I!==f&&h.isPropagationStopped())break e;f=T,h.currentTarget=z;try{f(h)}catch(Q){Vu(Q)}h.currentTarget=null,f=I}}}}function Ie(t,i){var a=i[_s];a===void 0&&(a=i[_s]=new Set);var l=t+"__bubble";a.has(l)||(Y_(i,t,2,!1),a.add(l))}function zf(t,i,a){var l=0;i&&(l|=4),Y_(a,t,l,i)}var bc="_reactListening"+Math.random().toString(36).slice(2);function Bf(t){if(!t[bc]){t[bc]=!0,ga.forEach(function(a){a!=="selectionchange"&&(tA.has(a)||zf(a,!1,t),zf(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[bc]||(i[bc]=!0,zf("selectionchange",!1,i))}}function Y_(t,i,a,l){switch(Av(i)){case 2:var h=NA;break;case 8:h=IA;break;default:h=nm}a=h.bind(null,i,a,t),h=void 0,!Lo||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function qf(t,i,a,l,h){var f=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var T=l.stateNode.containerInfo;if(T===h)break;if(_===4)for(_=l.return;_!==null;){var I=_.tag;if((I===3||I===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;T!==null;){if(_=Ni(T),_===null)return;if(I=_.tag,I===5||I===6||I===26||I===27){l=f=_;continue e}T=T.parentNode}}l=l.return}vu(function(){var z=f,Q=ba(a),J=[];e:{var B=Cg.get(t);if(B!==void 0){var q=Rr,ce=t;switch(t){case"keypress":if(xr(a)===0)break e;case"keydown":case"keyup":q=Cu;break;case"focusin":ce="focus",q=Cs;break;case"focusout":ce="blur",q=Cs;break;case"beforeblur":case"afterblur":q=Cs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=bu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=Tu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=Iu;break;case Ag:case Sg:case xg:q=Aa;break;case Rg:q=Sa;break;case"scroll":case"scrollend":q=Eu;break;case"wheel":q=Ou;break;case"copy":case"cut":case"paste":q=Au;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=Fo;break;case"toggle":case"beforetoggle":q=Is}var _e=(i&4)!==0,Je=!_e&&(t==="scroll"||t==="scrollend"),U=_e?B!==null?B+"Capture":null:B;_e=[];for(var D=z,L;D!==null;){var X=D;if(L=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||L===null||U===null||(X=dn(D,U),X!=null&&_e.push(_l(D,X,L))),Je)break;D=D.return}0<_e.length&&(B=new q(B,ce,null,a,Q),J.push({event:B,listeners:_e}))}}if((i&7)===0){e:{if(B=t==="mouseover"||t==="pointerover",q=t==="mouseout"||t==="pointerout",B&&a!==Ea&&(ce=a.relatedTarget||a.fromElement)&&(Ni(ce)||ce[oi]))break e;if((q||B)&&(B=Q.window===Q?Q:(B=Q.ownerDocument)?B.defaultView||B.parentWindow:window,q?(ce=a.relatedTarget||a.toElement,q=z,ce=ce?Ni(ce):null,ce!==null&&(Je=u(ce),_e=ce.tag,ce!==Je||_e!==5&&_e!==27&&_e!==6)&&(ce=null)):(q=null,ce=z),q!==ce)){if(_e=bu,X="onMouseLeave",U="onMouseEnter",D="mouse",(t==="pointerout"||t==="pointerover")&&(_e=Fo,X="onPointerLeave",U="onPointerEnter",D="pointer"),Je=q==null?B:wr(q),L=ce==null?B:wr(ce),B=new _e(X,D+"leave",q,a,Q),B.target=Je,B.relatedTarget=L,X=null,Ni(Q)===z&&(_e=new _e(U,D+"enter",ce,a,Q),_e.target=L,_e.relatedTarget=Je,X=_e),Je=X,q&&ce)t:{for(_e=nA,U=q,D=ce,L=0,X=U;X;X=_e(X))L++;X=0;for(var pe=D;pe;pe=_e(pe))X++;for(;0<L-X;)U=_e(U),L--;for(;0<X-L;)D=_e(D),X--;for(;L--;){if(U===D||D!==null&&U===D.alternate){_e=U;break t}U=_e(U),D=_e(D)}_e=null}else _e=null;q!==null&&X_(J,B,q,_e,!1),ce!==null&&Je!==null&&X_(J,Je,ce,_e,!0)}}e:{if(B=z?wr(z):window,q=B.nodeName&&B.nodeName.toLowerCase(),q==="select"||q==="input"&&B.type==="file")var ze=fg;else if(fn(B))if(mg)ze=fw;else{ze=hw;var fe=cw}else q=B.nodeName,!q||q.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?z&&Uo(z.elementType)&&(ze=fg):ze=dw;if(ze&&(ze=ze(t,z))){Dr(J,ze,a,Q);break e}fe&&fe(t,B,z),t==="focusout"&&z&&B.type==="number"&&z.memoizedProps.value!=null&&va(B,"number",B.value)}switch(fe=z?wr(z):window,t){case"focusin":(fn(fe)||fe.contentEditable==="true")&&(xa=fe,gd=z,Qo=null);break;case"focusout":Qo=gd=xa=null;break;case"mousedown":yd=!0;break;case"contextmenu":case"mouseup":case"dragend":yd=!1,Tg(J,a,Q);break;case"selectionchange":if(pw)break;case"keydown":case"keyup":Tg(J,a,Q)}var xe;if(p)e:{switch(t){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else Ce?Ge(t,a)&&(Oe="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Oe="onCompositionStart");Oe&&(P&&a.locale!=="ko"&&(Ce||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&Ce&&(xe=As()):(Tn=Q,Ta="value"in Tn?Tn.value:Tn.textContent,Ce=!0)),fe=Tc(z,Oe),0<fe.length&&(Oe=new Bo(Oe,t,null,a,Q),J.push({event:Oe,listeners:fe}),xe?Oe.data=xe:(xe=Et(a),xe!==null&&(Oe.data=xe)))),(xe=w?Mt(t,a):kt(t,a))&&(Oe=Tc(z,"onBeforeInput"),0<Oe.length&&(fe=new Bo("onBeforeInput","beforeinput",null,a,Q),J.push({event:fe,listeners:Oe}),fe.data=xe)),Zw(J,t,z,a,Q)}$_(J,i)})}function _l(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Tc(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=dn(t,a),h!=null&&l.unshift(_l(t,h,f)),h=dn(t,i),h!=null&&l.push(_l(t,h,f))),t.tag===3)return l;t=t.return}return[]}function nA(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function X_(t,i,a,l,h){for(var f=i._reactName,_=[];a!==null&&a!==l;){var T=a,I=T.alternate,z=T.stateNode;if(T=T.tag,I!==null&&I===l)break;T!==5&&T!==26&&T!==27||z===null||(I=z,h?(z=dn(a,f),z!=null&&_.unshift(_l(a,z,I))):h||(z=dn(a,f),z!=null&&_.push(_l(a,z,I)))),a=a.return}_.length!==0&&t.push({event:i,listeners:_})}var iA=/\r\n?/g,sA=/\u0000|\uFFFD/g;function J_(t){return(typeof t=="string"?t:""+t).replace(iA,`
`).replace(sA,"")}function Z_(t,i){return i=J_(i),J_(t)===i}function Xe(t,i,a,l,h,f){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Un(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Un(t,""+l);break;case"className":bs(t,"class",l);break;case"tabIndex":bs(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":bs(t,a,l);break;case"style":yu(t,l,f);break;case"data":if(i!=="object"){bs(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ci(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(i!=="input"&&Xe(t,i,"name",h.name,h,null),Xe(t,i,"formEncType",h.formEncType,h,null),Xe(t,i,"formMethod",h.formMethod,h,null),Xe(t,i,"formTarget",h.formTarget,h,null)):(Xe(t,i,"encType",h.encType,h,null),Xe(t,i,"method",h.method,h,null),Xe(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ci(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Ot);break;case"onScroll":l!=null&&Ie("scroll",t);break;case"onScrollEnd":l!=null&&Ie("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=ci(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Ie("beforetoggle",t),Ie("toggle",t),Es(t,"popover",l);break;case"xlinkActuate":jn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":jn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":jn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":jn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":jn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":jn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":jn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":jn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":jn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Es(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=cd.get(a)||a,Es(t,a,l))}}function Hf(t,i,a,l,h,f){switch(a){case"style":yu(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Un(t,l):(typeof l=="number"||typeof l=="bigint")&&Un(t,""+l);break;case"onScroll":l!=null&&Ie("scroll",t);break;case"onScrollEnd":l!=null&&Ie("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Ot);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vs.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),f=t[Bt]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(i,f,h),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Es(t,a,l)}}}function Gt(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ie("error",t),Ie("load",t);var l=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var _=a[f];if(_!=null)switch(f){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Xe(t,i,f,_,a,null)}}h&&Xe(t,i,"srcSet",a.srcSet,a,null),l&&Xe(t,i,"src",a.src,a,null);return;case"input":Ie("invalid",t);var T=f=_=h=null,I=null,z=null;for(l in a)if(a.hasOwnProperty(l)){var Q=a[l];if(Q!=null)switch(l){case"name":h=Q;break;case"type":_=Q;break;case"checked":I=Q;break;case"defaultChecked":z=Q;break;case"value":f=Q;break;case"defaultValue":T=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,i));break;default:Xe(t,i,l,Q,a,null)}}Ar(t,f,T,I,z,_,h,!1);return;case"select":Ie("invalid",t),l=_=f=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":f=T;break;case"defaultValue":_=T;break;case"multiple":l=T;default:Xe(t,i,h,T,a,null)}i=f,a=_,t.multiple=!!l,i!=null?Le(t,!!l,i,!1):a!=null&&Le(t,!!l,a,!0);return;case"textarea":Ie("invalid",t),f=h=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(T=a[_],T!=null))switch(_){case"value":l=T;break;case"defaultValue":h=T;break;case"children":f=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:Xe(t,i,_,T,a,null)}ws(t,l,h,f);return;case"option":for(I in a)if(a.hasOwnProperty(I)&&(l=a[I],l!=null))switch(I){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Xe(t,i,I,l,a,null)}return;case"dialog":Ie("beforetoggle",t),Ie("toggle",t),Ie("cancel",t),Ie("close",t);break;case"iframe":case"object":Ie("load",t);break;case"video":case"audio":for(l=0;l<yl.length;l++)Ie(yl[l],t);break;case"image":Ie("error",t),Ie("load",t);break;case"details":Ie("toggle",t);break;case"embed":case"source":case"link":Ie("error",t),Ie("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in a)if(a.hasOwnProperty(z)&&(l=a[z],l!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Xe(t,i,z,l,a,null)}return;default:if(Uo(i)){for(Q in a)a.hasOwnProperty(Q)&&(l=a[Q],l!==void 0&&Hf(t,i,Q,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&Xe(t,i,T,l,a,null))}function rA(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,_=null,T=null,I=null,z=null,Q=null;for(q in a){var J=a[q];if(a.hasOwnProperty(q)&&J!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":I=J;default:l.hasOwnProperty(q)||Xe(t,i,q,null,l,J)}}for(var B in l){var q=l[B];if(J=a[B],l.hasOwnProperty(B)&&(q!=null||J!=null))switch(B){case"type":f=q;break;case"name":h=q;break;case"checked":z=q;break;case"defaultChecked":Q=q;break;case"value":_=q;break;case"defaultValue":T=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,i));break;default:q!==J&&Xe(t,i,B,q,l,J)}}Ts(t,_,T,I,z,Q,f,h);return;case"select":q=_=T=B=null;for(f in a)if(I=a[f],a.hasOwnProperty(f)&&I!=null)switch(f){case"value":break;case"multiple":q=I;default:l.hasOwnProperty(f)||Xe(t,i,f,null,l,I)}for(h in l)if(f=l[h],I=a[h],l.hasOwnProperty(h)&&(f!=null||I!=null))switch(h){case"value":B=f;break;case"defaultValue":T=f;break;case"multiple":_=f;default:f!==I&&Xe(t,i,h,f,l,I)}i=T,a=_,l=q,B!=null?Le(t,!!a,B,!1):!!l!=!!a&&(i!=null?Le(t,!!a,i,!0):Le(t,!!a,a?[]:"",!1));return;case"textarea":q=B=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Xe(t,i,T,null,l,h)}for(_ in l)if(h=l[_],f=a[_],l.hasOwnProperty(_)&&(h!=null||f!=null))switch(_){case"value":B=h;break;case"defaultValue":q=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==f&&Xe(t,i,_,h,l,f)}Sr(t,B,q);return;case"option":for(var ce in a)if(B=a[ce],a.hasOwnProperty(ce)&&B!=null&&!l.hasOwnProperty(ce))switch(ce){case"selected":t.selected=!1;break;default:Xe(t,i,ce,null,l,B)}for(I in l)if(B=l[I],q=a[I],l.hasOwnProperty(I)&&B!==q&&(B!=null||q!=null))switch(I){case"selected":t.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:Xe(t,i,I,B,l,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in a)B=a[_e],a.hasOwnProperty(_e)&&B!=null&&!l.hasOwnProperty(_e)&&Xe(t,i,_e,null,l,B);for(z in l)if(B=l[z],q=a[z],l.hasOwnProperty(z)&&B!==q&&(B!=null||q!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(137,i));break;default:Xe(t,i,z,B,l,q)}return;default:if(Uo(i)){for(var Je in a)B=a[Je],a.hasOwnProperty(Je)&&B!==void 0&&!l.hasOwnProperty(Je)&&Hf(t,i,Je,void 0,l,B);for(Q in l)B=l[Q],q=a[Q],!l.hasOwnProperty(Q)||B===q||B===void 0&&q===void 0||Hf(t,i,Q,B,l,q);return}}for(var U in a)B=a[U],a.hasOwnProperty(U)&&B!=null&&!l.hasOwnProperty(U)&&Xe(t,i,U,null,l,B);for(J in l)B=l[J],q=a[J],!l.hasOwnProperty(J)||B===q||B==null&&q==null||Xe(t,i,J,B,l,q)}function W_(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function aA(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],f=h.transferSize,_=h.initiatorType,T=h.duration;if(f&&T&&W_(_)){for(_=0,T=h.responseEnd,l+=1;l<a.length;l++){var I=a[l],z=I.startTime;if(z>T)break;var Q=I.transferSize,J=I.initiatorType;Q&&W_(J)&&(I=I.responseEnd,_+=Q*(I<T?1:(T-z)/(I-z)))}if(--l,i+=8*(f+_)/(h.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Ff=null,Gf=null;function wc(t){return t.nodeType===9?t:t.ownerDocument}function ev(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tv(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Kf(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Qf=null;function oA(){var t=window.event;return t&&t.type==="popstate"?t===Qf?!1:(Qf=t,!0):(Qf=null,!1)}var nv=typeof setTimeout=="function"?setTimeout:void 0,lA=typeof clearTimeout=="function"?clearTimeout:void 0,iv=typeof Promise=="function"?Promise:void 0,uA=typeof queueMicrotask=="function"?queueMicrotask:typeof iv<"u"?function(t){return iv.resolve(null).then(t).catch(cA)}:nv;function cA(t){setTimeout(function(){throw t})}function $s(t){return t==="head"}function sv(t,i){var a=i,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),Wa(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")vl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,vl(a);for(var f=a.firstChild;f;){var _=f.nextSibling,T=f.nodeName;f[Ci]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&f.rel.toLowerCase()==="stylesheet"||a.removeChild(f),f=_}}else a==="body"&&vl(t.ownerDocument.body);a=h}while(a);Wa(i)}function rv(t,i){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function $f(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":$f(a),Tr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function hA(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Ci])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=Fn(t.nextSibling),t===null)break}return null}function dA(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Fn(t.nextSibling),t===null))return null;return t}function av(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=Fn(t.nextSibling),t===null))return null;return t}function Yf(t){return t.data==="$?"||t.data==="$~"}function Xf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function fA(t,i){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Fn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var Jf=null;function ov(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(i===0)return Fn(t.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}t=t.nextSibling}return null}function lv(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return t;i--}else a!=="/$"&&a!=="/&"||i++}t=t.previousSibling}return null}function uv(t,i,a){switch(i=wc(a),t){case"html":if(t=i.documentElement,!t)throw Error(r(452));return t;case"head":if(t=i.head,!t)throw Error(r(453));return t;case"body":if(t=i.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function vl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Tr(t)}var Gn=new Map,cv=new Set;function Ac(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Xi=oe.d;oe.d={f:mA,r:pA,D:gA,C:yA,L:_A,m:vA,X:bA,S:EA,M:TA};function mA(){var t=Xi.f(),i=pc();return t||i}function pA(t){var i=Ii(t);i!==null&&i.tag===5&&i.type==="form"?Ry(i):Xi.r(t)}var Xa=typeof document>"u"?null:document;function hv(t,i,a){var l=Xa;if(l&&typeof i=="string"&&i){var h=ut(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),cv.has(h)||(cv.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),Gt(i,"link",t),mt(i),l.head.appendChild(i)))}}function gA(t){Xi.D(t),hv("dns-prefetch",t,null)}function yA(t,i){Xi.C(t,i),hv("preconnect",t,i)}function _A(t,i,a){Xi.L(t,i,a);var l=Xa;if(l&&t&&i){var h='link[rel="preload"][as="'+ut(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+ut(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+ut(a.imageSizes)+'"]')):h+='[href="'+ut(t)+'"]';var f=h;switch(i){case"style":f=Ja(t);break;case"script":f=Za(t)}Gn.has(f)||(t=A({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Gn.set(f,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(El(f))||i==="script"&&l.querySelector(bl(f))||(i=l.createElement("link"),Gt(i,"link",t),mt(i),l.head.appendChild(i)))}}function vA(t,i){Xi.m(t,i);var a=Xa;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+ut(l)+'"][href="'+ut(t)+'"]',f=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Za(t)}if(!Gn.has(f)&&(t=A({rel:"modulepreload",href:t},i),Gn.set(f,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(bl(f)))return}l=a.createElement("link"),Gt(l,"link",t),mt(l),a.head.appendChild(l)}}}function EA(t,i,a){Xi.S(t,i,a);var l=Xa;if(l&&t){var h=Xn(l).hoistableStyles,f=Ja(t);i=i||"default";var _=h.get(f);if(!_){var T={loading:0,preload:null};if(_=l.querySelector(El(f)))T.loading=5;else{t=A({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Gn.get(f))&&Zf(t,a);var I=_=l.createElement("link");mt(I),Gt(I,"link",t),I._p=new Promise(function(z,Q){I.onload=z,I.onerror=Q}),I.addEventListener("load",function(){T.loading|=1}),I.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Sc(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:T},h.set(f,_)}}}function bA(t,i){Xi.X(t,i);var a=Xa;if(a&&t){var l=Xn(a).hoistableScripts,h=Za(t),f=l.get(h);f||(f=a.querySelector(bl(h)),f||(t=A({src:t,async:!0},i),(i=Gn.get(h))&&Wf(t,i),f=a.createElement("script"),mt(f),Gt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function TA(t,i){Xi.M(t,i);var a=Xa;if(a&&t){var l=Xn(a).hoistableScripts,h=Za(t),f=l.get(h);f||(f=a.querySelector(bl(h)),f||(t=A({src:t,async:!0,type:"module"},i),(i=Gn.get(h))&&Wf(t,i),f=a.createElement("script"),mt(f),Gt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function dv(t,i,a,l){var h=(h=Re.current)?Ac(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Ja(a.href),a=Xn(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Ja(a.href);var f=Xn(h).hoistableStyles,_=f.get(t);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,_),(f=h.querySelector(El(t)))&&!f._p&&(_.instance=f,_.state.loading=5),Gn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Gn.set(t,a),f||wA(h,t,a,_.state))),i&&l===null)throw Error(r(528,""));return _}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Za(a),a=Xn(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function Ja(t){return'href="'+ut(t)+'"'}function El(t){return'link[rel="stylesheet"]['+t+"]"}function fv(t){return A({},t,{"data-precedence":t.precedence,precedence:null})}function wA(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Gt(i,"link",a),mt(i),t.head.appendChild(i))}function Za(t){return'[src="'+ut(t)+'"]'}function bl(t){return"script[async]"+t}function mv(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+ut(a.href)+'"]');if(l)return i.instance=l,mt(l),l;var h=A({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),mt(l),Gt(l,"style",h),Sc(l,a.precedence,t),i.instance=l;case"stylesheet":h=Ja(a.href);var f=t.querySelector(El(h));if(f)return i.state.loading|=4,i.instance=f,mt(f),f;l=fv(a),(h=Gn.get(h))&&Zf(l,h),f=(t.ownerDocument||t).createElement("link"),mt(f);var _=f;return _._p=new Promise(function(T,I){_.onload=T,_.onerror=I}),Gt(f,"link",l),i.state.loading|=4,Sc(f,a.precedence,t),i.instance=f;case"script":return f=Za(a.src),(h=t.querySelector(bl(f)))?(i.instance=h,mt(h),h):(l=a,(h=Gn.get(f))&&(l=A({},a),Wf(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),mt(h),Gt(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Sc(l,a.precedence,t));return i.instance}function Sc(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,f=h,_=0;_<l.length;_++){var T=l[_];if(T.dataset.precedence===i)f=T;else if(f!==h)break}f?f.parentNode.insertBefore(t,f.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Zf(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Wf(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var xc=null;function pv(t,i,a){if(xc===null){var l=new Map,h=xc=new Map;h.set(a,l)}else h=xc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var f=a[h];if(!(f[Ci]||f[lt]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var _=f.getAttribute(i)||"";_=t+_;var T=l.get(_);T?T.push(f):l.set(_,[f])}}return l}function gv(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function AA(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function yv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function SA(t,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=Ja(l.href),f=i.querySelector(El(h));if(f){i=f._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Rc.bind(t),i.then(t,t)),a.state.loading|=4,a.instance=f,mt(f);return}f=i.ownerDocument||i,l=fv(l),(h=Gn.get(h))&&Zf(l,h),f=f.createElement("link"),mt(f);var _=f;_._p=new Promise(function(T,I){_.onload=T,_.onerror=I}),Gt(f,"link",l),a.instance=f}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Rc.bind(t),i.addEventListener("load",a),i.addEventListener("error",a))}}var em=0;function xA(t,i){return t.stylesheets&&t.count===0&&Nc(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Nc(t,t.stylesheets),t.unsuspend){var f=t.unsuspend;t.unsuspend=null,f()}},6e4+i);0<t.imgBytes&&em===0&&(em=62500*aA());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Nc(t,t.stylesheets),t.unsuspend)){var f=t.unsuspend;t.unsuspend=null,f()}},(t.imgBytes>em?50:800)+i);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function Rc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Nc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Cc=null;function Nc(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Cc=new Map,i.forEach(RA,t),Cc=null,Rc.call(t))}function RA(t,i){if(!(i.state.loading&4)){var a=Cc.get(t);if(a)var l=a.get(null);else{a=new Map,Cc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var _=h[f];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}h=i.instance,_=h.getAttribute("data-precedence"),f=a.get(_)||l,f===l&&a.set(null,h),a.set(_,h),this.count++,l=Rc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),f?f.parentNode.insertBefore(h,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var Tl={$$typeof:re,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function CA(t,i,a,l,h,f,_,T,I){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xi(0),this.hiddenUpdates=xi(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function _v(t,i,a,l,h,f,_,T,I,z,Q,J){return t=new CA(t,i,a,_,I,z,Q,J,T),i=1,f===!0&&(i|=24),f=An(3,null,null,i),t.current=f,f.stateNode=t,i=Od(),i.refCount++,t.pooledCache=i,i.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:i},jd(f),t}function vv(t){return t?(t=Na,t):Na}function Ev(t,i,a,l,h,f){h=vv(h),l.context===null?l.context=h:l.pendingContext=h,l=Us(i),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=Ps(t,l,i),a!==null&&(_n(a,t,i),el(a,t,i))}function bv(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function tm(t,i){bv(t,i),(t=t.alternate)&&bv(t,i)}function Tv(t){if(t.tag===13||t.tag===31){var i=kr(t,67108864);i!==null&&_n(i,t,67108864),tm(t,67108864)}}function wv(t){if(t.tag===13||t.tag===31){var i=Nn();i=Io(i);var a=kr(t,i);a!==null&&_n(a,t,i),tm(t,i)}}var Ic=!0;function NA(t,i,a,l){var h=$.T;$.T=null;var f=oe.p;try{oe.p=2,nm(t,i,a,l)}finally{oe.p=f,$.T=h}}function IA(t,i,a,l){var h=$.T;$.T=null;var f=oe.p;try{oe.p=8,nm(t,i,a,l)}finally{oe.p=f,$.T=h}}function nm(t,i,a,l){if(Ic){var h=im(l);if(h===null)qf(t,i,l,Dc,a),Sv(t,l);else if(OA(h,t,i,a,l))l.stopPropagation();else if(Sv(t,l),i&4&&-1<DA.indexOf(t)){for(;h!==null;){var f=Ii(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var _=Yn(f.pendingLanes);if(_!==0){var T=f;for(T.pendingLanes|=2,T.entangledLanes|=2;_;){var I=1<<31-rn(_);T.entanglements[1]|=I,_&=~I}gi(f),(He&6)===0&&(fc=Lt()+500,gl(0))}}break;case 31:case 13:T=kr(f,2),T!==null&&_n(T,f,2),pc(),tm(f,2)}if(f=im(l),f===null&&qf(t,i,l,Dc,a),f===h)break;h=f}h!==null&&l.stopPropagation()}else qf(t,i,l,null,a)}}function im(t){return t=ba(t),sm(t)}var Dc=null;function sm(t){if(Dc=null,t=Ni(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=d(i),t!==null)return t;t=null}else if(a===31){if(t=m(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Dc=t,null}function Av(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(cu()){case Ct:return 2;case Dt:return 8;case Si:case hu:return 32;case xo:return 268435456;default:return 32}default:return 32}}var rm=!1,Ys=null,Xs=null,Js=null,wl=new Map,Al=new Map,Zs=[],DA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Sv(t,i){switch(t){case"focusin":case"focusout":Ys=null;break;case"dragenter":case"dragleave":Xs=null;break;case"mouseover":case"mouseout":Js=null;break;case"pointerover":case"pointerout":wl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Al.delete(i.pointerId)}}function Sl(t,i,a,l,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[h]},i!==null&&(i=Ii(i),i!==null&&Tv(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function OA(t,i,a,l,h){switch(i){case"focusin":return Ys=Sl(Ys,t,i,a,l,h),!0;case"dragenter":return Xs=Sl(Xs,t,i,a,l,h),!0;case"mouseover":return Js=Sl(Js,t,i,a,l,h),!0;case"pointerover":var f=h.pointerId;return wl.set(f,Sl(wl.get(f)||null,t,i,a,l,h)),!0;case"gotpointercapture":return f=h.pointerId,Al.set(f,Sl(Al.get(f)||null,t,i,a,l,h)),!0}return!1}function xv(t){var i=Ni(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=d(a),i!==null){t.blockedOn=i,fu(t.priority,function(){wv(a)});return}}else if(i===31){if(i=m(a),i!==null){t.blockedOn=i,fu(t.priority,function(){wv(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Oc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=im(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Ea=l,a.target.dispatchEvent(l),Ea=null}else return i=Ii(a),i!==null&&Tv(i),t.blockedOn=a,!1;i.shift()}return!0}function Rv(t,i,a){Oc(t)&&a.delete(i)}function MA(){rm=!1,Ys!==null&&Oc(Ys)&&(Ys=null),Xs!==null&&Oc(Xs)&&(Xs=null),Js!==null&&Oc(Js)&&(Js=null),wl.forEach(Rv),Al.forEach(Rv)}function Mc(t,i){t.blockedOn===i&&(t.blockedOn=null,rm||(rm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,MA)))}var kc=null;function Cv(t){kc!==t&&(kc=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){kc===t&&(kc=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if(sm(l||a)===null)continue;break}var f=Ii(a);f!==null&&(t.splice(i,3),i-=3,nf(f,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Wa(t){function i(I){return Mc(I,t)}Ys!==null&&Mc(Ys,t),Xs!==null&&Mc(Xs,t),Js!==null&&Mc(Js,t),wl.forEach(i),Al.forEach(i);for(var a=0;a<Zs.length;a++){var l=Zs[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Zs.length&&(a=Zs[0],a.blockedOn===null);)xv(a),a.blockedOn===null&&Zs.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],f=a[l+1],_=h[Bt]||null;if(typeof f=="function")_||Cv(a);else if(_){var T=null;if(f&&f.hasAttribute("formAction")){if(h=f,_=f[Bt]||null)T=_.formAction;else if(sm(h)!==null)continue}else T=_.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),Cv(a)}}}function Nv(){function t(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(_){return h=_})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function am(t){this._internalRoot=t}Vc.prototype.render=am.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=Nn();Ev(a,l,t,i,null,null)},Vc.prototype.unmount=am.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;Ev(t.current,2,null,t,null,null),pc(),i[oi]=null}};function Vc(t){this._internalRoot=t}Vc.prototype.unstable_scheduleHydration=function(t){if(t){var i=Ri();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Zs.length&&i!==0&&i<Zs[a].priority;a++);Zs.splice(a,0,t),a===0&&xv(t)}};var Iv=e.version;if(Iv!=="19.2.0")throw Error(r(527,Iv,"19.2.0"));oe.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=y(i),t=t!==null?b(t):null,t=t===null?null:t.stateNode,t};var kA={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jc.isDisabled&&jc.supportsFiber)try{ds=jc.inject(kA),Xt=jc}catch{}}return Rl.createRoot=function(t,i){if(!o(t))throw Error(r(299));var a=!1,l="",h=Uy,f=Py,_=Ly;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=_v(t,1,!1,null,null,a,l,null,h,f,_,Nv),t[oi]=i.current,Bf(t),new am(i)},Rl.hydrateRoot=function(t,i,a){if(!o(t))throw Error(r(299));var l=!1,h="",f=Uy,_=Py,T=Ly,I=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(I=a.formState)),i=_v(t,1,!0,i,a??null,l,h,I,f,_,T,Nv),i.context=vv(null),a=i.current,l=Nn(),l=Io(l),h=Us(l),h.callback=null,Ps(a,h,l),a=l,i.current.lanes=a,ps(i,a),gi(i),t[oi]=i.current,Bf(t),new Vc(i)},Rl.version="19.2.0",Rl}var zv;function GA(){if(zv)return lm.exports;zv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),lm.exports=FA(),lm.exports}var KA=GA();const QA=jA(KA);var te=sp();let $A={data:""},YA=s=>{if(typeof window=="object"){let e=(s?s.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(s||document.head).appendChild(e),e.firstChild}return s||$A},XA=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,JA=/\/\*[^]*?\*\/|  +/g,Bv=/\n+/g,tr=(s,e)=>{let n="",r="",o="";for(let u in s){let d=s[u];u[0]=="@"?u[1]=="i"?n=u+" "+d+";":r+=u[1]=="f"?tr(d,u):u+"{"+tr(d,u[1]=="k"?"":e)+"}":typeof d=="object"?r+=tr(d,e?e.replace(/([^,])+/g,m=>u.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,g=>/&/.test(g)?g.replace(/&/g,m):m?m+" "+g:g)):u):d!=null&&(u=/^--/.test(u)?u:u.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=tr.p?tr.p(u,d):u+":"+d+";")}return n+(e&&o?e+"{"+o+"}":o)+r},Ji={},_E=s=>{if(typeof s=="object"){let e="";for(let n in s)e+=n+_E(s[n]);return e}return s},ZA=(s,e,n,r,o)=>{let u=_E(s),d=Ji[u]||(Ji[u]=(g=>{let y=0,b=11;for(;y<g.length;)b=101*b+g.charCodeAt(y++)>>>0;return"go"+b})(u));if(!Ji[d]){let g=u!==s?s:(y=>{let b,A,x=[{}];for(;b=XA.exec(y.replace(JA,""));)b[4]?x.shift():b[3]?(A=b[3].replace(Bv," ").trim(),x.unshift(x[0][A]=x[0][A]||{})):x[0][b[1]]=b[2].replace(Bv," ").trim();return x[0]})(s);Ji[d]=tr(o?{["@keyframes "+d]:g}:g,n?"":"."+d)}let m=n&&Ji.g?Ji.g:null;return n&&(Ji.g=Ji[d]),((g,y,b,A)=>{A?y.data=y.data.replace(A,g):y.data.indexOf(g)===-1&&(y.data=b?g+y.data:y.data+g)})(Ji[d],e,r,m),d},WA=(s,e,n)=>s.reduce((r,o,u)=>{let d=e[u];if(d&&d.call){let m=d(n),g=m&&m.props&&m.props.className||/^go/.test(m)&&m;d=g?"."+g:m&&typeof m=="object"?m.props?"":tr(m,""):m===!1?"":m}return r+o+(d??"")},"");function xh(s){let e=this||{},n=s.call?s(e.p):s;return ZA(n.unshift?n.raw?WA(n,[].slice.call(arguments,1),e.p):n.reduce((r,o)=>Object.assign(r,o&&o.call?o(e.p):o),{}):n,YA(e.target),e.g,e.o,e.k)}let vE,Rm,Cm;xh.bind({g:1});let rs=xh.bind({k:1});function e1(s,e,n,r){tr.p=e,vE=s,Rm=n,Cm=r}function mr(s,e){let n=this||{};return function(){let r=arguments;function o(u,d){let m=Object.assign({},u),g=m.className||o.className;n.p=Object.assign({theme:Rm&&Rm()},m),n.o=/ *go\d+/.test(g),m.className=xh.apply(n,r)+(g?" "+g:"");let y=s;return s[0]&&(y=m.as||s,delete m.as),Cm&&y[0]&&Cm(m),vE(y,m)}return o}}var t1=s=>typeof s=="function",rh=(s,e)=>t1(s)?s(e):s,n1=(()=>{let s=0;return()=>(++s).toString()})(),EE=(()=>{let s;return()=>{if(s===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");s=!e||e.matches}return s}})(),i1=20,rp="default",bE=(s,e)=>{let{toastLimit:n}=s.settings;switch(e.type){case 0:return{...s,toasts:[e.toast,...s.toasts].slice(0,n)};case 1:return{...s,toasts:s.toasts.map(d=>d.id===e.toast.id?{...d,...e.toast}:d)};case 2:let{toast:r}=e;return bE(s,{type:s.toasts.find(d=>d.id===r.id)?1:0,toast:r});case 3:let{toastId:o}=e;return{...s,toasts:s.toasts.map(d=>d.id===o||o===void 0?{...d,dismissed:!0,visible:!1}:d)};case 4:return e.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(d=>d.id!==e.toastId)};case 5:return{...s,pausedAt:e.time};case 6:let u=e.time-(s.pausedAt||0);return{...s,pausedAt:void 0,toasts:s.toasts.map(d=>({...d,pauseDuration:d.pauseDuration+u}))}}},Yc=[],TE={toasts:[],pausedAt:void 0,settings:{toastLimit:i1}},yi={},wE=(s,e=rp)=>{yi[e]=bE(yi[e]||TE,s),Yc.forEach(([n,r])=>{n===e&&r(yi[e])})},AE=s=>Object.keys(yi).forEach(e=>wE(s,e)),s1=s=>Object.keys(yi).find(e=>yi[e].toasts.some(n=>n.id===s)),Rh=(s=rp)=>e=>{wE(e,s)},r1={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},a1=(s={},e=rp)=>{let[n,r]=te.useState(yi[e]||TE),o=te.useRef(yi[e]);te.useEffect(()=>(o.current!==yi[e]&&r(yi[e]),Yc.push([e,r]),()=>{let d=Yc.findIndex(([m])=>m===e);d>-1&&Yc.splice(d,1)}),[e]);let u=n.toasts.map(d=>{var m,g,y;return{...s,...s[d.type],...d,removeDelay:d.removeDelay||((m=s[d.type])==null?void 0:m.removeDelay)||(s==null?void 0:s.removeDelay),duration:d.duration||((g=s[d.type])==null?void 0:g.duration)||(s==null?void 0:s.duration)||r1[d.type],style:{...s.style,...(y=s[d.type])==null?void 0:y.style,...d.style}}});return{...n,toasts:u}},o1=(s,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:s,pauseDuration:0,...n,id:(n==null?void 0:n.id)||n1()}),$l=s=>(e,n)=>{let r=o1(e,s,n);return Rh(r.toasterId||s1(r.id))({type:2,toast:r}),r.id},It=(s,e)=>$l("blank")(s,e);It.error=$l("error");It.success=$l("success");It.loading=$l("loading");It.custom=$l("custom");It.dismiss=(s,e)=>{let n={type:3,toastId:s};e?Rh(e)(n):AE(n)};It.dismissAll=s=>It.dismiss(void 0,s);It.remove=(s,e)=>{let n={type:4,toastId:s};e?Rh(e)(n):AE(n)};It.removeAll=s=>It.remove(void 0,s);It.promise=(s,e,n)=>{let r=It.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof s=="function"&&(s=s()),s.then(o=>{let u=e.success?rh(e.success,o):void 0;return u?It.success(u,{id:r,...n,...n==null?void 0:n.success}):It.dismiss(r),o}).catch(o=>{let u=e.error?rh(e.error,o):void 0;u?It.error(u,{id:r,...n,...n==null?void 0:n.error}):It.dismiss(r)}),s};var l1=1e3,u1=(s,e="default")=>{let{toasts:n,pausedAt:r}=a1(s,e),o=te.useRef(new Map).current,u=te.useCallback((A,x=l1)=>{if(o.has(A))return;let j=setTimeout(()=>{o.delete(A),d({type:4,toastId:A})},x);o.set(A,j)},[]);te.useEffect(()=>{if(r)return;let A=Date.now(),x=n.map(j=>{if(j.duration===1/0)return;let K=(j.duration||0)+j.pauseDuration-(A-j.createdAt);if(K<0){j.visible&&It.dismiss(j.id);return}return setTimeout(()=>It.dismiss(j.id,e),K)});return()=>{x.forEach(j=>j&&clearTimeout(j))}},[n,r,e]);let d=te.useCallback(Rh(e),[e]),m=te.useCallback(()=>{d({type:5,time:Date.now()})},[d]),g=te.useCallback((A,x)=>{d({type:1,toast:{id:A,height:x}})},[d]),y=te.useCallback(()=>{r&&d({type:6,time:Date.now()})},[r,d]),b=te.useCallback((A,x)=>{let{reverseOrder:j=!1,gutter:K=8,defaultPosition:G}=x||{},F=n.filter(re=>(re.position||G)===(A.position||G)&&re.height),se=F.findIndex(re=>re.id===A.id),le=F.filter((re,ee)=>ee<se&&re.visible).length;return F.filter(re=>re.visible).slice(...j?[le+1]:[0,le]).reduce((re,ee)=>re+(ee.height||0)+K,0)},[n]);return te.useEffect(()=>{n.forEach(A=>{if(A.dismissed)u(A.id,A.removeDelay);else{let x=o.get(A.id);x&&(clearTimeout(x),o.delete(A.id))}})},[n,u]),{toasts:n,handlers:{updateHeight:g,startPause:m,endPause:y,calculateOffset:b}}},c1=rs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,h1=rs`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,d1=rs`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,f1=mr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${c1} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${h1} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${s=>s.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${d1} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,m1=rs`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,p1=mr("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${s=>s.secondary||"#e0e0e0"};
  border-right-color: ${s=>s.primary||"#616161"};
  animation: ${m1} 1s linear infinite;
`,g1=rs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,y1=rs`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,_1=mr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${g1} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${y1} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${s=>s.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,v1=mr("div")`
  position: absolute;
`,E1=mr("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,b1=rs`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,T1=mr("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${b1} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,w1=({toast:s})=>{let{icon:e,type:n,iconTheme:r}=s;return e!==void 0?typeof e=="string"?te.createElement(T1,null,e):e:n==="blank"?null:te.createElement(E1,null,te.createElement(p1,{...r}),n!=="loading"&&te.createElement(v1,null,n==="error"?te.createElement(f1,{...r}):te.createElement(_1,{...r})))},A1=s=>`
0% {transform: translate3d(0,${s*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,S1=s=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${s*-150}%,-1px) scale(.6); opacity:0;}
`,x1="0%{opacity:0;} 100%{opacity:1;}",R1="0%{opacity:1;} 100%{opacity:0;}",C1=mr("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,N1=mr("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,I1=(s,e)=>{let n=s.includes("top")?1:-1,[r,o]=EE()?[x1,R1]:[A1(n),S1(n)];return{animation:e?`${rs(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${rs(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},D1=te.memo(({toast:s,position:e,style:n,children:r})=>{let o=s.height?I1(s.position||e||"top-center",s.visible):{opacity:0},u=te.createElement(w1,{toast:s}),d=te.createElement(N1,{...s.ariaProps},rh(s.message,s));return te.createElement(C1,{className:s.className,style:{...o,...n,...s.style}},typeof r=="function"?r({icon:u,message:d}):te.createElement(te.Fragment,null,u,d))});e1(te.createElement);var O1=({id:s,className:e,style:n,onHeightUpdate:r,children:o})=>{let u=te.useCallback(d=>{if(d){let m=()=>{let g=d.getBoundingClientRect().height;r(s,g)};m(),new MutationObserver(m).observe(d,{subtree:!0,childList:!0,characterData:!0})}},[s,r]);return te.createElement("div",{ref:u,className:e,style:n},o)},M1=(s,e)=>{let n=s.includes("top"),r=n?{top:0}:{bottom:0},o=s.includes("center")?{justifyContent:"center"}:s.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:EE()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...o}},k1=xh`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Uc=16,V1=({reverseOrder:s,position:e="top-center",toastOptions:n,gutter:r,children:o,toasterId:u,containerStyle:d,containerClassName:m})=>{let{toasts:g,handlers:y}=u1(n,u);return te.createElement("div",{"data-rht-toaster":u||"",style:{position:"fixed",zIndex:9999,top:Uc,left:Uc,right:Uc,bottom:Uc,pointerEvents:"none",...d},className:m,onMouseEnter:y.startPause,onMouseLeave:y.endPause},g.map(b=>{let A=b.position||e,x=y.calculateOffset(b,{reverseOrder:s,gutter:r,defaultPosition:e}),j=M1(A,x);return te.createElement(O1,{id:b.id,key:b.id,onHeightUpdate:y.updateHeight,className:b.visible?k1:"",style:j},b.type==="custom"?rh(b.message,b):o?o(b):te.createElement(D1,{toast:b,position:A}))}))},In=It,qv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE=function(s){const e=[];let n=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},j1=function(s){const e=[];let n=0,r=0;for(;n<s.length;){const o=s[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[n++];e[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[n++],d=s[n++],m=s[n++],g=((o&7)<<18|(u&63)<<12|(d&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const u=s[n++],d=s[n++];e[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},xE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],d=o+1<s.length,m=d?s[o+1]:0,g=o+2<s.length,y=g?s[o+2]:0,b=u>>2,A=(u&3)<<4|m>>4;let x=(m&15)<<2|y>>6,j=y&63;g||(j=64,d||(x=64)),r.push(n[b],n[A],n[x],n[j])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(SE(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):j1(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=n[s.charAt(o++)],m=o<s.length?n[s.charAt(o)]:0;++o;const y=o<s.length?n[s.charAt(o)]:64;++o;const A=o<s.length?n[s.charAt(o)]:64;if(++o,u==null||m==null||y==null||A==null)throw new U1;const x=u<<2|m>>4;if(r.push(x),y!==64){const j=m<<4&240|y>>2;if(r.push(j),A!==64){const K=y<<6&192|A;r.push(K)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class U1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const P1=function(s){const e=SE(s);return xE.encodeByteArray(e,!0)},ah=function(s){return P1(s).replace(/\./g,"")},RE=function(s){try{return xE.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=()=>L1().__FIREBASE_DEFAULTS__,B1=()=>{if(typeof process>"u"||typeof qv>"u")return;const s=qv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},q1=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&RE(s[1]);return e&&JSON.parse(e)},Ch=()=>{try{return z1()||B1()||q1()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},CE=s=>{var e,n;return(n=(e=Ch())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[s]},ap=s=>{const e=CE(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},NE=()=>{var s;return(s=Ch())===null||s===void 0?void 0:s.config},IE=s=>{var e;return(e=Ch())===null||e===void 0?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},s);return[ah(JSON.stringify(n)),ah(JSON.stringify(d)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function F1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function G1(){var s;const e=(s=Ch())===null||s===void 0?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function K1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Q1(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function $1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Y1(){const s=sn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function X1(){return!G1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function J1(){try{return typeof indexedDB=="object"}catch{return!1}}function Z1(){return new Promise((s,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1="FirebaseError";class ii extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=W1,Object.setPrototypeOf(this,ii.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yl.prototype.create)}}class Yl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?eS(u,r):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new ii(o,m,r)}}function eS(s,e){return s.replace(tS,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const tS=/\{\$([^}]+)}/g;function nS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function zl(s,e){if(s===e)return!0;const n=Object.keys(s),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const u=s[o],d=e[o];if(Hv(u)&&Hv(d)){if(!zl(u,d))return!1}else if(u!==d)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function Hv(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(s){const e=[];for(const[n,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function iS(s,e){const n=new sS(s,e);return n.subscribe.bind(n)}class sS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");rS(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=fm),o.error===void 0&&(o.error=fm),o.complete===void 0&&(o.complete=fm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rS(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function fm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(s){return s&&s._delegate?s._delegate:s}class as{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new H1;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lS(e))try{this.getOrInitializeService({instanceIdentifier:Qr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(e=Qr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qr){return this.instances.has(e)}getOptions(e=Qr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[u,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&d.resolve(o)}return o}onInit(e,n){var r;const o=this.normalizeInstanceIdentifier(n),u=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;u.add(e),this.onInitCallbacks.set(o,u);const d=this.instances.get(o);return d&&e(d,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:oS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Qr){return this.component?this.component.multipleInstances?e:Qr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function oS(s){return s===Qr?void 0:s}function lS(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new aS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(je||(je={}));const cS={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},hS=je.INFO,dS={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},fS=(s,e,...n)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),o=dS[e];if(o)console[o](`[${r}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class op{constructor(e){this.name=e,this._logLevel=hS,this._logHandler=fS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const mS=(s,e)=>e.some(n=>s instanceof n);let Fv,Gv;function pS(){return Fv||(Fv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gS(){return Gv||(Gv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const OE=new WeakMap,Nm=new WeakMap,ME=new WeakMap,mm=new WeakMap,lp=new WeakMap;function yS(s){const e=new Promise((n,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",d)},u=()=>{n(or(s.result)),o()},d=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&OE.set(n,s)}).catch(()=>{}),lp.set(e,s),e}function _S(s){if(Nm.has(s))return;const e=new Promise((n,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",d),s.removeEventListener("abort",d)},u=()=>{n(),o()},d=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",d),s.addEventListener("abort",d)});Nm.set(s,e)}let Im={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return Nm.get(s);if(e==="objectStoreNames")return s.objectStoreNames||ME.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return or(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function vS(s){Im=s(Im)}function ES(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=s.call(pm(this),e,...n);return ME.set(r,e.sort?e.sort():[e]),or(r)}:gS().includes(s)?function(...e){return s.apply(pm(this),e),or(OE.get(this))}:function(...e){return or(s.apply(pm(this),e))}}function bS(s){return typeof s=="function"?ES(s):(s instanceof IDBTransaction&&_S(s),mS(s,pS())?new Proxy(s,Im):s)}function or(s){if(s instanceof IDBRequest)return yS(s);if(mm.has(s))return mm.get(s);const e=bS(s);return e!==s&&(mm.set(s,e),lp.set(e,s)),e}const pm=s=>lp.get(s);function TS(s,e,{blocked:n,upgrade:r,blocking:o,terminated:u}={}){const d=indexedDB.open(s,e),m=or(d);return r&&d.addEventListener("upgradeneeded",g=>{r(or(d.result),g.oldVersion,g.newVersion,or(d.transaction),g)}),n&&d.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const wS=["get","getKey","getAll","getAllKeys","count"],AS=["put","add","delete","clear"],gm=new Map;function Kv(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(gm.get(e))return gm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=AS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||wS.includes(n)))return;const u=async function(d,...m){const g=this.transaction(d,o?"readwrite":"readonly");let y=g.store;return r&&(y=y.index(m.shift())),(await Promise.all([y[n](...m),o&&g.done]))[0]};return gm.set(e,u),u}vS(s=>({...s,get:(e,n,r)=>Kv(e,n)||s.get(e,n,r),has:(e,n)=>!!Kv(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(xS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function xS(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Dm="@firebase/app",Qv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os=new op("@firebase/app"),RS="@firebase/app-compat",CS="@firebase/analytics-compat",NS="@firebase/analytics",IS="@firebase/app-check-compat",DS="@firebase/app-check",OS="@firebase/auth",MS="@firebase/auth-compat",kS="@firebase/database",VS="@firebase/data-connect",jS="@firebase/database-compat",US="@firebase/functions",PS="@firebase/functions-compat",LS="@firebase/installations",zS="@firebase/installations-compat",BS="@firebase/messaging",qS="@firebase/messaging-compat",HS="@firebase/performance",FS="@firebase/performance-compat",GS="@firebase/remote-config",KS="@firebase/remote-config-compat",QS="@firebase/storage",$S="@firebase/storage-compat",YS="@firebase/firestore",XS="@firebase/vertexai-preview",JS="@firebase/firestore-compat",ZS="firebase",WS="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="[DEFAULT]",ex={[Dm]:"fire-core",[RS]:"fire-core-compat",[NS]:"fire-analytics",[CS]:"fire-analytics-compat",[DS]:"fire-app-check",[IS]:"fire-app-check-compat",[OS]:"fire-auth",[MS]:"fire-auth-compat",[kS]:"fire-rtdb",[VS]:"fire-data-connect",[jS]:"fire-rtdb-compat",[US]:"fire-fn",[PS]:"fire-fn-compat",[LS]:"fire-iid",[zS]:"fire-iid-compat",[BS]:"fire-fcm",[qS]:"fire-fcm-compat",[HS]:"fire-perf",[FS]:"fire-perf-compat",[GS]:"fire-rc",[KS]:"fire-rc-compat",[QS]:"fire-gcs",[$S]:"fire-gcs-compat",[YS]:"fire-fst",[JS]:"fire-fst-compat",[XS]:"fire-vertex","fire-js":"fire-js",[ZS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh=new Map,tx=new Map,Mm=new Map;function $v(s,e){try{s.container.addComponent(e)}catch(n){os.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function cr(s){const e=s.name;if(Mm.has(e))return os.debug(`There were multiple attempts to register component ${e}.`),!1;Mm.set(e,s);for(const n of oh.values())$v(n,s);for(const n of tx.values())$v(n,s);return!0}function Jl(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function es(s){return s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},lr=new Yl("app","Firebase",nx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new as("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw lr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=WS;function kE(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Om,automaticDataCollectionEnabled:!1},e),o=r.name;if(typeof o!="string"||!o)throw lr.create("bad-app-name",{appName:String(o)});if(n||(n=NE()),!n)throw lr.create("no-options");const u=oh.get(o);if(u){if(zl(n,u.options)&&zl(r,u.config))return u;throw lr.create("duplicate-app",{appName:o})}const d=new uS(o);for(const g of Mm.values())d.addComponent(g);const m=new ix(n,r,d);return oh.set(o,m),m}function Nh(s=Om){const e=oh.get(s);if(!e&&s===Om&&NE())return kE();if(!e)throw lr.create("no-app",{appName:s});return e}function Kn(s,e,n){var r;let o=(r=ex[s])!==null&&r!==void 0?r:s;n&&(o+=`-${n}`);const u=o.match(/\s|\//),d=e.match(/\s|\//);if(u||d){const m=[`Unable to register library "${o}" with version "${e}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&d&&m.push("and"),d&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),os.warn(m.join(" "));return}cr(new as(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx="firebase-heartbeat-database",rx=1,Bl="firebase-heartbeat-store";let ym=null;function VE(){return ym||(ym=TS(sx,rx,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Bl)}catch(n){console.warn(n)}}}}).catch(s=>{throw lr.create("idb-open",{originalErrorMessage:s.message})})),ym}async function ax(s){try{const n=(await VE()).transaction(Bl),r=await n.objectStore(Bl).get(jE(s));return await n.done,r}catch(e){if(e instanceof ii)os.warn(e.message);else{const n=lr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});os.warn(n.message)}}}async function Yv(s,e){try{const r=(await VE()).transaction(Bl,"readwrite");await r.objectStore(Bl).put(e,jE(s)),await r.done}catch(n){if(n instanceof ii)os.warn(n.message);else{const r=lr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});os.warn(r.message)}}}function jE(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox=1024,lx=720*60*60*1e3;class ux{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new hx(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=Xv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(d=>d.date===u)?void 0:(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(d=>{const m=new Date(d.date).valueOf();return Date.now()-m<=lx}),this._storage.overwrite(this._heartbeatsCache))}catch(r){os.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Xv(),{heartbeatsToSend:r,unsentEntries:o}=cx(this._heartbeatsCache.heartbeats),u=ah(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return os.warn(n),""}}}function Xv(){return new Date().toISOString().substring(0,10)}function cx(s,e=ox){const n=[];let r=s.slice();for(const o of s){const u=n.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),Jv(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Jv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class hx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return J1()?Z1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ax(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Yv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Yv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Jv(s){return ah(JSON.stringify({version:2,heartbeats:s})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(s){cr(new as("platform-logger",e=>new SS(e),"PRIVATE")),cr(new as("heartbeat",e=>new ux(e),"PRIVATE")),Kn(Dm,Qv,s),Kn(Dm,Qv,"esm2017"),Kn("fire-js","")}dx("");function up(s,e){var n={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(n[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(s);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(s,r[o])&&(n[r[o]]=s[r[o]]);return n}function UE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const fx=UE,PE=new Yl("auth","Firebase",UE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh=new op("@firebase/auth");function mx(s,...e){lh.logLevel<=je.WARN&&lh.warn(`Auth (${aa}): ${s}`,...e)}function Xc(s,...e){lh.logLevel<=je.ERROR&&lh.error(`Auth (${aa}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(s,...e){throw hp(s,...e)}function ti(s,...e){return hp(s,...e)}function cp(s,e,n){const r=Object.assign(Object.assign({},fx()),{[e]:n});return new Yl("auth","Firebase",r).create(e,{appName:s.name})}function Zr(s){return cp(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function px(s,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ti(s,"argument-error"),cp(s,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function hp(s,...e){if(typeof s!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(n,...r)}return PE.create(s,...e)}function Ee(s,e,...n){if(!s)throw hp(e,...n)}function ts(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Xc(e),new Error(e)}function ls(s,e){s||ts(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function gx(){return Zv()==="http:"||Zv()==="https:"}function Zv(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(gx()||Q1()||"connection"in navigator)?navigator.onLine:!0}function _x(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n){this.shortDelay=e,this.longDelay=n,ls(n>e,"Short delay should be less than long delay!"),this.isMobile=F1()||$1()}get(){return yx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(s,e){ls(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ts("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ts("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ts("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex=new Zl(3e4,6e4);function fp(s,e){return s.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:s.tenantId}):e}async function Eo(s,e,n,r,o={}){return zE(s,o,async()=>{let u={},d={};r&&(e==="GET"?d=r:u={body:JSON.stringify(r)});const m=Xl(Object.assign({key:s.config.apiKey},d)).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const y=Object.assign({method:e,headers:g},u);return K1()||(y.referrerPolicy="no-referrer"),LE.fetch()(BE(s,s.config.apiHost,n,m),y)})}async function zE(s,e,n){s._canInitEmulator=!1;const r=Object.assign(Object.assign({},vx),e);try{const o=new Tx(s),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw Pc(s,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const m=u.ok?d.errorMessage:d.error.message,[g,y]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pc(s,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw Pc(s,"email-already-in-use",d);if(g==="USER_DISABLED")throw Pc(s,"user-disabled",d);const b=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw cp(s,b,y);Ti(s,b)}}catch(o){if(o instanceof ii)throw o;Ti(s,"network-request-failed",{message:String(o)})}}async function bx(s,e,n,r,o={}){const u=await Eo(s,e,n,r,o);return"mfaPendingCredential"in u&&Ti(s,"multi-factor-auth-required",{_serverResponse:u}),u}function BE(s,e,n,r){const o=`${e}${n}?${r}`;return s.config.emulator?dp(s.config,o):`${s.config.apiScheme}://${o}`}class Tx{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ti(this.auth,"network-request-failed")),Ex.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Pc(s,e,n){const r={appName:s.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=ti(s,e,r);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wx(s,e){return Eo(s,"POST","/v1/accounts:delete",e)}async function qE(s,e){return Eo(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kl(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Ax(s,e=!1){const n=We(s),r=await n.getIdToken(e),o=mp(r);Ee(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u==null?void 0:u.sign_in_provider;return{claims:o,token:r,authTime:kl(_m(o.auth_time)),issuedAtTime:kl(_m(o.iat)),expirationTime:kl(_m(o.exp)),signInProvider:d||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function _m(s){return Number(s)*1e3}function mp(s){const[e,n,r]=s.split(".");if(e===void 0||n===void 0||r===void 0)return Xc("JWT malformed, contained fewer than 3 sections"),null;try{const o=RE(n);return o?JSON.parse(o):(Xc("Failed to decode base64 JWT payload"),null)}catch(o){return Xc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Wv(s){const e=mp(s);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ql(s,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ii&&Sx(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function Sx({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=kl(this.lastLoginAt),this.creationTime=kl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uh(s){var e;const n=s.auth,r=await s.getIdToken(),o=await ql(s,qE(n,{idToken:r}));Ee(o==null?void 0:o.users.length,n,"internal-error");const u=o.users[0];s._notifyReloadListener(u);const d=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?HE(u.providerUserInfo):[],m=Cx(s.providerData,d),g=s.isAnonymous,y=!(s.email&&u.passwordHash)&&!(m!=null&&m.length),b=g?y:!1,A={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new Vm(u.createdAt,u.lastLoginAt),isAnonymous:b};Object.assign(s,A)}async function Rx(s){const e=We(s);await uh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Cx(s,e){return[...s.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function HE(s){return s.map(e=>{var{providerId:n}=e,r=up(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nx(s,e){const n=await zE(s,{},async()=>{const r=Xl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,d=BE(s,o,"/v1/token",`key=${u}`),m=await s._getAdditionalHeaders();return m["Content-Type"]="application/x-www-form-urlencoded",LE.fetch()(d,{method:"POST",headers:m,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Ix(s,e){return Eo(s,"POST","/v2/accounts:revokeToken",fp(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Wv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const n=Wv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:u}=await Nx(e,n);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:u}=n,d=new io;return r&&(Ee(typeof r=="string","internal-error",{appName:e}),d.refreshToken=r),o&&(Ee(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(Ee(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new io,this.toJSON())}_performRefresh(){return ts("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(s,e){Ee(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class ns{constructor(e){var{uid:n,auth:r,stsTokenManager:o}=e,u=up(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new Vm(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const n=await ql(this,this.stsTokenManager.getToken(this.auth,e));return Ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Ax(this,e)}reload(){return Rx(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ns(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await uh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(es(this.auth.app))return Promise.reject(Zr(this.auth));const e=await this.getIdToken();return await ql(this,wx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,o,u,d,m,g,y,b;const A=(r=n.displayName)!==null&&r!==void 0?r:void 0,x=(o=n.email)!==null&&o!==void 0?o:void 0,j=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,K=(d=n.photoURL)!==null&&d!==void 0?d:void 0,G=(m=n.tenantId)!==null&&m!==void 0?m:void 0,F=(g=n._redirectEventId)!==null&&g!==void 0?g:void 0,se=(y=n.createdAt)!==null&&y!==void 0?y:void 0,le=(b=n.lastLoginAt)!==null&&b!==void 0?b:void 0,{uid:re,emailVerified:ee,isAnonymous:me,providerData:ne,stsTokenManager:R}=n;Ee(re&&R,e,"internal-error");const S=io.fromJSON(this.name,R);Ee(typeof re=="string",e,"internal-error"),er(A,e.name),er(x,e.name),Ee(typeof ee=="boolean",e,"internal-error"),Ee(typeof me=="boolean",e,"internal-error"),er(j,e.name),er(K,e.name),er(G,e.name),er(F,e.name),er(se,e.name),er(le,e.name);const C=new ns({uid:re,auth:e,email:x,emailVerified:ee,displayName:A,isAnonymous:me,photoURL:K,phoneNumber:j,tenantId:G,stsTokenManager:S,createdAt:se,lastLoginAt:le});return ne&&Array.isArray(ne)&&(C.providerData=ne.map(O=>Object.assign({},O))),F&&(C._redirectEventId=F),C}static async _fromIdTokenResponse(e,n,r=!1){const o=new io;o.updateFromServerResponse(n);const u=new ns({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await uh(u),u}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];Ee(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?HE(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new io;m.updateFromIdToken(r);const g=new ns({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Vm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0=new Map;function is(s){ls(s instanceof Function,"Expected a class definition");let e=e0.get(s);return e?(ls(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,e0.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}FE.type="NONE";const t0=FE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(s,e,n){return`firebase:${s}:${e}:${n}`}class so{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=Jc(this.userKey,o.apiKey,u),this.fullPersistenceKey=Jc("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ns._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new so(is(t0),e,r);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||is(t0);const d=Jc(r,e.config.apiKey,e.name);let m=null;for(const y of n)try{const b=await y._get(d);if(b){const A=ns._fromJSON(e,b);y!==u&&(m=A),u=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new so(u,e,r):(u=g[0],m&&await u._set(d,m.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(d)}catch{}})),new so(u,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($E(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(GE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(XE(e))return"Blackberry";if(JE(e))return"Webos";if(KE(e))return"Safari";if((e.includes("chrome/")||QE(e))&&!e.includes("edge/"))return"Chrome";if(YE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function GE(s=sn()){return/firefox\//i.test(s)}function KE(s=sn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function QE(s=sn()){return/crios\//i.test(s)}function $E(s=sn()){return/iemobile/i.test(s)}function YE(s=sn()){return/android/i.test(s)}function XE(s=sn()){return/blackberry/i.test(s)}function JE(s=sn()){return/webos/i.test(s)}function pp(s=sn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function Dx(s=sn()){var e;return pp(s)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Ox(){return Y1()&&document.documentMode===10}function ZE(s=sn()){return pp(s)||YE(s)||JE(s)||XE(s)||/windows phone/i.test(s)||$E(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(s,e=[]){let n;switch(s){case"Browser":n=n0(sn());break;case"Worker":n=`${n0(sn())}-${s}`;break;default:n=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${aa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=u=>new Promise((d,m)=>{try{const g=e(u);d(g)}catch(g){m(g)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kx(s,e={}){return Eo(s,"GET","/v2/passwordPolicy",fp(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx=6;class jx{constructor(e){var n,r,o,u;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=d.minPasswordLength)!==null&&n!==void 0?n:Vx,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,o,u,d,m;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(n=g.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),g.isValid&&(g.isValid=(r=g.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(u=g.containsUppercaseLetter)!==null&&u!==void 0?u:!0),g.isValid&&(g.isValid=(d=g.containsNumericCharacter)!==null&&d!==void 0?d:!0),g.isValid&&(g.isValid=(m=g.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),g}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new i0(this),this.idTokenSubscription=new i0(this),this.beforeStateQueue=new Mx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=PE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=is(n)),this._initializationPromise=this.queue(async()=>{var r,o;if(!this._deleted&&(this.persistenceManager=await so.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await qE(this,{idToken:e}),r=await ns._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(es(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(m,m))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let o=r,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,m=o==null?void 0:o._redirectEventId,g=await this.tryRedirectSignIn(e);(!d||d===m)&&(g!=null&&g.user)&&(o=g.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await uh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_x()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(es(this.app))return Promise.reject(Zr(this));const n=e?We(e):null;return n&&Ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return es(this.app)?Promise.reject(Zr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return es(this.app)?Promise.reject(Zr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(is(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await kx(this),n=new jx(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Yl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Ix(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&is(e)||this._popupRedirectResolver;Ee(n,this,"argument-error"),this.redirectPersistenceManager=await so.create(this,[is(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(m,this,"internal-error"),m.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,r,o);return()=>{d=!0,g()}}else{const g=e.addObserver(n);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=WE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&mx(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ih(s){return We(s)}class i0{constructor(e){this.auth=e,this.observer=null,this.addObserver=iS(n=>this.observer=n)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Px(s){gp=s}function Lx(s){return gp.loadJS(s)}function zx(){return gp.gapiScript}function Bx(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qx(s,e){const n=Jl(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(zl(u,e??{}))return o;Ti(o,"already-initialized")}return n.initialize({options:e})}function Hx(s,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(is);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Fx(s,e,n){const r=Ih(s);Ee(r._canInitEmulator,r,"emulator-config-failed"),Ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,u=eb(e),{host:d,port:m}=Gx(e),g=m===null?"":`:${m}`;r.config.emulator={url:`${u}//${d}${g}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:d,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})}),Kx()}function eb(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function Gx(s){const e=eb(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:s0(r.substr(u.length+1))}}else{const[u,d]=r.split(":");return{host:u,port:s0(d)}}}function s0(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function Kx(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ts("not implemented")}_getIdTokenResponse(e){return ts("not implemented")}_linkToIdToken(e,n){return ts("not implemented")}_getReauthenticationResolver(e){return ts("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ro(s,e){return bx(s,"POST","/v1/accounts:signInWithIdp",fp(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx="http://localhost";class ta extends tb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ta(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ti("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o}=n,u=up(n,["providerId","signInMethod"]);if(!r||!o)return null;const d=new ta(r,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return ro(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ro(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ro(e,n)}buildRequest(){const e={requestUri:Qx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Xl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl extends yp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends Wl{constructor(){super("facebook.com")}static credential(e){return ta._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return nr.credential(e.oauthAccessToken)}catch{return null}}}nr.FACEBOOK_SIGN_IN_METHOD="facebook.com";nr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends Wl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ta._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Zi.credential(n,r)}catch{return null}}}Zi.GOOGLE_SIGN_IN_METHOD="google.com";Zi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends Wl{constructor(){super("github.com")}static credential(e){return ta._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ir.credential(e.oauthAccessToken)}catch{return null}}}ir.GITHUB_SIGN_IN_METHOD="github.com";ir.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends Wl{constructor(){super("twitter.com")}static credential(e,n){return ta._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return sr.credential(n,r)}catch{return null}}}sr.TWITTER_SIGN_IN_METHOD="twitter.com";sr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const u=await ns._fromIdTokenResponse(e,r,o),d=r0(r);return new co({user:u,providerId:d,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=r0(r);return new co({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function r0(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch extends ii{constructor(e,n,r,o){var u;super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,ch.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new ch(e,n,r,o)}}function nb(s,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?ch._fromErrorAndOperation(s,u,e,r):u})}async function $x(s,e,n=!1){const r=await ql(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return co._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yx(s,e,n=!1){const{auth:r}=s;if(es(r.app))return Promise.reject(Zr(r));const o="reauthenticate";try{const u=await ql(s,nb(r,o,e,s),n);Ee(u.idToken,r,"internal-error");const d=mp(u.idToken);Ee(d,r,"internal-error");const{sub:m}=d;return Ee(s.uid===m,r,"user-mismatch"),co._forOperation(s,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Ti(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xx(s,e,n=!1){if(es(s.app))return Promise.reject(Zr(s));const r="signIn",o=await nb(s,r,e),u=await co._fromIdTokenResponse(s,r,o);return n||await s._updateCurrentUser(u.user),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jx(s,e){return We(s).setPersistence(e)}function Zx(s,e,n,r){return We(s).onIdTokenChanged(e,n,r)}function Wx(s,e,n){return We(s).beforeAuthStateChanged(e,n)}function e2(s,e,n,r){return We(s).onAuthStateChanged(e,n,r)}function Lc(s){return We(s).signOut()}const hh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(hh,"1"),this.storage.removeItem(hh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2=1e3,n2=10;class sb extends ib{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ZE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,m,g)=>{this.notifyListeners(d,g)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(r);!n&&this.localCache[r]===d||this.notifyListeners(r,d)},u=this.storage.getItem(r);Ox()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,n2):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},t2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}sb.type="LOCAL";const rb=sb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab extends ib{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ab.type="SESSION";const ob=ab;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new Dh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:u}=n.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const m=Array.from(d).map(async y=>y(n.origin,u)),g=await i2(m);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Dh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(s="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((m,g)=>{const y=_p("",20);o.port1.start();const b=setTimeout(()=>{g(new Error("unsupported_event"))},r);d={messageChannel:o,onMessage(A){const x=A;if(x.data.eventId===y)switch(x.data.status){case"ack":clearTimeout(b),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(x.data.response);break;default:clearTimeout(b),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(){return window}function r2(s){vi().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(){return typeof vi().WorkerGlobalScope<"u"&&typeof vi().importScripts=="function"}async function a2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function o2(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function l2(){return lb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub="firebaseLocalStorageDb",u2=1,dh="firebaseLocalStorage",cb="fbase_key";class eu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Oh(s,e){return s.transaction([dh],e?"readwrite":"readonly").objectStore(dh)}function c2(){const s=indexedDB.deleteDatabase(ub);return new eu(s).toPromise()}function jm(){const s=indexedDB.open(ub,u2);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(dh,{keyPath:cb})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(dh)?e(r):(r.close(),await c2(),e(await jm()))})})}async function a0(s,e,n){const r=Oh(s,!0).put({[cb]:e,value:n});return new eu(r).toPromise()}async function h2(s,e){const n=Oh(s,!1).get(e),r=await new eu(n).toPromise();return r===void 0?null:r.value}function o0(s,e){const n=Oh(s,!0).delete(e);return new eu(n).toPromise()}const d2=800,f2=3;class hb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await jm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>f2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Dh._getInstance(l2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await a2(),!this.activeServiceWorker)return;this.sender=new s2(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||o2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await jm();return await a0(e,hh,"1"),await o0(e,hh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>a0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>h2(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>o0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Oh(o,!1).getAll();return new eu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),d2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}hb.type="LOCAL";const m2=hb;new Zl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(s,e){return e?is(e):(Ee(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp extends tb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ro(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ro(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ro(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function p2(s){return Xx(s.auth,new vp(s),s.bypassAuthState)}function g2(s){const{auth:e,user:n}=s;return Ee(n,e,"internal-error"),Yx(n,new vp(s),s.bypassAuthState)}async function y2(s){const{auth:e,user:n}=s;return Ee(n,e,"internal-error"),$x(n,new vp(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e,n,r,o,u=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:u,error:d,type:m}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:n,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return p2;case"linkViaPopup":case"linkViaRedirect":return y2;case"reauthViaPopup":case"reauthViaRedirect":return g2;default:Ti(this.auth,"internal-error")}}resolve(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2=new Zl(2e3,1e4);async function v2(s,e,n){if(es(s.app))return Promise.reject(ti(s,"operation-not-supported-in-this-environment"));const r=Ih(s);px(s,e,yp);const o=db(r,n);return new Yr(r,"signInViaPopup",e,o).executeNotNull()}class Yr extends fb{constructor(e,n,r,o,u){super(e,n,o,u),this.provider=r,this.authWindow=null,this.pollId=null,Yr.currentPopupAction&&Yr.currentPopupAction.cancel(),Yr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){ls(this.filter.length===1,"Popup operations only handle one event");const e=_p();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ti(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ti(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Yr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ti(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_2.get())};e()}}Yr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2="pendingRedirect",Zc=new Map;class b2 extends fb{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Zc.get(this.auth._key());if(!e){try{const r=await T2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Zc.set(this.auth._key(),e)}return this.bypassAuthState||Zc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function T2(s,e){const n=S2(e),r=A2(s);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function w2(s,e){Zc.set(s._key(),e)}function A2(s){return is(s._redirectPersistence)}function S2(s){return Jc(E2,s.config.apiKey,s.name)}async function x2(s,e,n=!1){if(es(s.app))return Promise.reject(Zr(s));const r=Ih(s),o=db(r,e),d=await new b2(r,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await r._persistUserIfCurrent(d.user),await r._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2=600*1e3;class C2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!N2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!mb(e)){const o=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ti(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=R2&&this.cachedEventUids.clear(),this.cachedEventUids.has(l0(e))}saveEventToCache(e){this.cachedEventUids.add(l0(e)),this.lastProcessedEventTime=Date.now()}}function l0(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function mb({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function N2(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mb(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I2(s,e={}){return Eo(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,O2=/^https?/;async function M2(s){if(s.config.emulator)return;const{authorizedDomains:e}=await I2(s);for(const n of e)try{if(k2(n))return}catch{}Ti(s,"unauthorized-domain")}function k2(s){const e=km(),{protocol:n,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&r===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===r}if(!O2.test(n))return!1;if(D2.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2=new Zl(3e4,6e4);function u0(){const s=vi().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function j2(s){return new Promise((e,n)=>{var r,o,u;function d(){u0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{u0(),n(ti(s,"network-request-failed"))},timeout:V2.get()})}if(!((o=(r=vi().gapi)===null||r===void 0?void 0:r.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=vi().gapi)===null||u===void 0)&&u.load)d();else{const m=Bx("iframefcb");return vi()[m]=()=>{gapi.load?d():n(ti(s,"network-request-failed"))},Lx(`${zx()}?onload=${m}`).catch(g=>n(g))}}).catch(e=>{throw Wc=null,e})}let Wc=null;function U2(s){return Wc=Wc||j2(s),Wc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2=new Zl(5e3,15e3),L2="__/auth/iframe",z2="emulator/auth/iframe",B2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},q2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function H2(s){const e=s.config;Ee(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?dp(e,z2):`https://${s.config.authDomain}/${L2}`,r={apiKey:e.apiKey,appName:s.name,v:aa},o=q2.get(s.config.apiHost);o&&(r.eid=o);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${n}?${Xl(r).slice(1)}`}async function F2(s){const e=await U2(s),n=vi().gapi;return Ee(n,s,"internal-error"),e.open({where:document.body,url:H2(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:B2,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const d=ti(s,"network-request-failed"),m=vi().setTimeout(()=>{u(d)},P2.get());function g(){vi().clearTimeout(m),o(r)}r.ping(g).then(g,()=>{u(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},K2=500,Q2=600,$2="_blank",Y2="http://localhost";class c0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function X2(s,e,n,r=K2,o=Q2){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const g=Object.assign(Object.assign({},G2),{width:r.toString(),height:o.toString(),top:u,left:d}),y=sn().toLowerCase();n&&(m=QE(y)?$2:n),GE(y)&&(e=e||Y2,g.scrollbars="yes");const b=Object.entries(g).reduce((x,[j,K])=>`${x}${j}=${K},`,"");if(Dx(y)&&m!=="_self")return J2(e||"",m),new c0(null);const A=window.open(e||"",m,b);Ee(A,s,"popup-blocked");try{A.focus()}catch{}return new c0(A)}function J2(s,e){const n=document.createElement("a");n.href=s,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2="__/auth/handler",W2="emulator/auth/handler",eR=encodeURIComponent("fac");async function h0(s,e,n,r,o,u){Ee(s.config.authDomain,s,"auth-domain-config-required"),Ee(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:r,v:aa,eventId:o};if(e instanceof yp){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",nS(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,A]of Object.entries({}))d[b]=A}if(e instanceof Wl){const b=e.getScopes().filter(A=>A!=="");b.length>0&&(d.scopes=b.join(","))}s.tenantId&&(d.tid=s.tenantId);const m=d;for(const b of Object.keys(m))m[b]===void 0&&delete m[b];const g=await s._getAppCheckToken(),y=g?`#${eR}=${encodeURIComponent(g)}`:"";return`${tR(s)}?${Xl(m).slice(1)}${y}`}function tR({config:s}){return s.emulator?dp(s,W2):`https://${s.authDomain}/${Z2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm="webStorageSupport";class nR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ob,this._completeRedirectFn=x2,this._overrideRedirectResult=w2}async _openPopup(e,n,r,o){var u;ls((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const d=await h0(e,n,r,km(),o);return X2(e,d,_p())}async _openRedirect(e,n,r,o){await this._originValidation(e);const u=await h0(e,n,r,km(),o);return r2(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(ls(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await F2(e),r=new C2(e);return n.register("authEvent",o=>(Ee(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(vm,{type:vm},o=>{var u;const d=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[vm];d!==void 0&&n(!!d),Ti(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=M2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ZE()||KE()||pp()}}const iR=nR;var d0="@firebase/auth",f0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function aR(s){cr(new as("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=r.options;Ee(d&&!d.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:d,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:WE(s)},y=new Ux(r,o,u,g);return Hx(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),cr(new as("auth-internal",e=>{const n=Ih(e.getProvider("auth").getImmediate());return(r=>new sR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Kn(d0,f0,rR(s)),Kn(d0,f0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=300,lR=IE("authIdTokenMaxAge")||oR;let m0=null;const uR=s=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>lR)return;const o=n==null?void 0:n.token;m0!==o&&(m0=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function cR(s=Nh()){const e=Jl(s,"auth");if(e.isInitialized())return e.getImmediate();const n=qx(s,{popupRedirectResolver:iR,persistence:[m2,rb,ob]}),r=IE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const d=uR(u.toString());Wx(n,d,()=>d(n.currentUser)),Zx(n,m=>d(m))}}const o=CE("auth");return o&&Fx(n,`http://${o}`),n}function hR(){var s,e;return(e=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&e!==void 0?e:document}Px({loadJS(s){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=o=>{const u=ti("internal-error");u.customData=o,n(u)},r.type="text/javascript",r.charset="UTF-8",hR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});aR("Browser");var p0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wr,pb;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,S){function C(){}C.prototype=S.prototype,R.D=S.prototype,R.prototype=new C,R.prototype.constructor=R,R.C=function(O,k,V){for(var N=Array(arguments.length-2),Rt=2;Rt<arguments.length;Rt++)N[Rt-2]=arguments[Rt];return S.prototype[k].apply(O,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,S,C){C||(C=0);var O=Array(16);if(typeof S=="string")for(var k=0;16>k;++k)O[k]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(k=0;16>k;++k)O[k]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=R.g[0],C=R.g[1],k=R.g[2];var V=R.g[3],N=S+(V^C&(k^V))+O[0]+3614090360&4294967295;S=C+(N<<7&4294967295|N>>>25),N=V+(k^S&(C^k))+O[1]+3905402710&4294967295,V=S+(N<<12&4294967295|N>>>20),N=k+(C^V&(S^C))+O[2]+606105819&4294967295,k=V+(N<<17&4294967295|N>>>15),N=C+(S^k&(V^S))+O[3]+3250441966&4294967295,C=k+(N<<22&4294967295|N>>>10),N=S+(V^C&(k^V))+O[4]+4118548399&4294967295,S=C+(N<<7&4294967295|N>>>25),N=V+(k^S&(C^k))+O[5]+1200080426&4294967295,V=S+(N<<12&4294967295|N>>>20),N=k+(C^V&(S^C))+O[6]+2821735955&4294967295,k=V+(N<<17&4294967295|N>>>15),N=C+(S^k&(V^S))+O[7]+4249261313&4294967295,C=k+(N<<22&4294967295|N>>>10),N=S+(V^C&(k^V))+O[8]+1770035416&4294967295,S=C+(N<<7&4294967295|N>>>25),N=V+(k^S&(C^k))+O[9]+2336552879&4294967295,V=S+(N<<12&4294967295|N>>>20),N=k+(C^V&(S^C))+O[10]+4294925233&4294967295,k=V+(N<<17&4294967295|N>>>15),N=C+(S^k&(V^S))+O[11]+2304563134&4294967295,C=k+(N<<22&4294967295|N>>>10),N=S+(V^C&(k^V))+O[12]+1804603682&4294967295,S=C+(N<<7&4294967295|N>>>25),N=V+(k^S&(C^k))+O[13]+4254626195&4294967295,V=S+(N<<12&4294967295|N>>>20),N=k+(C^V&(S^C))+O[14]+2792965006&4294967295,k=V+(N<<17&4294967295|N>>>15),N=C+(S^k&(V^S))+O[15]+1236535329&4294967295,C=k+(N<<22&4294967295|N>>>10),N=S+(k^V&(C^k))+O[1]+4129170786&4294967295,S=C+(N<<5&4294967295|N>>>27),N=V+(C^k&(S^C))+O[6]+3225465664&4294967295,V=S+(N<<9&4294967295|N>>>23),N=k+(S^C&(V^S))+O[11]+643717713&4294967295,k=V+(N<<14&4294967295|N>>>18),N=C+(V^S&(k^V))+O[0]+3921069994&4294967295,C=k+(N<<20&4294967295|N>>>12),N=S+(k^V&(C^k))+O[5]+3593408605&4294967295,S=C+(N<<5&4294967295|N>>>27),N=V+(C^k&(S^C))+O[10]+38016083&4294967295,V=S+(N<<9&4294967295|N>>>23),N=k+(S^C&(V^S))+O[15]+3634488961&4294967295,k=V+(N<<14&4294967295|N>>>18),N=C+(V^S&(k^V))+O[4]+3889429448&4294967295,C=k+(N<<20&4294967295|N>>>12),N=S+(k^V&(C^k))+O[9]+568446438&4294967295,S=C+(N<<5&4294967295|N>>>27),N=V+(C^k&(S^C))+O[14]+3275163606&4294967295,V=S+(N<<9&4294967295|N>>>23),N=k+(S^C&(V^S))+O[3]+4107603335&4294967295,k=V+(N<<14&4294967295|N>>>18),N=C+(V^S&(k^V))+O[8]+1163531501&4294967295,C=k+(N<<20&4294967295|N>>>12),N=S+(k^V&(C^k))+O[13]+2850285829&4294967295,S=C+(N<<5&4294967295|N>>>27),N=V+(C^k&(S^C))+O[2]+4243563512&4294967295,V=S+(N<<9&4294967295|N>>>23),N=k+(S^C&(V^S))+O[7]+1735328473&4294967295,k=V+(N<<14&4294967295|N>>>18),N=C+(V^S&(k^V))+O[12]+2368359562&4294967295,C=k+(N<<20&4294967295|N>>>12),N=S+(C^k^V)+O[5]+4294588738&4294967295,S=C+(N<<4&4294967295|N>>>28),N=V+(S^C^k)+O[8]+2272392833&4294967295,V=S+(N<<11&4294967295|N>>>21),N=k+(V^S^C)+O[11]+1839030562&4294967295,k=V+(N<<16&4294967295|N>>>16),N=C+(k^V^S)+O[14]+4259657740&4294967295,C=k+(N<<23&4294967295|N>>>9),N=S+(C^k^V)+O[1]+2763975236&4294967295,S=C+(N<<4&4294967295|N>>>28),N=V+(S^C^k)+O[4]+1272893353&4294967295,V=S+(N<<11&4294967295|N>>>21),N=k+(V^S^C)+O[7]+4139469664&4294967295,k=V+(N<<16&4294967295|N>>>16),N=C+(k^V^S)+O[10]+3200236656&4294967295,C=k+(N<<23&4294967295|N>>>9),N=S+(C^k^V)+O[13]+681279174&4294967295,S=C+(N<<4&4294967295|N>>>28),N=V+(S^C^k)+O[0]+3936430074&4294967295,V=S+(N<<11&4294967295|N>>>21),N=k+(V^S^C)+O[3]+3572445317&4294967295,k=V+(N<<16&4294967295|N>>>16),N=C+(k^V^S)+O[6]+76029189&4294967295,C=k+(N<<23&4294967295|N>>>9),N=S+(C^k^V)+O[9]+3654602809&4294967295,S=C+(N<<4&4294967295|N>>>28),N=V+(S^C^k)+O[12]+3873151461&4294967295,V=S+(N<<11&4294967295|N>>>21),N=k+(V^S^C)+O[15]+530742520&4294967295,k=V+(N<<16&4294967295|N>>>16),N=C+(k^V^S)+O[2]+3299628645&4294967295,C=k+(N<<23&4294967295|N>>>9),N=S+(k^(C|~V))+O[0]+4096336452&4294967295,S=C+(N<<6&4294967295|N>>>26),N=V+(C^(S|~k))+O[7]+1126891415&4294967295,V=S+(N<<10&4294967295|N>>>22),N=k+(S^(V|~C))+O[14]+2878612391&4294967295,k=V+(N<<15&4294967295|N>>>17),N=C+(V^(k|~S))+O[5]+4237533241&4294967295,C=k+(N<<21&4294967295|N>>>11),N=S+(k^(C|~V))+O[12]+1700485571&4294967295,S=C+(N<<6&4294967295|N>>>26),N=V+(C^(S|~k))+O[3]+2399980690&4294967295,V=S+(N<<10&4294967295|N>>>22),N=k+(S^(V|~C))+O[10]+4293915773&4294967295,k=V+(N<<15&4294967295|N>>>17),N=C+(V^(k|~S))+O[1]+2240044497&4294967295,C=k+(N<<21&4294967295|N>>>11),N=S+(k^(C|~V))+O[8]+1873313359&4294967295,S=C+(N<<6&4294967295|N>>>26),N=V+(C^(S|~k))+O[15]+4264355552&4294967295,V=S+(N<<10&4294967295|N>>>22),N=k+(S^(V|~C))+O[6]+2734768916&4294967295,k=V+(N<<15&4294967295|N>>>17),N=C+(V^(k|~S))+O[13]+1309151649&4294967295,C=k+(N<<21&4294967295|N>>>11),N=S+(k^(C|~V))+O[4]+4149444226&4294967295,S=C+(N<<6&4294967295|N>>>26),N=V+(C^(S|~k))+O[11]+3174756917&4294967295,V=S+(N<<10&4294967295|N>>>22),N=k+(S^(V|~C))+O[2]+718787259&4294967295,k=V+(N<<15&4294967295|N>>>17),N=C+(V^(k|~S))+O[9]+3951481745&4294967295,R.g[0]=R.g[0]+S&4294967295,R.g[1]=R.g[1]+(k+(N<<21&4294967295|N>>>11))&4294967295,R.g[2]=R.g[2]+k&4294967295,R.g[3]=R.g[3]+V&4294967295}r.prototype.u=function(R,S){S===void 0&&(S=R.length);for(var C=S-this.blockSize,O=this.B,k=this.h,V=0;V<S;){if(k==0)for(;V<=C;)o(this,R,V),V+=this.blockSize;if(typeof R=="string"){for(;V<S;)if(O[k++]=R.charCodeAt(V++),k==this.blockSize){o(this,O),k=0;break}}else for(;V<S;)if(O[k++]=R[V++],k==this.blockSize){o(this,O),k=0;break}}this.h=k,this.o+=S},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var S=1;S<R.length-8;++S)R[S]=0;var C=8*this.o;for(S=R.length-8;S<R.length;++S)R[S]=C&255,C/=256;for(this.u(R),R=Array(16),S=C=0;4>S;++S)for(var O=0;32>O;O+=8)R[C++]=this.g[S]>>>O&255;return R};function u(R,S){var C=m;return Object.prototype.hasOwnProperty.call(C,R)?C[R]:C[R]=S(R)}function d(R,S){this.h=S;for(var C=[],O=!0,k=R.length-1;0<=k;k--){var V=R[k]|0;O&&V==S||(C[k]=V,O=!1)}this.g=C}var m={};function g(R){return-128<=R&&128>R?u(R,function(S){return new d([S|0],0>S?-1:0)}):new d([R|0],0>R?-1:0)}function y(R){if(isNaN(R)||!isFinite(R))return A;if(0>R)return F(y(-R));for(var S=[],C=1,O=0;R>=C;O++)S[O]=R/C|0,C*=4294967296;return new d(S,0)}function b(R,S){if(R.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(R.charAt(0)=="-")return F(b(R.substring(1),S));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=y(Math.pow(S,8)),O=A,k=0;k<R.length;k+=8){var V=Math.min(8,R.length-k),N=parseInt(R.substring(k,k+V),S);8>V?(V=y(Math.pow(S,V)),O=O.j(V).add(y(N))):(O=O.j(C),O=O.add(y(N)))}return O}var A=g(0),x=g(1),j=g(16777216);s=d.prototype,s.m=function(){if(G(this))return-F(this).m();for(var R=0,S=1,C=0;C<this.g.length;C++){var O=this.i(C);R+=(0<=O?O:4294967296+O)*S,S*=4294967296}return R},s.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(K(this))return"0";if(G(this))return"-"+F(this).toString(R);for(var S=y(Math.pow(R,6)),C=this,O="";;){var k=ee(C,S).g;C=se(C,k.j(S));var V=((0<C.g.length?C.g[0]:C.h)>>>0).toString(R);if(C=k,K(C))return V+O;for(;6>V.length;)V="0"+V;O=V+O}},s.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function K(R){if(R.h!=0)return!1;for(var S=0;S<R.g.length;S++)if(R.g[S]!=0)return!1;return!0}function G(R){return R.h==-1}s.l=function(R){return R=se(this,R),G(R)?-1:K(R)?0:1};function F(R){for(var S=R.g.length,C=[],O=0;O<S;O++)C[O]=~R.g[O];return new d(C,~R.h).add(x)}s.abs=function(){return G(this)?F(this):this},s.add=function(R){for(var S=Math.max(this.g.length,R.g.length),C=[],O=0,k=0;k<=S;k++){var V=O+(this.i(k)&65535)+(R.i(k)&65535),N=(V>>>16)+(this.i(k)>>>16)+(R.i(k)>>>16);O=N>>>16,V&=65535,N&=65535,C[k]=N<<16|V}return new d(C,C[C.length-1]&-2147483648?-1:0)};function se(R,S){return R.add(F(S))}s.j=function(R){if(K(this)||K(R))return A;if(G(this))return G(R)?F(this).j(F(R)):F(F(this).j(R));if(G(R))return F(this.j(F(R)));if(0>this.l(j)&&0>R.l(j))return y(this.m()*R.m());for(var S=this.g.length+R.g.length,C=[],O=0;O<2*S;O++)C[O]=0;for(O=0;O<this.g.length;O++)for(var k=0;k<R.g.length;k++){var V=this.i(O)>>>16,N=this.i(O)&65535,Rt=R.i(k)>>>16,Ut=R.i(k)&65535;C[2*O+2*k]+=N*Ut,le(C,2*O+2*k),C[2*O+2*k+1]+=V*Ut,le(C,2*O+2*k+1),C[2*O+2*k+1]+=N*Rt,le(C,2*O+2*k+1),C[2*O+2*k+2]+=V*Rt,le(C,2*O+2*k+2)}for(O=0;O<S;O++)C[O]=C[2*O+1]<<16|C[2*O];for(O=S;O<2*S;O++)C[O]=0;return new d(C,0)};function le(R,S){for(;(R[S]&65535)!=R[S];)R[S+1]+=R[S]>>>16,R[S]&=65535,S++}function re(R,S){this.g=R,this.h=S}function ee(R,S){if(K(S))throw Error("division by zero");if(K(R))return new re(A,A);if(G(R))return S=ee(F(R),S),new re(F(S.g),F(S.h));if(G(S))return S=ee(R,F(S)),new re(F(S.g),S.h);if(30<R.g.length){if(G(R)||G(S))throw Error("slowDivide_ only works with positive integers.");for(var C=x,O=S;0>=O.l(R);)C=me(C),O=me(O);var k=ne(C,1),V=ne(O,1);for(O=ne(O,2),C=ne(C,2);!K(O);){var N=V.add(O);0>=N.l(R)&&(k=k.add(C),V=N),O=ne(O,1),C=ne(C,1)}return S=se(R,k.j(S)),new re(k,S)}for(k=A;0<=R.l(S);){for(C=Math.max(1,Math.floor(R.m()/S.m())),O=Math.ceil(Math.log(C)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),V=y(C),N=V.j(S);G(N)||0<N.l(R);)C-=O,V=y(C),N=V.j(S);K(V)&&(V=x),k=k.add(V),R=se(R,N)}return new re(k,R)}s.A=function(R){return ee(this,R).h},s.and=function(R){for(var S=Math.max(this.g.length,R.g.length),C=[],O=0;O<S;O++)C[O]=this.i(O)&R.i(O);return new d(C,this.h&R.h)},s.or=function(R){for(var S=Math.max(this.g.length,R.g.length),C=[],O=0;O<S;O++)C[O]=this.i(O)|R.i(O);return new d(C,this.h|R.h)},s.xor=function(R){for(var S=Math.max(this.g.length,R.g.length),C=[],O=0;O<S;O++)C[O]=this.i(O)^R.i(O);return new d(C,this.h^R.h)};function me(R){for(var S=R.g.length+1,C=[],O=0;O<S;O++)C[O]=R.i(O)<<1|R.i(O-1)>>>31;return new d(C,R.h)}function ne(R,S){var C=S>>5;S%=32;for(var O=R.g.length-C,k=[],V=0;V<O;V++)k[V]=0<S?R.i(V+C)>>>S|R.i(V+C+1)<<32-S:R.i(V+C);return new d(k,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,pb=r,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=b,Wr=d}).apply(typeof p0<"u"?p0:typeof self<"u"?self:typeof window<"u"?window:{});var zc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gb,Il,yb,eh,Um,_b,vb,Eb;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,E){return c==Array.prototype||c==Object.prototype||(c[p]=E.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof zc=="object"&&zc];for(var p=0;p<c.length;++p){var E=c[p];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=n(this);function o(c,p){if(p)e:{var E=r;c=c.split(".");for(var w=0;w<c.length-1;w++){var P=c[w];if(!(P in E))break e;E=E[P]}c=c[c.length-1],w=E[c],p=p(w),p!=w&&p!=null&&e(E,c,{configurable:!0,writable:!0,value:p})}}function u(c,p){c instanceof String&&(c+="");var E=0,w=!1,P={next:function(){if(!w&&E<c.length){var H=E++;return{value:p(H,c[H]),done:!1}}return w=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}o("Array.prototype.values",function(c){return c||function(){return u(this,function(p,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function g(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function y(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function b(c,p,E){return c.call.apply(c.bind,arguments)}function A(c,p,E){if(!c)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,w),c.apply(p,P)}}return function(){return c.apply(p,arguments)}}function x(c,p,E){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?b:A,x.apply(null,arguments)}function j(c,p){var E=Array.prototype.slice.call(arguments,1);return function(){var w=E.slice();return w.push.apply(w,arguments),c.apply(this,w)}}function K(c,p){function E(){}E.prototype=p.prototype,c.aa=p.prototype,c.prototype=new E,c.prototype.constructor=c,c.Qb=function(w,P,H){for(var ae=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)ae[Ge-2]=arguments[Ge];return p.prototype[P].apply(w,ae)}}function G(c){const p=c.length;if(0<p){const E=Array(p);for(let w=0;w<p;w++)E[w]=c[w];return E}return[]}function F(c,p){for(let E=1;E<arguments.length;E++){const w=arguments[E];if(g(w)){const P=c.length||0,H=w.length||0;c.length=P+H;for(let ae=0;ae<H;ae++)c[P+ae]=w[ae]}else c.push(w)}}class se{constructor(p,E){this.i=p,this.j=E,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function le(c){return/^[\s\xa0]*$/.test(c)}function re(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function ee(c){return ee[" "](c),c}ee[" "]=function(){};var me=re().indexOf("Gecko")!=-1&&!(re().toLowerCase().indexOf("webkit")!=-1&&re().indexOf("Edge")==-1)&&!(re().indexOf("Trident")!=-1||re().indexOf("MSIE")!=-1)&&re().indexOf("Edge")==-1;function ne(c,p,E){for(const w in c)p.call(E,c[w],w,c)}function R(c,p){for(const E in c)p.call(void 0,c[E],E,c)}function S(c){const p={};for(const E in c)p[E]=c[E];return p}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(c,p){let E,w;for(let P=1;P<arguments.length;P++){w=arguments[P];for(E in w)c[E]=w[E];for(let H=0;H<C.length;H++)E=C[H],Object.prototype.hasOwnProperty.call(w,E)&&(c[E]=w[E])}}function k(c){var p=1;c=c.split(":");const E=[];for(;0<p&&c.length;)E.push(c.shift()),p--;return c.length&&E.push(c.join(":")),E}function V(c){m.setTimeout(()=>{throw c},0)}function N(){var c=Pe;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class Rt{constructor(){this.h=this.g=null}add(p,E){const w=Ut.get();w.set(p,E),this.h?this.h.next=w:this.g=w,this.h=w}}var Ut=new se(()=>new $,c=>c.reset());class ${constructor(){this.next=this.g=this.h=null}set(p,E){this.h=p,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,ge=!1,Pe=new Rt,Fe=()=>{const c=m.Promise.resolve(void 0);oe=()=>{c.then(M)}};var M=()=>{for(var c;c=N();){try{c.h.call(c.g)}catch(E){V(E)}var p=Ut;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}ge=!1};function Y(){this.s=this.s,this.C=this.C}Y.prototype.s=!1,Y.prototype.ma=function(){this.s||(this.s=!0,this.N())},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var he=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const E=()=>{};m.addEventListener("test",E,p),m.removeEventListener("test",E,p)}catch{}return c})();function ve(c,p){if(ie.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var E=this.type=c.type,w=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(me){e:{try{ee(p.nodeName);var P=!0;break e}catch{}P=!1}P||(p=null)}}else E=="mouseover"?p=c.fromElement:E=="mouseout"&&(p=c.toElement);this.relatedTarget=p,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Re[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ve.aa.h.call(this)}}K(ve,ie);var Re={2:"touch",3:"pen",4:"mouse"};ve.prototype.h=function(){ve.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ke="closure_listenable_"+(1e6*Math.random()|0),Pt=0;function rt(c,p,E,w,P){this.listener=c,this.proxy=null,this.src=p,this.type=E,this.capture=!!w,this.ha=P,this.key=++Pt,this.da=this.fa=!1}function si(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ai(c){this.src=c,this.g={},this.h=0}Ai.prototype.add=function(c,p,E,w,P){var H=c.toString();c=this.g[H],c||(c=this.g[H]=[],this.h++);var ae=ha(c,p,w,P);return-1<ae?(p=c[ae],E||(p.fa=!1)):(p=new rt(p,this.src,H,!!w,P),p.fa=E,c.push(p)),p};function yr(c,p){var E=p.type;if(E in c.g){var w=c.g[E],P=Array.prototype.indexOf.call(w,p,void 0),H;(H=0<=P)&&Array.prototype.splice.call(w,P,1),H&&(si(p),c.g[E].length==0&&(delete c.g[E],c.h--))}}function ha(c,p,E,w){for(var P=0;P<c.length;++P){var H=c[P];if(!H.da&&H.listener==p&&H.capture==!!E&&H.ha==w)return P}return-1}var $n="closure_lm_"+(1e6*Math.random()|0),_r={};function da(c,p,E,w,P){if(Array.isArray(p)){for(var H=0;H<p.length;H++)da(c,p[H],E,w,P);return null}return E=cu(E),c&&c[ke]?c.K(p,E,y(w)?!!w.capture:!1,P):id(c,p,E,!1,w,P)}function id(c,p,E,w,P,H){if(!p)throw Error("Invalid event type");var ae=y(P)?!!P.capture:!!P,Ge=So(c);if(Ge||(c[$n]=Ge=new Ai(c)),E=Ge.add(p,E,w,ae,H),E.proxy)return E;if(w=uu(),E.proxy=w,w.src=c,w.listener=E,c.addEventListener)he||(P=ae),P===void 0&&(P=!1),c.addEventListener(p.toString(),w,P);else if(c.attachEvent)c.attachEvent(ma(p.toString()),w);else if(c.addListener&&c.removeListener)c.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return E}function uu(){function c(E){return p.call(c.src,c.listener,E)}const p=sd;return c}function fa(c,p,E,w,P){if(Array.isArray(p))for(var H=0;H<p.length;H++)fa(c,p[H],E,w,P);else w=y(w)?!!w.capture:!!w,E=cu(E),c&&c[ke]?(c=c.i,p=String(p).toString(),p in c.g&&(H=c.g[p],E=ha(H,E,w,P),-1<E&&(si(H[E]),Array.prototype.splice.call(H,E,1),H.length==0&&(delete c.g[p],c.h--)))):c&&(c=So(c))&&(p=c.g[p.toString()],c=-1,p&&(c=ha(p,E,w,P)),(E=-1<c?p[c]:null)&&vr(E))}function vr(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[ke])yr(p.i,c);else{var E=c.type,w=c.proxy;p.removeEventListener?p.removeEventListener(E,w,c.capture):p.detachEvent?p.detachEvent(ma(E),w):p.addListener&&p.removeListener&&p.removeListener(w),(E=So(p))?(yr(E,c),E.h==0&&(E.src=null,p[$n]=null)):si(c)}}}function ma(c){return c in _r?_r[c]:_r[c]="on"+c}function sd(c,p){if(c.da)c=!0;else{p=new ve(p,this);var E=c.listener,w=c.ha||c.src;c.fa&&vr(c),c=E.call(w,p)}return c}function So(c){return c=c[$n],c instanceof Ai?c:null}var Lt="__closure_events_fn_"+(1e9*Math.random()>>>0);function cu(c){return typeof c=="function"?c:(c[Lt]||(c[Lt]=function(p){return c.handleEvent(p)}),c[Lt])}function Ct(){Y.call(this),this.i=new Ai(this),this.M=this,this.F=null}K(Ct,Y),Ct.prototype[ke]=!0,Ct.prototype.removeEventListener=function(c,p,E,w){fa(this,c,p,E,w)};function Dt(c,p){var E,w=c.F;if(w)for(E=[];w;w=w.F)E.push(w);if(c=c.M,w=p.type||p,typeof p=="string")p=new ie(p,c);else if(p instanceof ie)p.target=p.target||c;else{var P=p;p=new ie(w,c),O(p,P)}if(P=!0,E)for(var H=E.length-1;0<=H;H--){var ae=p.g=E[H];P=Si(ae,w,!0,p)&&P}if(ae=p.g=c,P=Si(ae,w,!0,p)&&P,P=Si(ae,w,!1,p)&&P,E)for(H=0;H<E.length;H++)ae=p.g=E[H],P=Si(ae,w,!1,p)&&P}Ct.prototype.N=function(){if(Ct.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var E=c.g[p],w=0;w<E.length;w++)si(E[w]);delete c.g[p],c.h--}}this.F=null},Ct.prototype.K=function(c,p,E,w){return this.i.add(String(c),p,!1,E,w)},Ct.prototype.L=function(c,p,E,w){return this.i.add(String(c),p,!0,E,w)};function Si(c,p,E,w){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var P=!0,H=0;H<p.length;++H){var ae=p[H];if(ae&&!ae.da&&ae.capture==E){var Ge=ae.listener,Et=ae.ha||ae.src;ae.fa&&yr(c.i,ae),P=Ge.call(Et,w)!==!1&&P}}return P&&!w.defaultPrevented}function hu(c,p,E){if(typeof c=="function")E&&(c=x(c,E));else if(c&&typeof c.handleEvent=="function")c=x(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:m.setTimeout(c,p||0)}function xo(c){c.g=hu(()=>{c.g=null,c.i&&(c.i=!1,xo(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class rd extends Y{constructor(p,E){super(),this.m=p,this.l=E,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:xo(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Er(c){Y.call(this),this.h=c,this.g={}}K(Er,Y);var ds=[];function Xt(c){ne(c.g,function(p,E){this.g.hasOwnProperty(E)&&vr(p)},c),c.g={}}Er.prototype.N=function(){Er.aa.N.call(this),Xt(this)},Er.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kn=m.JSON.stringify,rn=m.JSON.parse,ad=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function Ro(){}Ro.prototype.h=null;function du(c){return c.h||(c.h=c.i())}function br(){}var ri={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fs(){ie.call(this,"d")}K(fs,ie);function Yn(){ie.call(this,"c")}K(Yn,ie);var Vn={},ms=null;function pa(){return ms=ms||new Ct}Vn.La="serverreachability";function Co(c){ie.call(this,Vn.La,c)}K(Co,ie);function xi(c){const p=pa();Dt(p,new Co(p))}Vn.STAT_EVENT="statevent";function ps(c,p){ie.call(this,Vn.STAT_EVENT,c),this.stat=p}K(ps,ie);function zt(c){const p=pa();Dt(p,new ps(p,c))}Vn.Ma="timingevent";function No(c,p){ie.call(this,Vn.Ma,c),this.size=p}K(No,ie);function gs(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},p)}function ys(){this.g=!0}ys.prototype.xa=function(){this.g=!1};function Io(c,p,E,w,P,H){c.info(function(){if(c.g)if(H)for(var ae="",Ge=H.split("&"),Et=0;Et<Ge.length;Et++){var Ce=Ge[Et].split("=");if(1<Ce.length){var Mt=Ce[0];Ce=Ce[1];var kt=Mt.split("_");ae=2<=kt.length&&kt[1]=="type"?ae+(Mt+"="+Ce+"&"):ae+(Mt+"=redacted&")}}else ae=null;else ae=H;return"XMLHTTP REQ ("+w+") [attempt "+P+"]: "+p+`
`+E+`
`+ae})}function Do(c,p,E,w,P,H,ae){c.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+P+"]: "+p+`
`+E+`
`+H+" "+ae})}function Ri(c,p,E,w){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+ai(c,E)+(w?" "+w:"")})}function fu(c,p){c.info(function(){return"TIMEOUT: "+p})}ys.prototype.info=function(){};function ai(c,p){if(!c.g)return p;if(!p)return null;try{var E=JSON.parse(p);if(E){for(c=0;c<E.length;c++)if(Array.isArray(E[c])){var w=E[c];if(!(2>w.length)){var P=w[1];if(Array.isArray(P)&&!(1>P.length)){var H=P[0];if(H!="noop"&&H!="stop"&&H!="close")for(var ae=1;ae<P.length;ae++)P[ae]=""}}}}return kn(E)}catch{return p}}var lt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Bt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},oi;function _s(){}K(_s,Ro),_s.prototype.g=function(){return new XMLHttpRequest},_s.prototype.i=function(){return{}},oi=new _s;function li(c,p,E,w){this.j=c,this.i=p,this.l=E,this.R=w||1,this.U=new Er(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new mu}function mu(){this.i=null,this.g="",this.h=!1}var Oo={},Ci={};function Tr(c,p,E){c.L=1,c.v=Sr(ut(p)),c.m=E,c.P=!0,Ni(c,null)}function Ni(c,p){c.F=Date.now(),Xn(c),c.A=ut(c.v);var E=c.A,w=c.R;Array.isArray(w)||(w=[String(w)]),Oi(E.i,"t",w),c.C=0,E=c.j.J,c.h=new mu,c.g=Iu(c.j,E?p:null,!c.m),0<c.O&&(c.M=new rd(x(c.Y,c,c.g),c.O)),p=c.U,E=c.g,w=c.ca;var P="readystatechange";Array.isArray(P)||(P&&(ds[0]=P.toString()),P=ds);for(var H=0;H<P.length;H++){var ae=da(E,P[H],w||p.handleEvent,!1,p.h||p);if(!ae)break;p.g[ae.key]=ae}p=c.H?S(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),xi(),Io(c.i,c.u,c.A,c.l,c.R,c.m)}li.prototype.ca=function(c){c=c.target;const p=this.M;p&&ln(c)==3?p.j():this.Y(c)},li.prototype.Y=function(c){try{if(c==this.g)e:{const kt=ln(this.g);var p=this.g.Ba();const Ds=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||Cr(this.g)))){this.J||kt!=4||p==7||(p==8||0>=Ds?xi(3):xi(2)),ga(this);var E=this.g.Z();this.X=E;t:if(Ii(this)){var w=Cr(this.g);c="";var P=w.length,H=ln(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){an(this),vs(this);var ae="";break t}this.h.i=new m.TextDecoder}for(p=0;p<P;p++)this.h.h=!0,c+=this.h.i.decode(w[p],{stream:!(H&&p==P-1)});w.length=0,this.h.g+=c,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=E==200,Do(this.i,this.u,this.A,this.l,this.R,kt,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Ge,Et=this.g;if((Ge=Et.g?Et.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!le(Ge)){var Ce=Ge;break t}}Ce=null}if(E=Ce)Ri(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ui(this,E);else{this.o=!1,this.s=3,zt(12),an(this),vs(this);break e}}if(this.P){E=!0;let fn;for(;!this.J&&this.C<ae.length;)if(fn=wr(this,ae),fn==Ci){kt==4&&(this.s=4,zt(14),E=!1),Ri(this.i,this.l,null,"[Incomplete Response]");break}else if(fn==Oo){this.s=4,zt(15),Ri(this.i,this.l,ae,"[Invalid Chunk]"),E=!1;break}else Ri(this.i,this.l,fn,null),ui(this,fn);if(Ii(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||ae.length!=0||this.h.h||(this.s=1,zt(16),E=!1),this.o=this.o&&E,!E)Ri(this.i,this.l,ae,"[Invalid Chunked Response]"),an(this),vs(this);else if(0<ae.length&&!this.W){this.W=!0;var Mt=this.j;Mt.g==this&&Mt.ba&&!Mt.M&&(Mt.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),Ho(Mt),Mt.M=!0,zt(11))}}else Ri(this.i,this.l,ae,null),ui(this,ae);kt==4&&an(this),this.o&&!this.J&&(kt==4?Ru(this.j,this):(this.o=!1,Xn(this)))}else bu(this.g),E==400&&0<ae.indexOf("Unknown SID")?(this.s=3,zt(12)):(this.s=0,zt(13)),an(this),vs(this)}}}catch{}finally{}};function Ii(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function wr(c,p){var E=c.C,w=p.indexOf(`
`,E);return w==-1?Ci:(E=Number(p.substring(E,w)),isNaN(E)?Oo:(w+=1,w+E>p.length?Ci:(p=p.slice(w,w+E),c.C=w+E,p)))}li.prototype.cancel=function(){this.J=!0,an(this)};function Xn(c){c.S=Date.now()+c.I,mt(c,c.I)}function mt(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=gs(x(c.ba,c),p)}function ga(c){c.B&&(m.clearTimeout(c.B),c.B=null)}li.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(fu(this.i,this.A),this.L!=2&&(xi(),zt(17)),an(this),this.s=2,vs(this)):mt(this,this.S-c)};function vs(c){c.j.G==0||c.J||Ru(c.j,c)}function an(c){ga(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,Xt(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function ui(c,p){try{var E=c.j;if(E.G!=0&&(E.g==c||Es(E.h,c))){if(!c.K&&Es(E.h,c)&&E.G==3){try{var w=E.Da.g.parse(p)}catch{w=null}if(Array.isArray(w)&&w.length==3){var P=w;if(P[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<c.F)Ns(E),Cs(E);else break e;qo(E),zt(18)}}else E.za=P[1],0<E.za-E.T&&37500>P[2]&&E.F&&E.v==0&&!E.C&&(E.C=gs(x(E.Za,E),6e3));if(1>=pu(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else ki(E,11)}else if((c.K||E.g==c)&&Ns(E),!le(p))for(P=E.Da.g.parse(p),p=0;p<P.length;p++){let Ce=P[p];if(E.T=Ce[0],Ce=Ce[1],E.G==2)if(Ce[0]=="c"){E.K=Ce[1],E.ia=Ce[2];const Mt=Ce[3];Mt!=null&&(E.la=Mt,E.j.info("VER="+E.la));const kt=Ce[4];kt!=null&&(E.Aa=kt,E.j.info("SVER="+E.Aa));const Ds=Ce[5];Ds!=null&&typeof Ds=="number"&&0<Ds&&(w=1.5*Ds,E.L=w,E.j.info("backChannelRequestTimeoutMs_="+w)),w=E;const fn=c.g;if(fn){const Dr=fn.g?fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Dr){var H=w.h;H.g||Dr.indexOf("spdy")==-1&&Dr.indexOf("quic")==-1&&Dr.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(bs(H,H.h),H.h=null))}if(w.D){const Vi=fn.g?fn.g.getResponseHeader("X-HTTP-Session-Id"):null;Vi&&(w.ya=Vi,Le(w.I,w.D,Vi))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-c.F,E.j.info("Handshake RTT: "+E.R+"ms")),w=E;var ae=c;if(w.qa=Nu(w,w.J?w.ia:null,w.W),ae.K){jn(w.h,ae);var Ge=ae,Et=w.L;Et&&(Ge.I=Et),Ge.B&&(ga(Ge),Xn(Ge)),w.g=ae}else Su(w);0<E.i.length&&Aa(E)}else Ce[0]!="stop"&&Ce[0]!="close"||ki(E,7);else E.G==3&&(Ce[0]=="stop"||Ce[0]=="close"?Ce[0]=="stop"?ki(E,7):zo(E):Ce[0]!="noop"&&E.l&&E.l.ta(Ce),E.v=0)}}xi(4)}catch{}}var od=class{constructor(c,p){this.g=c,this.map=p}};function Mo(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ko(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function pu(c){return c.h?1:c.g?c.g.size:0}function Es(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function bs(c,p){c.g?c.g.add(p):c.h=p}function jn(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}Mo.prototype.cancel=function(){if(this.i=on(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function on(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const E of c.g.values())p=p.concat(E.D);return p}return G(c.i)}function gu(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(g(c)){for(var p=[],E=c.length,w=0;w<E;w++)p.push(c[w]);return p}p=[],E=0;for(w in c)p[E++]=c[w];return p}function ld(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(g(c)||typeof c=="string"){var p=[];c=c.length;for(var E=0;E<c;E++)p.push(E);return p}p=[],E=0;for(const w in c)p[E++]=w;return p}}}function ya(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(g(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var E=ld(c),w=gu(c),P=w.length,H=0;H<P;H++)p.call(void 0,w[H],E&&E[H],c)}var Vo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _a(c,p){if(c){c=c.split("&");for(var E=0;E<c.length;E++){var w=c[E].indexOf("="),P=null;if(0<=w){var H=c[E].substring(0,w);P=c[E].substring(w+1)}else H=c[E];p(H,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function Di(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Di){this.h=c.h,Ts(this,c.j),this.o=c.o,this.g=c.g,Ar(this,c.s),this.l=c.l;var p=c.i,E=new ci;E.i=p.i,p.g&&(E.g=new Map(p.g),E.h=p.h),va(this,E),this.m=c.m}else c&&(p=String(c).match(Vo))?(this.h=!1,Ts(this,p[1]||"",!0),this.o=ws(p[2]||""),this.g=ws(p[3]||"",!0),Ar(this,p[4]),this.l=ws(p[5]||"",!0),va(this,p[6]||"",!0),this.m=ws(p[7]||"")):(this.h=!1,this.i=new ci(null,this.h))}Di.prototype.toString=function(){var c=[],p=this.j;p&&c.push(Un(p,jo,!0),":");var E=this.g;return(E||p=="file")&&(c.push("//"),(p=this.o)&&c.push(Un(p,jo,!0),"@"),c.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&c.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&c.push("/"),c.push(Un(E,E.charAt(0)=="/"?Uo:yu,!0))),(E=this.i.toString())&&c.push("?",E),(E=this.m)&&c.push("#",Un(E,hd)),c.join("")};function ut(c){return new Di(c)}function Ts(c,p,E){c.j=E?ws(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function Ar(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function va(c,p,E){p instanceof ci?(c.i=p,_u(c.i,c.h)):(E||(p=Un(p,cd)),c.i=new ci(p,c.h))}function Le(c,p,E){c.i.set(p,E)}function Sr(c){return Le(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function ws(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Un(c,p,E){return typeof c=="string"?(c=encodeURI(c).replace(p,ud),E&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function ud(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var jo=/[#\/\?@]/g,yu=/[#\?:]/g,Uo=/[#\?]/g,cd=/[#\?@]/g,hd=/#/g;function ci(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function Ot(c){c.g||(c.g=new Map,c.h=0,c.i&&_a(c.i,function(p,E){c.add(decodeURIComponent(p.replace(/\+/g," ")),E)}))}s=ci.prototype,s.add=function(c,p){Ot(this),this.i=null,c=bn(this,c);var E=this.g.get(c);return E||this.g.set(c,E=[]),E.push(p),this.h+=1,this};function Ea(c,p){Ot(c),p=bn(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function ba(c,p){return Ot(c),p=bn(c,p),c.g.has(p)}s.forEach=function(c,p){Ot(this),this.g.forEach(function(E,w){E.forEach(function(P){c.call(p,P,w,this)},this)},this)},s.na=function(){Ot(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),E=[];for(let w=0;w<p.length;w++){const P=c[w];for(let H=0;H<P.length;H++)E.push(p[w])}return E},s.V=function(c){Ot(this);let p=[];if(typeof c=="string")ba(this,c)&&(p=p.concat(this.g.get(bn(this,c))));else{c=Array.from(this.g.values());for(let E=0;E<c.length;E++)p=p.concat(c[E])}return p},s.set=function(c,p){return Ot(this),this.i=null,c=bn(this,c),ba(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},s.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function Oi(c,p,E){Ea(c,p),0<E.length&&(c.i=null,c.g.set(bn(c,p),G(E)),c.h+=E.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var E=0;E<p.length;E++){var w=p[E];const H=encodeURIComponent(String(w)),ae=this.V(w);for(w=0;w<ae.length;w++){var P=H;ae[w]!==""&&(P+="="+encodeURIComponent(String(ae[w]))),c.push(P)}}return this.i=c.join("&")};function bn(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function _u(c,p){p&&!c.j&&(Ot(c),c.i=null,c.g.forEach(function(E,w){var P=w.toLowerCase();w!=P&&(Ea(this,w),Oi(this,P,E))},c)),c.j=p}function Po(c,p){const E=new ys;if(m.Image){const w=new Image;w.onload=j(dn,E,"TestLoadImage: loaded",!0,p,w),w.onerror=j(dn,E,"TestLoadImage: error",!1,p,w),w.onabort=j(dn,E,"TestLoadImage: abort",!1,p,w),w.ontimeout=j(dn,E,"TestLoadImage: timeout",!1,p,w),m.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=c}else p(!1)}function vu(c,p){const E=new ys,w=new AbortController,P=setTimeout(()=>{w.abort(),dn(E,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:w.signal}).then(H=>{clearTimeout(P),H.ok?dn(E,"TestPingServer: ok",!0,p):dn(E,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(P),dn(E,"TestPingServer: error",!1,p)})}function dn(c,p,E,w,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),w(E)}catch{}}function Jn(){this.g=new ad}function Lo(c,p,E){const w=E||"";try{ya(c,function(P,H){let ae=P;y(P)&&(ae=kn(P)),p.push(w+H+"="+encodeURIComponent(ae))})}catch(P){throw p.push(w+"type="+encodeURIComponent("_badmap")),P}}function hi(c){this.l=c.Ub||null,this.j=c.eb||!1}K(hi,Ro),hi.prototype.g=function(){return new Tn(this.l,this.j)},hi.prototype.i=(function(c){return function(){return c}})({});function Tn(c,p){Ct.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}K(Tn,Ct),s=Tn.prototype,s.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,As(this)},s.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||m).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,di(this)),this.readyState=0},s.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,As(this)),this.g&&(this.readyState=3,As(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ta(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ta(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}s.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?di(this):As(this),this.readyState==3&&Ta(this)}},s.Ra=function(c){this.g&&(this.response=this.responseText=c,di(this))},s.Qa=function(c){this.g&&(this.response=c,di(this))},s.ga=function(){this.g&&di(this)};function di(c){c.readyState=4,c.l=null,c.j=null,c.v=null,As(c)}s.setRequestHeader=function(c,p){this.u.append(c,p)},s.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var E=p.next();!E.done;)E=E.value,c.push(E[0]+": "+E[1]),E=p.next();return c.join(`\r
`)};function As(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Tn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function xr(c){let p="";return ne(c,function(E,w){p+=w,p+=":",p+=E,p+=`\r
`}),p}function Ss(c,p,E){e:{for(w in E){var w=!1;break e}w=!0}w||(E=xr(E),typeof c=="string"?E!=null&&encodeURIComponent(String(E)):Le(c,p,E))}function et(c){Ct.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}K(et,Ct);var Jt=/^https?$/i,Mi=["POST","PUT"];s=et.prototype,s.Ha=function(c){this.J=c},s.ea=function(c,p,E,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():oi.g(),this.v=this.o?du(this.o):du(oi),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(H){Rr(this,H);return}if(c=E||"",E=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var P in w)E.set(P,w[P]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const H of w.keys())E.set(H,w.get(H));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(E.keys()).find(H=>H.toLowerCase()=="content-type"),P=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Mi,p,void 0))||w||P||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,ae]of E)this.g.setRequestHeader(H,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{wa(this),this.u=!0,this.g.send(c),this.u=!1}catch(H){Rr(this,H)}};function Rr(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,xs(c),Rs(c)}function xs(c){c.A||(c.A=!0,Dt(c,"complete"),Dt(c,"error"))}s.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Dt(this,"complete"),Dt(this,"abort"),Rs(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Rs(this,!0)),et.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Eu(this):this.bb())},s.bb=function(){Eu(this)};function Eu(c){if(c.h&&typeof d<"u"&&(!c.v[1]||ln(c)!=4||c.Z()!=2)){if(c.u&&ln(c)==4)hu(c.Ea,0,c);else if(Dt(c,"readystatechange"),ln(c)==4){c.h=!1;try{const ae=c.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var E;if(!(E=p)){var w;if(w=ae===0){var P=String(c.D).match(Vo)[1]||null;!P&&m.self&&m.self.location&&(P=m.self.location.protocol.slice(0,-1)),w=!Jt.test(P?P.toLowerCase():"")}E=w}if(E)Dt(c,"complete"),Dt(c,"success");else{c.m=6;try{var H=2<ln(c)?c.g.statusText:""}catch{H=""}c.l=H+" ["+c.Z()+"]",xs(c)}}finally{Rs(c)}}}}function Rs(c,p){if(c.g){wa(c);const E=c.g,w=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||Dt(c,"ready");try{E.onreadystatechange=w}catch{}}}function wa(c){c.I&&(m.clearTimeout(c.I),c.I=null)}s.isActive=function(){return!!this.g};function ln(c){return c.g?c.g.readyState:0}s.Z=function(){try{return 2<ln(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),rn(p)}};function Cr(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function bu(c){const p={};c=(c.g&&2<=ln(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<c.length;w++){if(le(c[w]))continue;var E=k(c[w]);const P=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const H=p[P]||[];p[P]=H,H.push(E)}R(p,function(w){return w.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Nr(c,p,E){return E&&E.internalChannelParams&&E.internalChannelParams[c]||p}function Tu(c){this.Aa=0,this.i=[],this.j=new ys,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Nr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Nr("baseRetryDelayMs",5e3,c),this.cb=Nr("retryDelaySeedMs",1e4,c),this.Wa=Nr("forwardChannelMaxRetries",2,c),this.wa=Nr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Mo(c&&c.concurrentRequestLimit),this.Da=new Jn,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=Tu.prototype,s.la=8,s.G=1,s.connect=function(c,p,E,w){zt(0),this.W=c,this.H=p||{},E&&w!==void 0&&(this.H.OSID=E,this.H.OAID=w),this.F=this.X,this.I=Nu(this,null,this.W),Aa(this)};function zo(c){if(wu(c),c.G==3){var p=c.U++,E=ut(c.I);if(Le(E,"SID",c.K),Le(E,"RID",p),Le(E,"TYPE","terminate"),Ir(c,E),p=new li(c,c.j,p),p.L=2,p.v=Sr(ut(E)),E=!1,m.navigator&&m.navigator.sendBeacon)try{E=m.navigator.sendBeacon(p.v.toString(),"")}catch{}!E&&m.Image&&(new Image().src=p.v,E=!0),E||(p.g=Iu(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Xn(p)}Fo(c)}function Cs(c){c.g&&(Ho(c),c.g.cancel(),c.g=null)}function wu(c){Cs(c),c.u&&(m.clearTimeout(c.u),c.u=null),Ns(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function Aa(c){if(!ko(c.h)&&!c.s){c.s=!0;var p=c.Ga;oe||Fe(),ge||(oe(),ge=!0),Pe.add(p,c),c.B=0}}function dd(c,p){return pu(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=gs(x(c.Ga,c,p),Cu(c,c.B)),c.B++,!0)}s.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const P=new li(this,this.j,c);let H=this.o;if(this.S&&(H?(H=S(H),O(H,this.S)):H=this.S),this.m!==null||this.O||(P.H=H,H=null),this.P)e:{for(var p=0,E=0;E<this.i.length;E++){t:{var w=this.i[E];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(p+=w,4096<p){p=E;break e}if(p===4096||E===this.i.length-1){p=E+1;break e}}p=1e3}else p=1e3;p=Bo(this,P,p),E=ut(this.I),Le(E,"RID",c),Le(E,"CVER",22),this.D&&Le(E,"X-HTTP-Session-Id",this.D),Ir(this,E),H&&(this.O?p="headers="+encodeURIComponent(String(xr(H)))+"&"+p:this.m&&Ss(E,this.m,H)),bs(this.h,P),this.Ua&&Le(E,"TYPE","init"),this.P?(Le(E,"$req",p),Le(E,"SID","null"),P.T=!0,Tr(P,E,null)):Tr(P,E,p),this.G=2}}else this.G==3&&(c?Au(this,c):this.i.length==0||ko(this.h)||Au(this))};function Au(c,p){var E;p?E=p.l:E=c.U++;const w=ut(c.I);Le(w,"SID",c.K),Le(w,"RID",E),Le(w,"AID",c.T),Ir(c,w),c.m&&c.o&&Ss(w,c.m,c.o),E=new li(c,c.j,E,c.B+1),c.m===null&&(E.H=c.o),p&&(c.i=p.D.concat(c.i)),p=Bo(c,E,1e3),E.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),bs(c.h,E),Tr(E,w,p)}function Ir(c,p){c.H&&ne(c.H,function(E,w){Le(p,w,E)}),c.l&&ya({},function(E,w){Le(p,w,E)})}function Bo(c,p,E){E=Math.min(c.i.length,E);var w=c.l?x(c.l.Na,c.l,c):null;e:{var P=c.i;let H=-1;for(;;){const ae=["count="+E];H==-1?0<E?(H=P[0].g,ae.push("ofs="+H)):H=0:ae.push("ofs="+H);let Ge=!0;for(let Et=0;Et<E;Et++){let Ce=P[Et].g;const Mt=P[Et].map;if(Ce-=H,0>Ce)H=Math.max(0,P[Et].g-100),Ge=!1;else try{Lo(Mt,ae,"req"+Ce+"_")}catch{w&&w(Mt)}}if(Ge){w=ae.join("&");break e}}}return c=c.i.splice(0,E),p.D=c,w}function Su(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;oe||Fe(),ge||(oe(),ge=!0),Pe.add(p,c),c.v=0}}function qo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=gs(x(c.Fa,c),Cu(c,c.v)),c.v++,!0)}s.Fa=function(){if(this.u=null,xu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=gs(x(this.ab,this),c)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,zt(10),Cs(this),xu(this))};function Ho(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function xu(c){c.g=new li(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=ut(c.qa);Le(p,"RID","rpc"),Le(p,"SID",c.K),Le(p,"AID",c.T),Le(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&Le(p,"TO",c.ja),Le(p,"TYPE","xmlhttp"),Ir(c,p),c.m&&c.o&&Ss(p,c.m,c.o),c.L&&(c.g.I=c.L);var E=c.g;c=c.ia,E.L=1,E.v=Sr(ut(p)),E.m=null,E.P=!0,Ni(E,c)}s.Za=function(){this.C!=null&&(this.C=null,Cs(this),qo(this),zt(19))};function Ns(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function Ru(c,p){var E=null;if(c.g==p){Ns(c),Ho(c),c.g=null;var w=2}else if(Es(c.h,p))E=p.D,jn(c.h,p),w=1;else return;if(c.G!=0){if(p.o)if(w==1){E=p.m?p.m.length:0,p=Date.now()-p.F;var P=c.B;w=pa(),Dt(w,new No(w,E)),Aa(c)}else Su(c);else if(P=p.s,P==3||P==0&&0<p.X||!(w==1&&dd(c,p)||w==2&&qo(c)))switch(E&&0<E.length&&(p=c.h,p.i=p.i.concat(E)),P){case 1:ki(c,5);break;case 4:ki(c,10);break;case 3:ki(c,6);break;default:ki(c,2)}}}function Cu(c,p){let E=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(E*=2),E*p}function ki(c,p){if(c.j.info("Error code "+p),p==2){var E=x(c.fb,c),w=c.Xa;const P=!w;w=new Di(w||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Ts(w,"https"),Sr(w),P?Po(w.toString(),E):vu(w.toString(),E)}else zt(2);c.G=0,c.l&&c.l.sa(p),Fo(c),wu(c)}s.fb=function(c){c?(this.j.info("Successfully pinged google.com"),zt(2)):(this.j.info("Failed to ping google.com"),zt(1))};function Fo(c){if(c.G=0,c.ka=[],c.l){const p=on(c.h);(p.length!=0||c.i.length!=0)&&(F(c.ka,p),F(c.ka,c.i),c.h.i.length=0,G(c.i),c.i.length=0),c.l.ra()}}function Nu(c,p,E){var w=E instanceof Di?ut(E):new Di(E);if(w.g!="")p&&(w.g=p+"."+w.g),Ar(w,w.s);else{var P=m.location;w=P.protocol,p=p?p+"."+P.hostname:P.hostname,P=+P.port;var H=new Di(null);w&&Ts(H,w),p&&(H.g=p),P&&Ar(H,P),E&&(H.l=E),w=H}return E=c.D,p=c.ya,E&&p&&Le(w,E,p),Le(w,"VER",c.la),Ir(c,w),w}function Iu(c,p,E){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new et(new hi({eb:E})):new et(c.pa),p.Ha(c.J),p}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Du(){}s=Du.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Sa(){}Sa.prototype.g=function(c,p){return new un(c,p)};function un(c,p){Ct.call(this),this.g=new Tu(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!le(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!le(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new Is(this)}K(un,Ct),un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){zo(this.g)},un.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var E={};E.__data__=c,c=E}else this.u&&(E={},E.__data__=kn(c),c=E);p.i.push(new od(p.Ya++,c)),p.G==3&&Aa(p)},un.prototype.N=function(){this.g.l=null,delete this.j,zo(this.g),delete this.g,un.aa.N.call(this)};function Ou(c){fs.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){e:{for(const E in p){c=E;break e}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}K(Ou,fs);function Mu(){Yn.call(this),this.status=1}K(Mu,Yn);function Is(c){this.g=c}K(Is,Du),Is.prototype.ua=function(){Dt(this.g,"a")},Is.prototype.ta=function(c){Dt(this.g,new Ou(c))},Is.prototype.sa=function(c){Dt(this.g,new Mu)},Is.prototype.ra=function(){Dt(this.g,"b")},Sa.prototype.createWebChannel=Sa.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,Eb=function(){return new Sa},vb=function(){return pa()},_b=Vn,Um={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},lt.NO_ERROR=0,lt.TIMEOUT=8,lt.HTTP_ERROR=6,eh=lt,Bt.COMPLETE="complete",yb=Bt,br.EventType=ri,ri.OPEN="a",ri.CLOSE="b",ri.ERROR="c",ri.MESSAGE="d",Ct.prototype.listen=Ct.prototype.K,Il=br,et.prototype.listenOnce=et.prototype.L,et.prototype.getLastError=et.prototype.Ka,et.prototype.getLastErrorCode=et.prototype.Ba,et.prototype.getStatus=et.prototype.Z,et.prototype.getResponseJson=et.prototype.Oa,et.prototype.getResponseText=et.prototype.oa,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Ha,gb=et}).apply(typeof zc<"u"?zc:typeof self<"u"?self:typeof window<"u"?window:{});const g0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let en=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};en.UNAUTHENTICATED=new en(null),en.GOOGLE_CREDENTIALS=new en("google-credentials-uid"),en.FIRST_PARTY=new en("first-party-uid"),en.MOCK_USER=new en("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na=new op("@firebase/firestore");function Cl(){return na.logLevel}function de(s,...e){if(na.logLevel<=je.DEBUG){const n=e.map(Ep);na.debug(`Firestore (${bo}): ${s}`,...n)}}function us(s,...e){if(na.logLevel<=je.ERROR){const n=e.map(Ep);na.error(`Firestore (${bo}): ${s}`,...n)}}function ho(s,...e){if(na.logLevel<=je.WARN){const n=e.map(Ep);na.warn(`Firestore (${bo}): ${s}`,...n)}}function Ep(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(s="Unexpected state"){const e=`FIRESTORE (${bo}) INTERNAL ASSERTION FAILED: `+s;throw us(e),new Error(e)}function $e(s,e){s||be()}function Ae(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends ii{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(en.UNAUTHENTICATED)))}shutdown(){}}class fR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class mR{constructor(e){this.t=e,this.currentUser=en.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){$e(this.o===void 0);let r=this.i;const o=g=>this.i!==r?(r=this.i,n(g)):Promise.resolve();let u=new ss;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ss,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ss)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($e(typeof r.accessToken=="string"),new bb(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string"),new en(e)}}class pR{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=en.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class gR{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new pR(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable((()=>n(en.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class yR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _R{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){$e(this.o===void 0);const r=u=>{u.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.R;return this.R=u.token,de("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>r(u)))};const o=u=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?o(u):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?($e(typeof n.token=="string"),this.R=n.token,new yR(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<s;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=vR(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<n&&(r+=e.charAt(o[u]%e.length))}return r}}function qe(s,e){return s<e?-1:s>e?1:0}function fo(s,e,n){return s.length===e.length&&s.every(((r,o)=>n(r,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ue(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ue(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ue(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return at.fromMillis(Date.now())}static fromDate(e){return at.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new at(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.timestamp=e}static fromTimestamp(e){return new we(e)}static min(){return new we(new at(0,0))}static max(){return new we(new at(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,n,r){n===void 0?n=0:n>e.length&&be(),r===void 0?r=e.length-n:r>e.length-n&&be(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Hl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Hl?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const u=e.get(o),d=n.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class it extends Hl{construct(e,n,r){return new it(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ue(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((o=>o.length>0)))}return new it(n)}static emptyPath(){return new it([])}}const ER=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends Hl{construct(e,n,r){return new Qt(e,n,r)}static isValidIdentifier(e){return ER.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Qt(["__name__"])}static fromServerFormat(e){const n=[];let r="",o=0;const u=()=>{if(r.length===0)throw new ue(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new ue(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ue(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(r+=m,o++):(u(),o++)}if(u(),d)throw new ue(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(n)}static emptyPath(){return new Qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(it.fromString(e))}static fromName(e){return new ye(it.fromString(e).popFirst(5))}static empty(){return new ye(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&it.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return it.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new it(e.slice()))}}function bR(s,e){const n=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=we.fromTimestamp(r===1e9?new at(n+1,0):new at(n,r));return new hr(o,ye.empty(),e)}function TR(s){return new hr(s.readTime,s.key,-1)}class hr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new hr(we.min(),ye.empty(),-1)}static max(){return new hr(we.max(),ye.empty(),-1)}}function wR(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=ye.comparator(s.documentKey,e.documentKey),n!==0?n:qe(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class SR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tu(s){if(s.code!==Z.FAILED_PRECONDITION||s.message!==AR)throw s;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&be(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new W(((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(r,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof W?n:W.resolve(n)}catch(n){return W.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):W.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):W.reject(n)}static resolve(e){return new W(((n,r)=>{n(e)}))}static reject(e){return new W(((n,r)=>{r(e)}))}static waitFor(e){return new W(((n,r)=>{let o=0,u=0,d=!1;e.forEach((m=>{++o,m.next((()=>{++u,d&&u===o&&n()}),(g=>r(g)))})),d=!0,u===o&&n()}))}static or(e){let n=W.resolve(!1);for(const r of e)n=n.next((o=>o?W.resolve(o):r()));return n}static forEach(e,n){const r=[];return e.forEach(((o,u)=>{r.push(n.call(this,o,u))})),this.waitFor(r)}static mapArray(e,n){return new W(((r,o)=>{const u=e.length,d=new Array(u);let m=0;for(let g=0;g<u;g++){const y=g;n(e[y]).next((b=>{d[y]=b,++m,m===u&&r(d)}),(b=>o(b)))}}))}static doWhile(e,n){return new W(((r,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):r()};u()}))}}function xR(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function nu(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}bp.oe=-1;function Mh(s){return s==null}function fh(s){return s===0&&1/s==-1/0}function RR(s){return typeof s=="number"&&Number.isInteger(s)&&!fh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function oa(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function wb(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n){this.comparator=e,this.root=n||Kt.EMPTY}insert(e,n){return new ot(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Kt.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bc(this.root,e,this.comparator,!0)}}class Bc{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?r(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Kt{constructor(e,n,r,o,u){this.key=e,this.value=n,this.color=r??Kt.RED,this.left=o??Kt.EMPTY,this.right=u??Kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,u){return new Kt(e??this.key,n??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,r),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Kt.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw be();const e=this.left.check();if(e!==this.right.check())throw be();return e+(this.isRed()?0:1)}}Kt.EMPTY=null,Kt.RED=!0,Kt.BLACK=!1;Kt.EMPTY=new class{constructor(){this.size=0}get key(){throw be()}get value(){throw be()}get color(){throw be()}get left(){throw be()}get right(){throw be()}copy(e,n,r,o,u){return this}insert(e,n,r){return new Kt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new _0(this.data.getIterator())}getIteratorFrom(e){return new _0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof $t)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new $t(this.comparator);return n.data=e,n}}class _0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new On([])}unionWith(e){let n=new $t(Qt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new On(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return fo(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Ab("Invalid base64 string: "+u):u}})(e);return new Yt(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u})(e);return new Yt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yt.EMPTY_BYTE_STRING=new Yt("");const CR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dr(s){if($e(!!s),typeof s=="string"){let e=0;const n=CR.exec(s);if($e(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_t(s.seconds),nanos:_t(s.nanos)}}function _t(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function ia(s){return typeof s=="string"?Yt.fromBase64String(s):Yt.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tp(s){var e,n;return((n=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function wp(s){const e=s.mapValue.fields.__previous_value__;return Tp(e)?wp(e):e}function Fl(s){const e=dr(s.mapValue.fields.__local_write_time__.timestampValue);return new at(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,n,r,o,u,d,m,g,y){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=y}}class Gl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Gl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Gl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qc={mapValue:{}};function sa(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Tp(s)?4:DR(s)?9007199254740991:IR(s)?10:11:be()}function wi(s,e){if(s===e)return!0;const n=sa(s);if(n!==sa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Fl(s).isEqual(Fl(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=dr(o.timestampValue),m=dr(u.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return ia(o.bytesValue).isEqual(ia(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return _t(o.geoPointValue.latitude)===_t(u.geoPointValue.latitude)&&_t(o.geoPointValue.longitude)===_t(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return _t(o.integerValue)===_t(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=_t(o.doubleValue),m=_t(u.doubleValue);return d===m?fh(d)===fh(m):isNaN(d)&&isNaN(m)}return!1})(s,e);case 9:return fo(s.arrayValue.values||[],e.arrayValue.values||[],wi);case 10:case 11:return(function(o,u){const d=o.mapValue.fields||{},m=u.mapValue.fields||{};if(y0(d)!==y0(m))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(m[g]===void 0||!wi(d[g],m[g])))return!1;return!0})(s,e);default:return be()}}function Kl(s,e){return(s.values||[]).find((n=>wi(n,e)))!==void 0}function mo(s,e){if(s===e)return 0;const n=sa(s),r=sa(e);if(n!==r)return qe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return qe(s.booleanValue,e.booleanValue);case 2:return(function(u,d){const m=_t(u.integerValue||u.doubleValue),g=_t(d.integerValue||d.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(s,e);case 3:return v0(s.timestampValue,e.timestampValue);case 4:return v0(Fl(s),Fl(e));case 5:return qe(s.stringValue,e.stringValue);case 6:return(function(u,d){const m=ia(u),g=ia(d);return m.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,d){const m=u.split("/"),g=d.split("/");for(let y=0;y<m.length&&y<g.length;y++){const b=qe(m[y],g[y]);if(b!==0)return b}return qe(m.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,d){const m=qe(_t(u.latitude),_t(d.latitude));return m!==0?m:qe(_t(u.longitude),_t(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return E0(s.arrayValue,e.arrayValue);case 10:return(function(u,d){var m,g,y,b;const A=u.fields||{},x=d.fields||{},j=(m=A.value)===null||m===void 0?void 0:m.arrayValue,K=(g=x.value)===null||g===void 0?void 0:g.arrayValue,G=qe(((y=j==null?void 0:j.values)===null||y===void 0?void 0:y.length)||0,((b=K==null?void 0:K.values)===null||b===void 0?void 0:b.length)||0);return G!==0?G:E0(j,K)})(s.mapValue,e.mapValue);case 11:return(function(u,d){if(u===qc.mapValue&&d===qc.mapValue)return 0;if(u===qc.mapValue)return 1;if(d===qc.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),y=d.fields||{},b=Object.keys(y);g.sort(),b.sort();for(let A=0;A<g.length&&A<b.length;++A){const x=qe(g[A],b[A]);if(x!==0)return x;const j=mo(m[g[A]],y[b[A]]);if(j!==0)return j}return qe(g.length,b.length)})(s.mapValue,e.mapValue);default:throw be()}}function v0(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return qe(s,e);const n=dr(s),r=dr(e),o=qe(n.seconds,r.seconds);return o!==0?o:qe(n.nanos,r.nanos)}function E0(s,e){const n=s.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const u=mo(n[o],r[o]);if(u)return u}return qe(n.length,r.length)}function po(s){return Pm(s)}function Pm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const r=dr(n);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return ia(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return ye.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let r="[",o=!0;for(const u of n.values||[])o?o=!1:r+=",",r+=Pm(u);return r+"]"})(s.arrayValue):"mapValue"in s?(function(n){const r=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const d of r)u?u=!1:o+=",",o+=`${d}:${Pm(n.fields[d])}`;return o+"}"})(s.mapValue):be()}function b0(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Lm(s){return!!s&&"integerValue"in s}function Ap(s){return!!s&&"arrayValue"in s}function T0(s){return!!s&&"nullValue"in s}function w0(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function th(s){return!!s&&"mapValue"in s}function IR(s){var e,n;return((n=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Vl(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return oa(s.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Vl(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Vl(s.arrayValue.values[n]);return e}return Object.assign({},s)}function DR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!th(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vl(n)}setAll(e){let n=Qt.emptyPath(),r={},o=[];e.forEach(((d,m)=>{if(!n.isImmediateParentOf(m)){const g=this.getFieldsMap(n);this.applyChanges(g,r,o),r={},o=[],n=m.popLast()}d?r[m.lastSegment()]=Vl(d):o.push(m.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,r,o)}delete(e){const n=this.field(e.popLast());th(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return wi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];th(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){oa(n,((o,u)=>e[o]=u));for(const o of r)delete e[o]}clone(){return new vn(Vl(this.value))}}function Sb(s){const e=[];return oa(s.fields,((n,r)=>{const o=new Qt([n]);if(th(r)){const u=Sb(r.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)})),new On(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,n,r,o,u,d,m){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=u,this.data=d,this.documentState=m}static newInvalidDocument(e){return new tn(e,0,we.min(),we.min(),we.min(),vn.empty(),0)}static newFoundDocument(e,n,r,o){return new tn(e,1,n,we.min(),r,o,0)}static newNoDocument(e,n){return new tn(e,2,n,we.min(),we.min(),vn.empty(),0)}static newUnknownDocument(e,n){return new tn(e,3,n,we.min(),we.min(),vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,n){this.position=e,this.inclusive=n}}function A0(s,e,n){let r=0;for(let o=0;o<s.position.length;o++){const u=e[o],d=s.position[o];if(u.field.isKeyField()?r=ye.comparator(ye.fromName(d.referenceValue),n.key):r=mo(d,n.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function S0(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!wi(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,n="asc"){this.field=e,this.dir=n}}function OR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{}class xt extends xb{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new kR(e,n,r):n==="array-contains"?new UR(e,r):n==="in"?new PR(e,r):n==="not-in"?new LR(e,r):n==="array-contains-any"?new zR(e,r):new xt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new VR(e,r):new jR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(mo(n,this.value)):n!==null&&sa(this.value)===sa(n)&&this.matchesComparison(mo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ni extends xb{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ni(e,n)}matches(e){return Rb(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Rb(s){return s.op==="and"}function Cb(s){return MR(s)&&Rb(s)}function MR(s){for(const e of s.filters)if(e instanceof ni)return!1;return!0}function zm(s){if(s instanceof xt)return s.field.canonicalString()+s.op.toString()+po(s.value);if(Cb(s))return s.filters.map((e=>zm(e))).join(",");{const e=s.filters.map((n=>zm(n))).join(",");return`${s.op}(${e})`}}function Nb(s,e){return s instanceof xt?(function(r,o){return o instanceof xt&&r.op===o.op&&r.field.isEqual(o.field)&&wi(r.value,o.value)})(s,e):s instanceof ni?(function(r,o){return o instanceof ni&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((u,d,m)=>u&&Nb(d,o.filters[m])),!0):!1})(s,e):void be()}function Ib(s){return s instanceof xt?(function(n){return`${n.field.canonicalString()} ${n.op} ${po(n.value)}`})(s):s instanceof ni?(function(n){return n.op.toString()+" {"+n.getFilters().map(Ib).join(" ,")+"}"})(s):"Filter"}class kR extends xt{constructor(e,n,r){super(e,n,r),this.key=ye.fromName(r.referenceValue)}matches(e){const n=ye.comparator(e.key,this.key);return this.matchesComparison(n)}}class VR extends xt{constructor(e,n){super(e,"in",n),this.keys=Db("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class jR extends xt{constructor(e,n){super(e,"not-in",n),this.keys=Db("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Db(s,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((r=>ye.fromName(r.referenceValue)))}class UR extends xt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ap(n)&&Kl(n.arrayValue,this.value)}}class PR extends xt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Kl(this.value.arrayValue,n)}}class LR extends xt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Kl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Kl(this.value.arrayValue,n)}}class zR extends xt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ap(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Kl(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e,n=null,r=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.ue=null}}function x0(s,e=null,n=[],r=[],o=null,u=null,d=null){return new BR(s,e,n,r,o,u,d)}function Sp(s){const e=Ae(s);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>zm(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),Mh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>po(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>po(r))).join(",")),e.ue=n}return e.ue}function xp(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!OR(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!Nb(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!S0(s.startAt,e.startAt)&&S0(s.endAt,e.endAt)}function Bm(s){return ye.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n=null,r=[],o=[],u=null,d="F",m=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=g,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function qR(s,e,n,r,o,u,d,m){return new iu(s,e,n,r,o,u,d,m)}function kh(s){return new iu(s)}function R0(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Ob(s){return s.collectionGroup!==null}function jl(s){const e=Ae(s);if(e.ce===null){e.ce=[];const n=new Set;for(const u of e.explicitOrderBy)e.ce.push(u),n.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new $t(Qt.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(m=m.add(y.field))}))})),m})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.ce.push(new ph(u,r))})),n.has(Qt.keyField().canonicalString())||e.ce.push(new ph(Qt.keyField(),r))}return e.ce}function Ei(s){const e=Ae(s);return e.le||(e.le=HR(e,jl(s))),e.le}function HR(s,e){if(s.limitType==="F")return x0(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new ph(o.field,u)}));const n=s.endAt?new mh(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new mh(s.startAt.position,s.startAt.inclusive):null;return x0(s.path,s.collectionGroup,e,s.filters,s.limit,n,r)}}function qm(s,e){const n=s.filters.concat([e]);return new iu(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function Hm(s,e,n){return new iu(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Vh(s,e){return xp(Ei(s),Ei(e))&&s.limitType===e.limitType}function Mb(s){return`${Sp(Ei(s))}|lt:${s.limitType}`}function eo(s){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((o=>Ib(o))).join(", ")}]`),Mh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((o=>po(o))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((o=>po(o))).join(",")),`Target(${r})`})(Ei(s))}; limitType=${s.limitType})`}function jh(s,e){return e.isFoundDocument()&&(function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):ye.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(s,e)&&(function(r,o){for(const u of jl(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(r,o){return!(r.startAt&&!(function(d,m,g){const y=A0(d,m,g);return d.inclusive?y<=0:y<0})(r.startAt,jl(r),o)||r.endAt&&!(function(d,m,g){const y=A0(d,m,g);return d.inclusive?y>=0:y>0})(r.endAt,jl(r),o))})(s,e)}function FR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function kb(s){return(e,n)=>{let r=!1;for(const o of jl(s)){const u=GR(o,e,n);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function GR(s,e,n){const r=s.field.isKeyField()?ye.comparator(e.key,n.key):(function(u,d,m){const g=d.data.field(u),y=m.data.field(u);return g!==null&&y!==null?mo(g,y):be()})(s.field,e,n);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return be()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){oa(this.inner,((n,r)=>{for(const[o,u]of r)e(o,u)}))}isEmpty(){return wb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=new ot(ye.comparator);function cs(){return KR}const Vb=new ot(ye.comparator);function Dl(...s){let e=Vb;for(const n of s)e=e.insert(n.key,n);return e}function jb(s){let e=Vb;return s.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Xr(){return Ul()}function Ub(){return Ul()}function Ul(){return new To((s=>s.toString()),((s,e)=>s.isEqual(e)))}const QR=new ot(ye.comparator),$R=new $t(ye.comparator);function Me(...s){let e=$R;for(const n of s)e=e.add(n);return e}const YR=new $t(qe);function XR(){return YR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fh(e)?"-0":e}}function Pb(s){return{integerValue:""+s}}function JR(s,e){return RR(e)?Pb(e):Rp(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(){this._=void 0}}function ZR(s,e,n){return s instanceof gh?(function(o,u){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Tp(u)&&(u=wp(u)),u&&(d.fields.__previous_value__=u),{mapValue:d}})(n,e):s instanceof go?zb(s,e):s instanceof Ql?Bb(s,e):(function(o,u){const d=Lb(o,u),m=C0(d)+C0(o.Pe);return Lm(d)&&Lm(o.Pe)?Pb(m):Rp(o.serializer,m)})(s,e)}function WR(s,e,n){return s instanceof go?zb(s,e):s instanceof Ql?Bb(s,e):n}function Lb(s,e){return s instanceof yh?(function(r){return Lm(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(e)?e:{integerValue:0}:null}class gh extends Uh{}class go extends Uh{constructor(e){super(),this.elements=e}}function zb(s,e){const n=qb(e);for(const r of s.elements)n.some((o=>wi(o,r)))||n.push(r);return{arrayValue:{values:n}}}class Ql extends Uh{constructor(e){super(),this.elements=e}}function Bb(s,e){let n=qb(e);for(const r of s.elements)n=n.filter((o=>!wi(o,r)));return{arrayValue:{values:n}}}class yh extends Uh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function C0(s){return _t(s.integerValue||s.doubleValue)}function qb(s){return Ap(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,n){this.field=e,this.transform=n}}function tC(s,e){return s.field.isEqual(e.field)&&(function(r,o){return r instanceof go&&o instanceof go||r instanceof Ql&&o instanceof Ql?fo(r.elements,o.elements,wi):r instanceof yh&&o instanceof yh?wi(r.Pe,o.Pe):r instanceof gh&&o instanceof gh})(s.transform,e.transform)}class nC{constructor(e,n){this.version=e,this.transformResults=n}}class Qn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Qn}static exists(e){return new Qn(void 0,e)}static updateTime(e){return new Qn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nh(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Ph{}function Hb(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Cp(s.key,Qn.none()):new su(s.key,s.data,Qn.none());{const n=s.data,r=vn.empty();let o=new $t(Qt.comparator);for(let u of e.fields)if(!o.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?r.delete(u):r.set(u,d),o=o.add(u)}return new pr(s.key,r,new On(o.toArray()),Qn.none())}}function iC(s,e,n){s instanceof su?(function(o,u,d){const m=o.value.clone(),g=I0(o.fieldTransforms,u,d.transformResults);m.setAll(g),u.convertToFoundDocument(d.version,m).setHasCommittedMutations()})(s,e,n):s instanceof pr?(function(o,u,d){if(!nh(o.precondition,u))return void u.convertToUnknownDocument(d.version);const m=I0(o.fieldTransforms,u,d.transformResults),g=u.data;g.setAll(Fb(o)),g.setAll(m),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(s,e,n):(function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function Pl(s,e,n,r){return s instanceof su?(function(u,d,m,g){if(!nh(u.precondition,d))return m;const y=u.value.clone(),b=D0(u.fieldTransforms,g,d);return y.setAll(b),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(s,e,n,r):s instanceof pr?(function(u,d,m,g){if(!nh(u.precondition,d))return m;const y=D0(u.fieldTransforms,g,d),b=d.data;return b.setAll(Fb(u)),b.setAll(y),d.convertToFoundDocument(d.version,b).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((A=>A.field)))})(s,e,n,r):(function(u,d,m){return nh(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m})(s,e,n)}function sC(s,e){let n=null;for(const r of s.fieldTransforms){const o=e.data.field(r.field),u=Lb(r.transform,o||null);u!=null&&(n===null&&(n=vn.empty()),n.set(r.field,u))}return n||null}function N0(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&fo(r,o,((u,d)=>tC(u,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class su extends Ph{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class pr extends Ph{constructor(e,n,r,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Fb(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=s.data.field(n);e.set(n,r)}})),e}function I0(s,e,n){const r=new Map;$e(s.length===n.length);for(let o=0;o<n.length;o++){const u=s[o],d=u.transform,m=e.data.field(u.field);r.set(u.field,WR(d,m,n[o]))}return r}function D0(s,e,n){const r=new Map;for(const o of s){const u=o.transform,d=n.data.field(o.field);r.set(o.field,ZR(u,d,e))}return r}class Cp extends Ph{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rC extends Ph{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&iC(u,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Pl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Pl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Ub();return this.mutations.forEach((o=>{const u=e.get(o.key),d=u.overlayedDocument;let m=this.applyToLocalView(d,u.mutatedFields);m=n.has(o.key)?null:m;const g=Hb(d,m);g!==null&&r.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(we.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Me())}isEqual(e){return this.batchId===e.batchId&&fo(this.mutations,e.mutations,((n,r)=>N0(n,r)))&&fo(this.baseMutations,e.baseMutations,((n,r)=>N0(n,r)))}}class Np{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){$e(e.mutations.length===r.length);let o=(function(){return QR})();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new Np(e,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St,Ue;function uC(s){switch(s){default:return be();case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0}}function Gb(s){if(s===void 0)return us("GRPC error has no .code"),Z.UNKNOWN;switch(s){case St.OK:return Z.OK;case St.CANCELLED:return Z.CANCELLED;case St.UNKNOWN:return Z.UNKNOWN;case St.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case St.INTERNAL:return Z.INTERNAL;case St.UNAVAILABLE:return Z.UNAVAILABLE;case St.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case St.NOT_FOUND:return Z.NOT_FOUND;case St.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case St.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case St.ABORTED:return Z.ABORTED;case St.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case St.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case St.DATA_LOSS:return Z.DATA_LOSS;default:return be()}}(Ue=St||(St={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=new Wr([4294967295,4294967295],0);function O0(s){const e=cC().encode(s),n=new pb;return n.update(e),new Uint8Array(n.digest())}function M0(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Wr([n,r],0),new Wr([o,u],0)]}class Ip{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ol(`Invalid padding: ${n}`);if(r<0)throw new Ol(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ol(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ol(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Wr.fromNumber(this.Ie)}Ee(e,n,r){let o=e.add(n.multiply(Wr.fromNumber(r)));return o.compare(hC)===1&&(o=new Wr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=O0(e),[r,o]=M0(n);for(let u=0;u<this.hashCount;u++){const d=this.Ee(r,o,u);if(!this.de(d))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new Ip(u,o,n);return r.forEach((m=>d.insert(m))),d}insert(e){if(this.Ie===0)return;const n=O0(e),[r,o]=M0(n);for(let u=0;u<this.hashCount;u++){const d=this.Ee(r,o,u);this.Ae(d)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ol extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n,r,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,ru.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Lh(we.min(),o,new ot(qe),cs(),Me())}}class ru{constructor(e,n,r,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ru(r,n,Me(),Me(),Me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,n,r,o){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=o}}class Kb{constructor(e,n){this.targetId=e,this.me=n}}class Qb{constructor(e,n,r=Yt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class k0{constructor(){this.fe=0,this.ge=j0(),this.pe=Yt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Me(),n=Me(),r=Me();return this.ge.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:be()}})),new ru(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=j0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,$e(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class dC{constructor(e){this.Le=e,this.Be=new Map,this.ke=cs(),this.qe=V0(),this.Qe=new ot(qe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,(n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:be()}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach(((r,o)=>{this.ze(o)&&n(o)}))}He(e){const n=e.targetId,r=e.me.count,o=this.Je(n);if(o){const u=o.target;if(Bm(u))if(r===0){const d=new ye(u.path);this.Ue(n,d,tn.newNoDocument(d,we.min()))}else $e(r===1);else{const d=this.Ye(n);if(d!==r){const m=this.Ze(e),g=m?this.Xe(m,e,d):1;if(g!==0){this.je(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,y)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=n;let d,m;try{d=ia(r).toUint8Array()}catch(g){if(g instanceof Ab)return ho("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Ip(d,o,u)}catch(g){return ho(g instanceof Ol?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.Ie===0?null:m}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let o=0;return r.forEach((u=>{const d=this.Le.tt(),m=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.Ue(n,u,null),o++)})),o}rt(e){const n=new Map;this.Be.forEach(((u,d)=>{const m=this.Je(d);if(m){if(u.current&&Bm(m.target)){const g=new ye(m.target.path);this.ke.get(g)!==null||this.it(d,g)||this.Ue(d,g,tn.newNoDocument(g,e))}u.be&&(n.set(d,u.ve()),u.Ce())}}));let r=Me();this.qe.forEach(((u,d)=>{let m=!0;d.forEachWhile((g=>{const y=this.Je(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(u))})),this.ke.forEach(((u,d)=>d.setReadTime(e)));const o=new Lh(e,n,this.Qe,this.ke,r);return this.ke=cs(),this.qe=V0(),this.Qe=new ot(qe),o}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,n)?o.Fe(n,1):o.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new k0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new $t(qe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||de("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new k0),this.Le.getRemoteKeysForTarget(e).forEach((n=>{this.Ue(e,n,null)}))}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function V0(){return new ot(ye.comparator)}function j0(){return new ot(ye.comparator)}const fC={asc:"ASCENDING",desc:"DESCENDING"},mC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pC={and:"AND",or:"OR"};class gC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Fm(s,e){return s.useProto3Json||Mh(e)?e:{value:e}}function _h(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $b(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function yC(s,e){return _h(s,e.toTimestamp())}function bi(s){return $e(!!s),we.fromTimestamp((function(n){const r=dr(n);return new at(r.seconds,r.nanos)})(s))}function Dp(s,e){return Gm(s,e).canonicalString()}function Gm(s,e){const n=(function(o){return new it(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?n:n.child(e)}function Yb(s){const e=it.fromString(s);return $e(eT(e)),e}function Km(s,e){return Dp(s.databaseId,e.path)}function Em(s,e){const n=Yb(e);if(n.get(1)!==s.databaseId.projectId)throw new ue(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new ue(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new ye(Jb(n))}function Xb(s,e){return Dp(s.databaseId,e)}function _C(s){const e=Yb(s);return e.length===4?it.emptyPath():Jb(e)}function Qm(s){return new it(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function Jb(s){return $e(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function U0(s,e,n){return{name:Km(s,e),fields:n.value.mapValue.fields}}function vC(s,e){let n;if("targetChange"in e){e.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:be()})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(y,b){return y.useProto3Json?($e(b===void 0||typeof b=="string"),Yt.fromBase64String(b||"")):($e(b===void 0||b instanceof Buffer||b instanceof Uint8Array),Yt.fromUint8Array(b||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&(function(y){const b=y.code===void 0?Z.UNKNOWN:Gb(y.code);return new ue(b,y.message||"")})(d);n=new Qb(r,o,u,m||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Em(s,r.document.name),u=bi(r.document.updateTime),d=r.document.createTime?bi(r.document.createTime):we.min(),m=new vn({mapValue:{fields:r.document.fields}}),g=tn.newFoundDocument(o,u,d,m),y=r.targetIds||[],b=r.removedTargetIds||[];n=new ih(y,b,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Em(s,r.document),u=r.readTime?bi(r.readTime):we.min(),d=tn.newNoDocument(o,u),m=r.removedTargetIds||[];n=new ih([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Em(s,r.document),u=r.removedTargetIds||[];n=new ih([],u,o,null)}else{if(!("filter"in e))return be();{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,d=new lC(o,u),m=r.targetId;n=new Kb(m,d)}}return n}function EC(s,e){let n;if(e instanceof su)n={update:U0(s,e.key,e.value)};else if(e instanceof Cp)n={delete:Km(s,e.key)};else if(e instanceof pr)n={update:U0(s,e.key,e.data),updateMask:NC(e.fieldMask)};else{if(!(e instanceof rC))return be();n={verify:Km(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(u,d){const m=d.transform;if(m instanceof gh)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof go)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Ql)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof yh)return{fieldPath:d.field.canonicalString(),increment:m.Pe};throw be()})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:yC(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:be()})(s,e.precondition)),n}function bC(s,e){return s&&s.length>0?($e(e!==void 0),s.map((n=>(function(o,u){let d=o.updateTime?bi(o.updateTime):bi(u);return d.isEqual(we.min())&&(d=bi(u)),new nC(d,o.transformResults||[])})(n,e)))):[]}function TC(s,e){return{documents:[Xb(s,e.path)]}}function wC(s,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Xb(s,o);const u=(function(y){if(y.length!==0)return Wb(ni.create(y,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const d=(function(y){if(y.length!==0)return y.map((b=>(function(x){return{field:to(x.field),direction:xC(x.dir)}})(b)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const m=Fm(s,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{_t:n,parent:o}}function AC(s){let e=_C(s.parent);const n=s.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){$e(r===1);const b=n.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let u=[];n.where&&(u=(function(A){const x=Zb(A);return x instanceof ni&&Cb(x)?x.getFilters():[x]})(n.where));let d=[];n.orderBy&&(d=(function(A){return A.map((x=>(function(K){return new ph(no(K.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(K.direction))})(x)))})(n.orderBy));let m=null;n.limit&&(m=(function(A){let x;return x=typeof A=="object"?A.value:A,Mh(x)?null:x})(n.limit));let g=null;n.startAt&&(g=(function(A){const x=!!A.before,j=A.values||[];return new mh(j,x)})(n.startAt));let y=null;return n.endAt&&(y=(function(A){const x=!A.before,j=A.values||[];return new mh(j,x)})(n.endAt)),qR(e,o,d,u,m,"F",g,y)}function SC(s,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be()}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Zb(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=no(n.unaryFilter.field);return xt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=no(n.unaryFilter.field);return xt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=no(n.unaryFilter.field);return xt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=no(n.unaryFilter.field);return xt.create(d,"!=",{nullValue:"NULL_VALUE"});default:return be()}})(s):s.fieldFilter!==void 0?(function(n){return xt.create(no(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return be()}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return ni.create(n.compositeFilter.filters.map((r=>Zb(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return be()}})(n.compositeFilter.op))})(s):be()}function xC(s){return fC[s]}function RC(s){return mC[s]}function CC(s){return pC[s]}function to(s){return{fieldPath:s.canonicalString()}}function no(s){return Qt.fromServerFormat(s.fieldPath)}function Wb(s){return s instanceof xt?(function(n){if(n.op==="=="){if(w0(n.value))return{unaryFilter:{field:to(n.field),op:"IS_NAN"}};if(T0(n.value))return{unaryFilter:{field:to(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(w0(n.value))return{unaryFilter:{field:to(n.field),op:"IS_NOT_NAN"}};if(T0(n.value))return{unaryFilter:{field:to(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:to(n.field),op:RC(n.op),value:n.value}}})(s):s instanceof ni?(function(n){const r=n.getFilters().map((o=>Wb(o)));return r.length===1?r[0]:{compositeFilter:{op:CC(n.op),filters:r}}})(s):be()}function NC(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function eT(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e,n,r,o,u=we.min(),d=we.min(),m=Yt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new ar(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e){this.ct=e}}function DC(s){const e=AC({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Hm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(){this.un=new MC}addToCollectionParentIndex(e,n){return this.un.add(n),W.resolve()}getCollectionParents(e,n){return W.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return W.resolve()}deleteFieldIndex(e,n){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,n){return W.resolve()}getDocumentsMatchingTarget(e,n){return W.resolve(null)}getIndexType(e,n){return W.resolve(0)}getFieldIndexes(e,n){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,n){return W.resolve(hr.min())}getMinOffsetFromCollectionGroup(e,n){return W.resolve(hr.min())}updateCollectionGroup(e,n,r){return W.resolve()}updateIndexEntries(e,n){return W.resolve()}}class MC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new $t(it.comparator),u=!o.has(r);return this.index[n]=o.add(r),u}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new $t(it.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new yo(0)}static kn(){return new yo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(){this.changes=new To((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,tn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?W.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(r!==null&&Pl(r.mutation,o,On.empty(),at.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Me()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Me()){const o=Xr();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,r).next((u=>{let d=Dl();return u.forEach(((m,g)=>{d=d.insert(m,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const r=Xr();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Me())))}populateOverlays(e,n,r){const o=[];return r.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((d,m)=>{n.set(d,m)}))}))}computeViews(e,n,r,o){let u=cs();const d=Ul(),m=(function(){return Ul()})();return n.forEach(((g,y)=>{const b=r.get(y.key);o.has(y.key)&&(b===void 0||b.mutation instanceof pr)?u=u.insert(y.key,y):b!==void 0?(d.set(y.key,b.mutation.getFieldMask()),Pl(b.mutation,y,b.mutation.getFieldMask(),at.now())):d.set(y.key,On.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((y,b)=>d.set(y,b))),n.forEach(((y,b)=>{var A;return m.set(y,new VC(b,(A=d.get(y))!==null&&A!==void 0?A:null))})),m)))}recalculateAndSaveOverlays(e,n){const r=Ul();let o=new ot(((d,m)=>d-m)),u=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const m of d)m.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let b=r.get(g)||On.empty();b=m.applyToLocalView(y,b),r.set(g,b);const A=(o.get(m.batchId)||Me()).add(g);o=o.insert(m.batchId,A)}))})).next((()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),y=g.key,b=g.value,A=Ub();b.forEach((x=>{if(!u.has(x)){const j=Hb(n.get(x),r.get(x));j!==null&&A.set(x,j),u=u.add(x)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,A))}return W.waitFor(d)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,o){return(function(d){return ye.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Ob(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next((u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-u.size):W.resolve(Xr());let m=-1,g=u;return d.next((y=>W.forEach(y,((b,A)=>(m<A.largestBatchId&&(m=A.largestBatchId),u.get(b)?W.resolve():this.remoteDocumentCache.getEntry(e,b).next((x=>{g=g.insert(b,x)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,g,y,Me()))).next((b=>({batchId:m,changes:jb(b)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ye(n)).next((r=>{let o=Dl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const u=n.collectionGroup;let d=Dl();return this.indexManager.getCollectionParents(e,u).next((m=>W.forEach(m,(g=>{const y=(function(A,x){return new iu(x,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,r,o).next((b=>{b.forEach(((A,x)=>{d=d.insert(A,x)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,u,o)))).next((d=>{u.forEach(((g,y)=>{const b=y.getKey();d.get(b)===null&&(d=d.insert(b,tn.newInvalidDocument(b)))}));let m=Dl();return d.forEach(((g,y)=>{const b=u.get(g);b!==void 0&&Pl(b.mutation,y,On.empty(),at.now()),jh(n,y)&&(m=m.insert(g,y))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return W.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:bi(o.createTime)}})(n)),W.resolve()}getNamedQuery(e,n){return W.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,(function(o){return{name:o.name,query:DC(o.bundledQuery),readTime:bi(o.readTime)}})(n)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(){this.overlays=new ot(ye.comparator),this.Ir=new Map}getOverlay(e,n){return W.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Xr();return W.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((o,u)=>{this.ht(e,n,u)})),W.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.Ir.get(r);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.Ir.delete(r)),W.resolve()}getOverlaysForCollection(e,n,r){const o=Xr(),u=n.length+1,d=new ye(n.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const g=m.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>r&&o.set(g.getKey(),g)}return W.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let u=new ot(((y,b)=>y-b));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>r){let b=u.get(y.largestBatchId);b===null&&(b=Xr(),u=u.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const m=Xr(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,b)=>m.set(y,b))),!(m.size()>=o)););return W.resolve(m)}ht(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const d=this.Ir.get(o.largestBatchId).delete(r.key);this.Ir.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new oC(n,r));let u=this.Ir.get(n);u===void 0&&(u=Me(),this.Ir.set(n,u)),this.Ir.set(n,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(){this.sessionToken=Yt.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(){this.Tr=new $t(jt.Er),this.dr=new $t(jt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new jt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Vr(new jt(e,n))}mr(e,n){e.forEach((r=>this.removeReference(r,n)))}gr(e){const n=new ye(new it([])),r=new jt(n,e),o=new jt(n,e+1),u=[];return this.dr.forEachInRange([r,o],(d=>{this.Vr(d),u.push(d.key)})),u}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ye(new it([])),r=new jt(n,e),o=new jt(n,e+1);let u=Me();return this.dr.forEachInRange([r,o],(d=>{u=u.add(d.key)})),u}containsKey(e){const n=new jt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class jt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ye.comparator(e.key,n.key)||qe(e.wr,n.wr)}static Ar(e,n){return qe(e.wr,n.wr)||ye.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new $t(jt.Er)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const u=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new aC(u,n,r,o);this.mutationQueue.push(d);for(const m of o)this.br=this.br.add(new jt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return W.resolve(d)}lookupMutationBatch(e,n){return W.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.vr(r),u=o<0?0:o;return W.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new jt(n,0),o=new jt(n,Number.POSITIVE_INFINITY),u=[];return this.br.forEachInRange([r,o],(d=>{const m=this.Dr(d.wr);u.push(m)})),W.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new $t(qe);return n.forEach((o=>{const u=new jt(o,0),d=new jt(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([u,d],(m=>{r=r.add(m.wr)}))})),W.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let u=r;ye.isDocumentKey(u)||(u=u.child(""));const d=new jt(new ye(u),0);let m=new $t(qe);return this.br.forEachWhile((g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===o&&(m=m.add(g.wr)),!0)}),d),W.resolve(this.Cr(m))}Cr(e){const n=[];return e.forEach((r=>{const o=this.Dr(r);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){$e(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return W.forEach(n.mutations,(o=>{const u=new jt(o.key,n.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.br=r}))}On(e){}containsKey(e,n){const r=new jt(n,0),o=this.br.firstAfterOrEqual(r);return W.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e){this.Mr=e,this.docs=(function(){return new ot(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),u=o?o.size:0,d=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return W.resolve(r?r.document.mutableCopy():tn.newInvalidDocument(n))}getEntries(e,n){let r=cs();return n.forEach((o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():tn.newInvalidDocument(o))})),W.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let u=cs();const d=n.path,m=new ye(d.child("")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:y,value:{document:b}}=g.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||wR(TR(b),r)<=0||(o.has(b.key)||jh(n,b))&&(u=u.insert(b.key,b.mutableCopy()))}return W.resolve(u)}getAllFromCollectionGroup(e,n,r,o){be()}Or(e,n){return W.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new qC(this)}getSize(e){return W.resolve(this.size)}}class qC extends kC{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?n.push(this.cr.addEntry(e,o)):this.cr.removeEntry(r)})),W.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e){this.persistence=e,this.Nr=new To((n=>Sp(n)),xp),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Op,this.targetCount=0,this.kr=yo.Bn()}forEachTarget(e,n){return this.Nr.forEach(((r,o)=>n(o))),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),W.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new yo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,W.resolve()}updateTargetData(e,n){return this.Kn(n),W.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,n,r){let o=0;const u=[];return this.Nr.forEach(((d,m)=>{m.sequenceNumber<=n&&r.get(m.targetId)===null&&(this.Nr.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),W.waitFor(u).next((()=>o))}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return W.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),W.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((d=>{u.push(o.markPotentiallyOrphaned(e,d))})),W.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),W.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return W.resolve(r)}containsKey(e,n){return W.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e,n){this.qr={},this.overlays={},this.Qr=new bp(0),this.Kr=!1,this.Kr=!0,this.$r=new LC,this.referenceDelegate=e(this),this.Ur=new HC(this),this.indexManager=new OC,this.remoteDocumentCache=(function(o){return new BC(o)})((r=>this.referenceDelegate.Wr(r))),this.serializer=new IC(n),this.Gr=new UC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new PC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new zC(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){de("MemoryPersistence","Starting transaction:",e);const o=new GC(this.Qr.next());return this.referenceDelegate.zr(),r(o).next((u=>this.referenceDelegate.jr(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Hr(e,n){return W.or(Object.values(this.qr).map((r=>()=>r.containsKey(e,n))))}}class GC extends SR{constructor(e){super(),this.currentSequenceNumber=e}}class Mp{constructor(e){this.persistence=e,this.Jr=new Op,this.Yr=null}static Zr(e){return new Mp(e)}get Xr(){if(this.Yr)return this.Yr;throw be()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),W.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),W.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach((o=>this.Xr.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.Xr.add(u.toString())))})).next((()=>r.removeTargetData(e,n)))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.Xr,(r=>{const o=ye.fromPath(r);return this.ei(e,o).next((u=>{u||n.removeEntry(o,we.min())}))})).next((()=>(this.Yr=null,n.apply(e))))}updateLimboDocument(e,n){return this.ei(e,n).next((r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())}))}Wr(e){return 0}ei(e,n){return W.or([()=>W.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=o}static Wi(e,n){let r=Me(),o=Me();for(const u of n.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new kp(e,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return X1()?8:xR(sn())>0?6:4})()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,o){const u={result:null};return this.Yi(e,n).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.Zi(e,n,o,r).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new KC;return this.Xi(e,n,d).next((m=>{if(u.result=m,this.zi)return this.es(e,n,d,m.size)}))})).next((()=>u.result))}es(e,n,r,o){return r.documentReadCount<this.ji?(Cl()<=je.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",eo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),W.resolve()):(Cl()<=je.DEBUG&&de("QueryEngine","Query:",eo(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.Hi*o?(Cl()<=je.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",eo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ei(n))):W.resolve())}Yi(e,n){if(R0(n))return W.resolve(null);let r=Ei(n);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Hm(n,null,"F"),r=Ei(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((u=>{const d=Me(...u);return this.Ji.getDocuments(e,d).next((m=>this.indexManager.getMinOffset(e,r).next((g=>{const y=this.ts(n,m);return this.ns(n,y,d,g.readTime)?this.Yi(e,Hm(n,null,"F")):this.rs(e,y,n,g)}))))})))))}Zi(e,n,r,o){return R0(n)||o.isEqual(we.min())?W.resolve(null):this.Ji.getDocuments(e,r).next((u=>{const d=this.ts(n,u);return this.ns(n,d,r,o)?W.resolve(null):(Cl()<=je.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),eo(n)),this.rs(e,d,n,bR(o,-1)).next((m=>m)))}))}ts(e,n){let r=new $t(kb(e));return n.forEach(((o,u)=>{jh(e,u)&&(r=r.add(u))})),r}ns(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Xi(e,n,r){return Cl()<=je.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",eo(n)),this.Ji.getDocumentsMatchingQuery(e,n,hr.min(),r)}rs(e,n,r,o){return this.Ji.getDocumentsMatchingQuery(e,r,o).next((u=>(n.forEach((d=>{u=u.insert(d.key,d)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e,n,r,o){this.persistence=e,this.ss=n,this.serializer=o,this.os=new ot(qe),this._s=new To((u=>Sp(u)),xp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jC(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.os)))}}function YC(s,e,n,r){return new $C(s,e,n,r)}async function tT(s,e){const n=Ae(s);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next((u=>(o=u,n.ls(e),n.mutationQueue.getAllMutationBatches(r)))).next((u=>{const d=[],m=[];let g=Me();for(const y of o){d.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}for(const y of u){m.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}return n.localDocuments.getDocuments(r,g).next((y=>({hs:y,removedBatchIds:d,addedBatchIds:m})))}))}))}function XC(s,e){const n=Ae(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),u=n.cs.newChangeBuffer({trackRemovals:!0});return(function(m,g,y,b){const A=y.batch,x=A.keys();let j=W.resolve();return x.forEach((K=>{j=j.next((()=>b.getEntry(g,K))).next((G=>{const F=y.docVersions.get(K);$e(F!==null),G.version.compareTo(F)<0&&(A.applyToRemoteDocument(G,y),G.isValidDocument()&&(G.setReadTime(y.commitVersion),b.addEntry(G)))}))})),j.next((()=>m.mutationQueue.removeMutationBatch(g,A)))})(n,r,e,u).next((()=>u.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let g=Me();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(g=g.add(m.batch.mutations[y].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(r,o)))}))}function nT(s){const e=Ae(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Ur.getLastRemoteSnapshotVersion(n)))}function JC(s,e){const n=Ae(s),r=e.snapshotVersion;let o=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=n.cs.newChangeBuffer({trackRemovals:!0});o=n.os;const m=[];e.targetChanges.forEach(((b,A)=>{const x=o.get(A);if(!x)return;m.push(n.Ur.removeMatchingKeys(u,b.removedDocuments,A).next((()=>n.Ur.addMatchingKeys(u,b.addedDocuments,A))));let j=x.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(A)!==null?j=j.withResumeToken(Yt.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):b.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(b.resumeToken,r)),o=o.insert(A,j),(function(G,F,se){return G.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=3e8?!0:se.addedDocuments.size+se.modifiedDocuments.size+se.removedDocuments.size>0})(x,j,b)&&m.push(n.Ur.updateTargetData(u,j))}));let g=cs(),y=Me();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,b))})),m.push(ZC(u,d,e.documentUpdates).next((b=>{g=b.Ps,y=b.Is}))),!r.isEqual(we.min())){const b=n.Ur.getLastRemoteSnapshotVersion(u).next((A=>n.Ur.setTargetsMetadata(u,u.currentSequenceNumber,r)));m.push(b)}return W.waitFor(m).next((()=>d.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,y))).next((()=>g))})).then((u=>(n.os=o,u)))}function ZC(s,e,n){let r=Me(),o=Me();return n.forEach((u=>r=r.add(u))),e.getEntries(s,r).next((u=>{let d=cs();return n.forEach(((m,g)=>{const y=u.get(m);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(we.min())?(e.removeEntry(m,g.readTime),d=d.insert(m,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),d=d.insert(m,g)):de("LocalStore","Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",g.version)})),{Ps:d,Is:o}}))}function WC(s,e){const n=Ae(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function eN(s,e){const n=Ae(s);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return n.Ur.getTargetData(r,e).next((u=>u?(o=u,W.resolve(o)):n.Ur.allocateTargetId(r).next((d=>(o=new ar(e,d,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=n.os.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r}))}async function $m(s,e,n){const r=Ae(s),o=r.os.get(e),u=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",u,(d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!nu(d))throw d;de("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.os=r.os.remove(e),r._s.delete(o.target)}function P0(s,e,n){const r=Ae(s);let o=we.min(),u=Me();return r.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,y,b){const A=Ae(g),x=A._s.get(b);return x!==void 0?W.resolve(A.os.get(x)):A.Ur.getTargetData(y,b)})(r,d,Ei(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(d,m.targetId).next((g=>{u=g}))})).next((()=>r.ss.getDocumentsMatchingQuery(d,e,n?o:we.min(),n?u:Me()))).next((m=>(tN(r,FR(e),m),{documents:m,Ts:u})))))}function tN(s,e,n){let r=s.us.get(e)||we.min();n.forEach(((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),s.us.set(e,r)}class L0{constructor(){this.activeTargetIds=XR()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nN{constructor(){this.so=new L0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new L0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){de("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){de("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hc=null;function bm(){return Hc===null?Hc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Hc++,"0x"+Hc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt="WebChannelConnection";class aN extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),u=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${o}/databases/${u}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${u}`}get Fo(){return!1}Mo(n,r,o,u,d){const m=bm(),g=this.xo(n,r.toUriEncodedString());de("RestConnection",`Sending RPC '${n}' ${m}:`,g,o);const y={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(y,u,d),this.No(n,g,y,o).then((b=>(de("RestConnection",`Received RPC '${n}' ${m}: `,b),b)),(b=>{throw ho("RestConnection",`RPC '${n}' ${m} failed with error: `,b,"url: ",g,"request:",o),b}))}Lo(n,r,o,u,d,m){return this.Mo(n,r,o,u,d)}Oo(n,r,o){n["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+bo})(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((u,d)=>n[d]=u)),o&&o.headers.forEach(((u,d)=>n[d]=u))}xo(n,r){const o=sN[n];return`${this.Do}/v1/${r}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,o){const u=bm();return new Promise(((d,m)=>{const g=new gb;g.setWithCredentials(!0),g.listenOnce(yb.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case eh.NO_ERROR:const b=g.getResponseJson();de(Wt,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(b)),d(b);break;case eh.TIMEOUT:de(Wt,`RPC '${e}' ${u} timed out`),m(new ue(Z.DEADLINE_EXCEEDED,"Request time out"));break;case eh.HTTP_ERROR:const A=g.getStatus();if(de(Wt,`RPC '${e}' ${u} failed with status:`,A,"response text:",g.getResponseText()),A>0){let x=g.getResponseJson();Array.isArray(x)&&(x=x[0]);const j=x==null?void 0:x.error;if(j&&j.status&&j.message){const K=(function(F){const se=F.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(se)>=0?se:Z.UNKNOWN})(j.status);m(new ue(K,j.message))}else m(new ue(Z.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new ue(Z.UNAVAILABLE,"Connection failed."));break;default:be()}}finally{de(Wt,`RPC '${e}' ${u} completed.`)}}));const y=JSON.stringify(o);de(Wt,`RPC '${e}' ${u} sending request:`,o),g.send(n,"POST",y,r,15)}))}Bo(e,n,r){const o=bm(),u=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=Eb(),m=vb(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Oo(g.initMessageHeaders,n,r),g.encodeInitMessageHeaders=!0;const b=u.join("");de(Wt,`Creating RPC '${e}' stream ${o}: ${b}`,g);const A=d.createWebChannel(b,g);let x=!1,j=!1;const K=new rN({Io:F=>{j?de(Wt,`Not sending because RPC '${e}' stream ${o} is closed:`,F):(x||(de(Wt,`Opening RPC '${e}' stream ${o} transport.`),A.open(),x=!0),de(Wt,`RPC '${e}' stream ${o} sending:`,F),A.send(F))},To:()=>A.close()}),G=(F,se,le)=>{F.listen(se,(re=>{try{le(re)}catch(ee){setTimeout((()=>{throw ee}),0)}}))};return G(A,Il.EventType.OPEN,(()=>{j||(de(Wt,`RPC '${e}' stream ${o} transport opened.`),K.yo())})),G(A,Il.EventType.CLOSE,(()=>{j||(j=!0,de(Wt,`RPC '${e}' stream ${o} transport closed`),K.So())})),G(A,Il.EventType.ERROR,(F=>{j||(j=!0,ho(Wt,`RPC '${e}' stream ${o} transport errored:`,F),K.So(new ue(Z.UNAVAILABLE,"The operation could not be completed")))})),G(A,Il.EventType.MESSAGE,(F=>{var se;if(!j){const le=F.data[0];$e(!!le);const re=le,ee=re.error||((se=re[0])===null||se===void 0?void 0:se.error);if(ee){de(Wt,`RPC '${e}' stream ${o} received error:`,ee);const me=ee.status;let ne=(function(C){const O=St[C];if(O!==void 0)return Gb(O)})(me),R=ee.message;ne===void 0&&(ne=Z.INTERNAL,R="Unknown error status: "+me+" with message "+ee.message),j=!0,K.So(new ue(ne,R)),A.close()}else de(Wt,`RPC '${e}' stream ${o} received:`,le),K.bo(le)}})),G(m,_b.STAT_EVENT,(F=>{F.stat===Um.PROXY?de(Wt,`RPC '${e}' stream ${o} detected buffering proxy`):F.stat===Um.NOPROXY&&de(Wt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{K.wo()}),0),K}}function Tm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zh(s){return new gC(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e,n,r=1e3,o=1.5,u=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=o,this.Qo=u,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),o=Math.max(0,n-r);o>0&&de("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e,n,r,o,u,d,m,g){this.ui=e,this.Ho=r,this.Jo=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new iT(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(us(n.toString()),us("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.Yo===n&&this.P_(r,o)}),(r=>{e((()=>{const o=new ue(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(o)}))}))}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo((()=>{r((()=>this.listener.Eo()))})),this.stream.Ro((()=>{r((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((o=>{r((()=>this.I_(o)))})),this.stream.onMessage((o=>{r((()=>++this.e_==1?this.E_(o):this.onNext(o)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return de("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget((()=>this.Yo===e?n():(de("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class oN extends sT{constructor(e,n,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,d),this.serializer=u}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=vC(this.serializer,e),r=(function(u){if(!("targetChange"in u))return we.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?we.min():d.readTime?bi(d.readTime):we.min()})(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Qm(this.serializer),n.addTarget=(function(u,d){let m;const g=d.target;if(m=Bm(g)?{documents:TC(u,g)}:{query:wC(u,g)._t},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=$b(u,d.resumeToken);const y=Fm(u,d.expectedCount);y!==null&&(m.expectedCount=y)}else if(d.snapshotVersion.compareTo(we.min())>0){m.readTime=_h(u,d.snapshotVersion.toTimestamp());const y=Fm(u,d.expectedCount);y!==null&&(m.expectedCount=y)}return m})(this.serializer,e);const r=SC(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Qm(this.serializer),n.removeTarget=e,this.a_(n)}}class lN extends sT{constructor(e,n,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,d),this.serializer=u}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return $e(!!e.streamToken),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){$e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=bC(e.writeResults,e.commitTime),r=bi(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Qm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>EC(this.serializer,r)))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN extends class{}{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new ue(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Mo(e,Gm(n,r),o,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ue(Z.UNKNOWN,u.toString())}))}Lo(e,n,r,o,u){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,m])=>this.connection.Lo(e,Gm(n,r),o,d,m,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ue(Z.UNKNOWN,d.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class cN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(us(n),this.D_=!1):de("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,n,r,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=u,this.k_._o((d=>{r.enqueueAndForget((async()=>{la(this)&&(de("RemoteStore","Restarting streams for network reachability change."),await(async function(g){const y=Ae(g);y.L_.add(4),await au(y),y.q_.set("Unknown"),y.L_.delete(4),await Bh(y)})(this))}))})),this.q_=new cN(r,o)}}async function Bh(s){if(la(s))for(const e of s.B_)await e(!0)}async function au(s){for(const e of s.B_)await e(!1)}function rT(s,e){const n=Ae(s);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Pp(n)?Up(n):wo(n).r_()&&jp(n,e))}function Vp(s,e){const n=Ae(s),r=wo(n);n.N_.delete(e),r.r_()&&aT(n,e),n.N_.size===0&&(r.r_()?r.o_():la(n)&&n.q_.set("Unknown"))}function jp(s,e){if(s.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}wo(s).A_(e)}function aT(s,e){s.Q_.xe(e),wo(s).R_(e)}function Up(s){s.Q_=new dC({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>s.N_.get(e)||null,tt:()=>s.datastore.serializer.databaseId}),wo(s).start(),s.q_.v_()}function Pp(s){return la(s)&&!wo(s).n_()&&s.N_.size>0}function la(s){return Ae(s).L_.size===0}function oT(s){s.Q_=void 0}async function dN(s){s.q_.set("Online")}async function fN(s){s.N_.forEach(((e,n)=>{jp(s,e)}))}async function mN(s,e){oT(s),Pp(s)?(s.q_.M_(e),Up(s)):s.q_.set("Unknown")}async function pN(s,e,n){if(s.q_.set("Online"),e instanceof Qb&&e.state===2&&e.cause)try{await(async function(o,u){const d=u.cause;for(const m of u.targetIds)o.N_.has(m)&&(await o.remoteSyncer.rejectListen(m,d),o.N_.delete(m),o.Q_.removeTarget(m))})(s,e)}catch(r){de("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await vh(s,r)}else if(e instanceof ih?s.Q_.Ke(e):e instanceof Kb?s.Q_.He(e):s.Q_.We(e),!n.isEqual(we.min()))try{const r=await nT(s.localStore);n.compareTo(r)>=0&&await(function(u,d){const m=u.Q_.rt(d);return m.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const b=u.N_.get(y);b&&u.N_.set(y,b.withResumeToken(g.resumeToken,d))}})),m.targetMismatches.forEach(((g,y)=>{const b=u.N_.get(g);if(!b)return;u.N_.set(g,b.withResumeToken(Yt.EMPTY_BYTE_STRING,b.snapshotVersion)),aT(u,g);const A=new ar(b.target,g,y,b.sequenceNumber);jp(u,A)})),u.remoteSyncer.applyRemoteEvent(m)})(s,n)}catch(r){de("RemoteStore","Failed to raise snapshot:",r),await vh(s,r)}}async function vh(s,e,n){if(!nu(e))throw e;s.L_.add(1),await au(s),s.q_.set("Offline"),n||(n=()=>nT(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{de("RemoteStore","Retrying IndexedDB access"),await n(),s.L_.delete(1),await Bh(s)}))}function lT(s,e){return e().catch((n=>vh(s,n,e)))}async function qh(s){const e=Ae(s),n=fr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;gN(e);)try{const o=await WC(e.localStore,r);if(o===null){e.O_.length===0&&n.o_();break}r=o.batchId,yN(e,o)}catch(o){await vh(e,o)}uT(e)&&cT(e)}function gN(s){return la(s)&&s.O_.length<10}function yN(s,e){s.O_.push(e);const n=fr(s);n.r_()&&n.V_&&n.m_(e.mutations)}function uT(s){return la(s)&&!fr(s).n_()&&s.O_.length>0}function cT(s){fr(s).start()}async function _N(s){fr(s).p_()}async function vN(s){const e=fr(s);for(const n of s.O_)e.m_(n.mutations)}async function EN(s,e,n){const r=s.O_.shift(),o=Np.from(r,e,n);await lT(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await qh(s)}async function bN(s,e){e&&fr(s).V_&&await(async function(r,o){if((function(d){return uC(d)&&d!==Z.ABORTED})(o.code)){const u=r.O_.shift();fr(r).s_(),await lT(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o))),await qh(r)}})(s,e),uT(s)&&cT(s)}async function B0(s,e){const n=Ae(s);n.asyncQueue.verifyOperationInProgress(),de("RemoteStore","RemoteStore received new credentials");const r=la(n);n.L_.add(3),await au(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Bh(n)}async function TN(s,e){const n=Ae(s);e?(n.L_.delete(2),await Bh(n)):e||(n.L_.add(2),await au(n),n.q_.set("Unknown"))}function wo(s){return s.K_||(s.K_=(function(n,r,o){const u=Ae(n);return u.w_(),new oN(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Eo:dN.bind(null,s),Ro:fN.bind(null,s),mo:mN.bind(null,s),d_:pN.bind(null,s)}),s.B_.push((async e=>{e?(s.K_.s_(),Pp(s)?Up(s):s.q_.set("Unknown")):(await s.K_.stop(),oT(s))}))),s.K_}function fr(s){return s.U_||(s.U_=(function(n,r,o){const u=Ae(n);return u.w_(),new lN(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Eo:()=>Promise.resolve(),Ro:_N.bind(null,s),mo:bN.bind(null,s),f_:vN.bind(null,s),g_:EN.bind(null,s)}),s.B_.push((async e=>{e?(s.U_.s_(),await qh(s)):(await s.U_.stop(),s.O_.length>0&&(de("RemoteStore",`Stopping write stream with ${s.O_.length} pending writes`),s.O_=[]))}))),s.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e,n,r,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new ss,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,u){const d=Date.now()+r,m=new Lp(e,n,d,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zp(s,e){if(us("AsyncQueue",`${e}: ${s}`),nu(s))return new ue(Z.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ye.comparator(n.key,r.key):(n,r)=>ye.comparator(n.key,r.key),this.keyedMap=Dl(),this.sortedSet=new ot(this.comparator)}static emptySet(e){return new ao(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ao)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ao;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(){this.W_=new ot(ye.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):be():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal(((n,r)=>{e.push(r)})),e}}class _o{constructor(e,n,r,o,u,d,m,g,y){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,r,o,u){const d=[];return n.forEach((m=>{d.push({type:0,doc:m})})),new _o(e,n,ao.emptySet(n),d,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class AN{constructor(){this.queries=H0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const o=Ae(n),u=o.queries;o.queries=H0(),u.forEach(((d,m)=>{for(const g of m.j_)g.onError(r)}))})(this,new ue(Z.ABORTED,"Firestore shutting down"))}}function H0(){return new To((s=>Mb(s)),Vh)}async function Bp(s,e){const n=Ae(s);let r=3;const o=e.query;let u=n.queries.get(o);u?!u.H_()&&e.J_()&&(r=2):(u=new wN,r=e.J_()?0:1);try{switch(r){case 0:u.z_=await n.onListen(o,!0);break;case 1:u.z_=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const m=zp(d,`Initialization of query '${eo(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.j_.push(e),e.Z_(n.onlineState),u.z_&&e.X_(u.z_)&&Hp(n)}async function qp(s,e){const n=Ae(s),r=e.query;let o=3;const u=n.queries.get(r);if(u){const d=u.j_.indexOf(e);d>=0&&(u.j_.splice(d,1),u.j_.length===0?o=e.J_()?0:1:!u.H_()&&e.J_()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function SN(s,e){const n=Ae(s);let r=!1;for(const o of e){const u=o.query,d=n.queries.get(u);if(d){for(const m of d.j_)m.X_(o)&&(r=!0);d.z_=o}}r&&Hp(n)}function xN(s,e,n){const r=Ae(s),o=r.queries.get(e);if(o)for(const u of o.j_)u.onError(n);r.queries.delete(e)}function Hp(s){s.Y_.forEach((e=>{e.next()}))}var Ym,F0;(F0=Ym||(Ym={})).ea="default",F0.Cache="cache";class Fp{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new _o(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=_o.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Ym.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e){this.key=e}}class dT{constructor(e){this.key=e}}class RN{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Me(),this.mutatedKeys=Me(),this.Aa=kb(e),this.Ra=new ao(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new q0,o=n?n.Ra:this.Ra;let u=n?n.mutatedKeys:this.mutatedKeys,d=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((b,A)=>{const x=o.get(b),j=jh(this.query,A)?A:null,K=!!x&&this.mutatedKeys.has(x.key),G=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let F=!1;x&&j?x.data.isEqual(j.data)?K!==G&&(r.track({type:3,doc:j}),F=!0):this.ga(x,j)||(r.track({type:2,doc:j}),F=!0,(g&&this.Aa(j,g)>0||y&&this.Aa(j,y)<0)&&(m=!0)):!x&&j?(r.track({type:0,doc:j}),F=!0):x&&!j&&(r.track({type:1,doc:x}),F=!0,(g||y)&&(m=!0)),F&&(j?(d=d.add(j),u=G?u.add(b):u.delete(b)):(d=d.delete(b),u=u.delete(b)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const b=this.query.limitType==="F"?d.last():d.first();d=d.delete(b.key),u=u.delete(b.key),r.track({type:1,doc:b})}return{Ra:d,fa:r,ns:m,mutatedKeys:u}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const u=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const d=e.fa.G_();d.sort(((b,A)=>(function(j,K){const G=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be()}};return G(j)-G(K)})(b.type,A.type)||this.Aa(b.doc,A.doc))),this.pa(r),o=o!=null&&o;const m=n&&!o?this.ya():[],g=this.da.size===0&&this.current&&!o?1:0,y=g!==this.Ea;return this.Ea=g,d.length!==0||y?{snapshot:new _o(this.query,e.Ra,u,d,e.mutatedKeys,g===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:m}:{wa:m}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new q0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((n=>this.Ta=this.Ta.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ta=this.Ta.delete(n))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Me(),this.Ra.forEach((r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))}));const n=[];return e.forEach((r=>{this.da.has(r)||n.push(new dT(r))})),this.da.forEach((r=>{e.has(r)||n.push(new hT(r))})),n}ba(e){this.Ta=e.Ts,this.da=Me();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return _o.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class CN{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class NN{constructor(e){this.key=e,this.va=!1}}class IN{constructor(e,n,r,o,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Ca={},this.Fa=new To((m=>Mb(m)),Vh),this.Ma=new Map,this.xa=new Set,this.Oa=new ot(ye.comparator),this.Na=new Map,this.La=new Op,this.Ba={},this.ka=new Map,this.qa=yo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function DN(s,e,n=!0){const r=_T(s);let o;const u=r.Fa.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.Da()):o=await fT(r,e,n,!0),o}async function ON(s,e){const n=_T(s);await fT(n,e,!0,!1)}async function fT(s,e,n,r){const o=await eN(s.localStore,Ei(e)),u=o.targetId,d=s.sharedClientState.addLocalQueryTarget(u,n);let m;return r&&(m=await MN(s,e,u,d==="current",o.resumeToken)),s.isPrimaryClient&&n&&rT(s.remoteStore,o),m}async function MN(s,e,n,r,o){s.Ka=(A,x,j)=>(async function(G,F,se,le){let re=F.view.ma(se);re.ns&&(re=await P0(G.localStore,F.query,!1).then((({documents:R})=>F.view.ma(R,re))));const ee=le&&le.targetChanges.get(F.targetId),me=le&&le.targetMismatches.get(F.targetId)!=null,ne=F.view.applyChanges(re,G.isPrimaryClient,ee,me);return K0(G,F.targetId,ne.wa),ne.snapshot})(s,A,x,j);const u=await P0(s.localStore,e,!0),d=new RN(e,u.Ts),m=d.ma(u.documents),g=ru.createSynthesizedTargetChangeForCurrentChange(n,r&&s.onlineState!=="Offline",o),y=d.applyChanges(m,s.isPrimaryClient,g);K0(s,n,y.wa);const b=new CN(e,n,d);return s.Fa.set(e,b),s.Ma.has(n)?s.Ma.get(n).push(e):s.Ma.set(n,[e]),y.snapshot}async function kN(s,e,n){const r=Ae(s),o=r.Fa.get(e),u=r.Ma.get(o.targetId);if(u.length>1)return r.Ma.set(o.targetId,u.filter((d=>!Vh(d,e)))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await $m(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),n&&Vp(r.remoteStore,o.targetId),Xm(r,o.targetId)})).catch(tu)):(Xm(r,o.targetId),await $m(r.localStore,o.targetId,!0))}async function VN(s,e){const n=Ae(s),r=n.Fa.get(e),o=n.Ma.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Vp(n.remoteStore,r.targetId))}async function jN(s,e,n){const r=HN(s);try{const o=await(function(d,m){const g=Ae(d),y=at.now(),b=m.reduce(((j,K)=>j.add(K.key)),Me());let A,x;return g.persistence.runTransaction("Locally write mutations","readwrite",(j=>{let K=cs(),G=Me();return g.cs.getEntries(j,b).next((F=>{K=F,K.forEach(((se,le)=>{le.isValidDocument()||(G=G.add(se))}))})).next((()=>g.localDocuments.getOverlayedDocuments(j,K))).next((F=>{A=F;const se=[];for(const le of m){const re=sC(le,A.get(le.key).overlayedDocument);re!=null&&se.push(new pr(le.key,re,Sb(re.value.mapValue),Qn.exists(!0)))}return g.mutationQueue.addMutationBatch(j,y,se,m)})).next((F=>{x=F;const se=F.applyToLocalDocumentSet(A,G);return g.documentOverlayCache.saveOverlays(j,F.batchId,se)}))})).then((()=>({batchId:x.batchId,changes:jb(A)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(d,m,g){let y=d.Ba[d.currentUser.toKey()];y||(y=new ot(qe)),y=y.insert(m,g),d.Ba[d.currentUser.toKey()]=y})(r,o.batchId,n),await ou(r,o.changes),await qh(r.remoteStore)}catch(o){const u=zp(o,"Failed to persist write");n.reject(u)}}async function mT(s,e){const n=Ae(s);try{const r=await JC(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const d=n.Na.get(u);d&&($e(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.va=!0:o.modifiedDocuments.size>0?$e(d.va):o.removedDocuments.size>0&&($e(d.va),d.va=!1))})),await ou(n,r,e)}catch(r){await tu(r)}}function G0(s,e,n){const r=Ae(s);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.Fa.forEach(((u,d)=>{const m=d.view.Z_(e);m.snapshot&&o.push(m.snapshot)})),(function(d,m){const g=Ae(d);g.onlineState=m;let y=!1;g.queries.forEach(((b,A)=>{for(const x of A.j_)x.Z_(m)&&(y=!0)})),y&&Hp(g)})(r.eventManager,e),o.length&&r.Ca.d_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function UN(s,e,n){const r=Ae(s);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.Na.get(e),u=o&&o.key;if(u){let d=new ot(ye.comparator);d=d.insert(u,tn.newNoDocument(u,we.min()));const m=Me().add(u),g=new Lh(we.min(),new Map,new ot(qe),d,m);await mT(r,g),r.Oa=r.Oa.remove(u),r.Na.delete(e),Gp(r)}else await $m(r.localStore,e,!1).then((()=>Xm(r,e,n))).catch(tu)}async function PN(s,e){const n=Ae(s),r=e.batch.batchId;try{const o=await XC(n.localStore,e);gT(n,r,null),pT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ou(n,o)}catch(o){await tu(o)}}async function LN(s,e,n){const r=Ae(s);try{const o=await(function(d,m){const g=Ae(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let b;return g.mutationQueue.lookupMutationBatch(y,m).next((A=>($e(A!==null),b=A.keys(),g.mutationQueue.removeMutationBatch(y,A)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,b,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b))).next((()=>g.localDocuments.getDocuments(y,b)))}))})(r.localStore,e);gT(r,e,n),pT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ou(r,o)}catch(o){await tu(o)}}function pT(s,e){(s.ka.get(e)||[]).forEach((n=>{n.resolve()})),s.ka.delete(e)}function gT(s,e,n){const r=Ae(s);let o=r.Ba[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),r.Ba[r.currentUser.toKey()]=o}}function Xm(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Ma.get(e))s.Fa.delete(r),n&&s.Ca.$a(r,n);s.Ma.delete(e),s.isPrimaryClient&&s.La.gr(e).forEach((r=>{s.La.containsKey(r)||yT(s,r)}))}function yT(s,e){s.xa.delete(e.path.canonicalString());const n=s.Oa.get(e);n!==null&&(Vp(s.remoteStore,n),s.Oa=s.Oa.remove(e),s.Na.delete(n),Gp(s))}function K0(s,e,n){for(const r of n)r instanceof hT?(s.La.addReference(r.key,e),zN(s,r)):r instanceof dT?(de("SyncEngine","Document no longer in limbo: "+r.key),s.La.removeReference(r.key,e),s.La.containsKey(r.key)||yT(s,r.key)):be()}function zN(s,e){const n=e.key,r=n.path.canonicalString();s.Oa.get(n)||s.xa.has(r)||(de("SyncEngine","New document in limbo: "+n),s.xa.add(r),Gp(s))}function Gp(s){for(;s.xa.size>0&&s.Oa.size<s.maxConcurrentLimboResolutions;){const e=s.xa.values().next().value;s.xa.delete(e);const n=new ye(it.fromString(e)),r=s.qa.next();s.Na.set(r,new NN(n)),s.Oa=s.Oa.insert(n,r),rT(s.remoteStore,new ar(Ei(kh(n.path)),r,"TargetPurposeLimboResolution",bp.oe))}}async function ou(s,e,n){const r=Ae(s),o=[],u=[],d=[];r.Fa.isEmpty()||(r.Fa.forEach(((m,g)=>{d.push(r.Ka(g,e,n).then((y=>{var b;if((y||n)&&r.isPrimaryClient){const A=y?!y.fromCache:(b=n==null?void 0:n.targetChanges.get(g.targetId))===null||b===void 0?void 0:b.current;r.sharedClientState.updateQueryState(g.targetId,A?"current":"not-current")}if(y){o.push(y);const A=kp.Wi(g.targetId,y);u.push(A)}})))})),await Promise.all(d),r.Ca.d_(o),await(async function(g,y){const b=Ae(g);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(A=>W.forEach(y,(x=>W.forEach(x.$i,(j=>b.persistence.referenceDelegate.addReference(A,x.targetId,j))).next((()=>W.forEach(x.Ui,(j=>b.persistence.referenceDelegate.removeReference(A,x.targetId,j)))))))))}catch(A){if(!nu(A))throw A;de("LocalStore","Failed to update sequence numbers: "+A)}for(const A of y){const x=A.targetId;if(!A.fromCache){const j=b.os.get(x),K=j.snapshotVersion,G=j.withLastLimboFreeSnapshotVersion(K);b.os=b.os.insert(x,G)}}})(r.localStore,u))}async function BN(s,e){const n=Ae(s);if(!n.currentUser.isEqual(e)){de("SyncEngine","User change. New user:",e.toKey());const r=await tT(n.localStore,e);n.currentUser=e,(function(u,d){u.ka.forEach((m=>{m.forEach((g=>{g.reject(new ue(Z.CANCELLED,d))}))})),u.ka.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ou(n,r.hs)}}function qN(s,e){const n=Ae(s),r=n.Na.get(e);if(r&&r.va)return Me().add(r.key);{let o=Me();const u=n.Ma.get(e);if(!u)return o;for(const d of u){const m=n.Fa.get(d);o=o.unionWith(m.view.Va)}return o}}function _T(s){const e=Ae(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=mT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=UN.bind(null,e),e.Ca.d_=SN.bind(null,e.eventManager),e.Ca.$a=xN.bind(null,e.eventManager),e}function HN(s){const e=Ae(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LN.bind(null,e),e}class Eh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return YC(this.persistence,new QC,e.initialUser,this.serializer)}Ga(e){return new FC(Mp.Zr,this.serializer)}Wa(e){return new nN}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Eh.provider={build:()=>new Eh};class Jm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>G0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=BN.bind(null,this.syncEngine),await TN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new AN})()}createDatastore(e){const n=zh(e.databaseInfo.databaseId),r=(function(u){return new aN(u)})(e.databaseInfo);return(function(u,d,m,g){return new uN(u,d,m,g)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,o,u,d,m){return new hN(r,o,u,d,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>G0(this.syncEngine,n,0)),(function(){return z0.D()?new z0:new iN})())}createSyncEngine(e,n){return(function(o,u,d,m,g,y,b){const A=new IN(o,u,d,m,g,y);return b&&(A.Qa=!0),A})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const u=Ae(o);de("RemoteStore","RemoteStore shutting down."),u.L_.add(5),await au(u),u.k_.shutdown(),u.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Jm.provider={build:()=>new Jm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):us("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,n,r,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=en.UNAUTHENTICATED,this.clientId=Tb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async d=>{de("FirestoreClient","Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(r,(d=>(de("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ss;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=zp(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function wm(s,e){s.asyncQueue.verifyOperationInProgress(),de("FirestoreClient","Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let r=n.initialUser;s.setCredentialChangeListener((async o=>{r.isEqual(o)||(await tT(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function Q0(s,e){s.asyncQueue.verifyOperationInProgress();const n=await GN(s);de("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((r=>B0(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,o)=>B0(e.remoteStore,o))),s._onlineComponents=e}async function GN(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){de("FirestoreClient","Using user provided OfflineComponentProvider");try{await wm(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Z.FAILED_PRECONDITION||o.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;ho("Error using user provided cache. Falling back to memory cache: "+n),await wm(s,new Eh)}}else de("FirestoreClient","Using default OfflineComponentProvider"),await wm(s,new Eh);return s._offlineComponents}async function vT(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(de("FirestoreClient","Using user provided OnlineComponentProvider"),await Q0(s,s._uninitializedComponentsProvider._online)):(de("FirestoreClient","Using default OnlineComponentProvider"),await Q0(s,new Jm))),s._onlineComponents}function KN(s){return vT(s).then((e=>e.syncEngine))}async function bh(s){const e=await vT(s),n=e.eventManager;return n.onListen=DN.bind(null,e.syncEngine),n.onUnlisten=kN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ON.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=VN.bind(null,e.syncEngine),n}function QN(s,e,n={}){const r=new ss;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,m,g,y){const b=new Kp({next:x=>{b.Za(),d.enqueueAndForget((()=>qp(u,A)));const j=x.docs.has(m);!j&&x.fromCache?y.reject(new ue(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&x.fromCache&&g&&g.source==="server"?y.reject(new ue(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(x)},error:x=>y.reject(x)}),A=new Fp(kh(m.path),b,{includeMetadataChanges:!0,_a:!0});return Bp(u,A)})(await bh(s),s.asyncQueue,e,n,r))),r.promise}function $N(s,e,n={}){const r=new ss;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,m,g,y){const b=new Kp({next:x=>{b.Za(),d.enqueueAndForget((()=>qp(u,A))),x.fromCache&&g.source==="server"?y.reject(new ue(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(x)},error:x=>y.reject(x)}),A=new Fp(m,b,{includeMetadataChanges:!0,_a:!0});return Bp(u,A)})(await bh(s),s.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(s,e,n){if(!n)throw new ue(Z.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function YN(s,e,n,r){if(e===!0&&r===!0)throw new ue(Z.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function Y0(s){if(!ye.isDocumentKey(s))throw new ue(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function X0(s){if(ye.isDocumentKey(s))throw new ue(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Hh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":be()}function En(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ue(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Hh(s);throw new ue(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ue(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ue(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}YN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ET((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new ue(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new ue(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new ue(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fh{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new J0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new J0(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new dR;switch(r.type){case"firstParty":return new gR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ue(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=$0.get(n);r&&(de("ComponentProvider","Removing Datastore"),$0.delete(n),r.terminate())})(this),Promise.resolve()}}function XN(s,e,n,r={}){var o;const u=(s=En(s,Fh))._getSettings(),d=`${e}:${n}`;if(u.host!=="firestore.googleapis.com"&&u.host!==d&&ho("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),s._setSettings(Object.assign(Object.assign({},u),{host:d,ssl:!1})),r.mockUserToken){let m,g;if(typeof r.mockUserToken=="string")m=r.mockUserToken,g=en.MOCK_USER;else{m=DE(r.mockUserToken,(o=s._app)===null||o===void 0?void 0:o.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new ue(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new en(y)}s._authCredentials=new fR(new bb(m,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ua(this.firestore,e,this._query)}}class nn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ur(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nn(this.firestore,e,this._key)}}class ur extends ua{constructor(e,n,r){super(e,n,kh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nn(this.firestore,null,new ye(e))}withConverter(e){return new ur(this.firestore,e,this._path)}}function Wi(s,e,...n){if(s=We(s),bT("collection","path",e),s instanceof Fh){const r=it.fromString(e,...n);return X0(r),new ur(s,null,r)}{if(!(s instanceof nn||s instanceof ur))throw new ue(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(it.fromString(e,...n));return X0(r),new ur(s.firestore,null,r)}}function Dn(s,e,...n){if(s=We(s),arguments.length===1&&(e=Tb.newId()),bT("doc","path",e),s instanceof Fh){const r=it.fromString(e,...n);return Y0(r),new nn(s,null,new ye(r))}{if(!(s instanceof nn||s instanceof ur))throw new ue(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(it.fromString(e,...n));return Y0(r),new nn(s.firestore,s instanceof ur?s.converter:null,new ye(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new iT(this,"async_queue_retry"),this.Vu=()=>{const r=Tm();r&&de("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Tm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Tm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const n=new ss;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!nu(e))throw e;de("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const n=this.mu.then((()=>(this.du=!0,e().catch((r=>{this.Eu=r,this.du=!1;const o=(function(d){let m=d.message||"";return d.stack&&(m=d.stack.includes(d.message)?d.stack:d.message+`
`+d.stack),m})(r);throw us("INTERNAL UNHANDLED ERROR: ",o),r})).then((r=>(this.du=!1,r))))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const o=Lp.createAndSchedule(this,e,n,r,(u=>this.yu(u)));return this.Tu.push(o),o}fu(){this.Eu&&be()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function W0(s){return(function(n,r){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1})(s,["next","error","complete"])}class hs extends Fh{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new Z0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Z0(e),this._firestoreClient=void 0,await e}}}function JN(s,e){const n=typeof s=="object"?s:Nh(),r=typeof s=="string"?s:"(default)",o=Jl(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=ap("firestore");u&&XN(o,...u)}return o}function Gh(s){if(s._terminated)throw new ue(Z.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||ZN(s),s._firestoreClient}function ZN(s){var e,n,r;const o=s._freezeSettings(),u=(function(m,g,y,b){return new NR(m,g,y,b.host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,ET(b.experimentalLongPollingOptions),b.useFetchStreams)})(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,o);s._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(s._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),s._firestoreClient=new FN(s._authCredentials,s._appCheckCredentials,s._queue,u,s._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vo(Yt.fromBase64String(e))}catch(n){throw new ue(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new vo(Yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ue(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ue(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ue(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=/^__.*__$/;class eI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new pr(e,this.data,this.fieldMask,n,this.fieldTransforms):new su(e,this.data,n,this.fieldTransforms)}}class TT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new pr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function wT(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be()}}class $h{constructor(e,n,r,o,u,d){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.vu(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new $h(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Fu({path:r,xu:!1});return o.Ou(e),o}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Fu({path:r,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Th(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(wT(this.Cu)&&WN.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class tI{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||zh(e)}Qu(e,n,r,o=!1){return new $h({Cu:e,methodName:n,qu:r,path:Qt.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yh(s){const e=s._freezeSettings(),n=zh(s._databaseId);return new tI(s._databaseId,!!e.ignoreUndefinedProperties,n)}function AT(s,e,n,r,o,u={}){const d=s.Qu(u.merge||u.mergeFields?2:0,e,n,o);Xp("Data must be an object, but it was:",d,r);const m=ST(r,d);let g,y;if(u.merge)g=new On(d.fieldMask),y=d.fieldTransforms;else if(u.mergeFields){const b=[];for(const A of u.mergeFields){const x=Zm(e,A,n);if(!d.contains(x))throw new ue(Z.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);RT(b,x)||b.push(x)}g=new On(b),y=d.fieldTransforms.filter((A=>g.covers(A.field)))}else g=null,y=d.fieldTransforms;return new eI(new vn(m),g,y)}class Xh extends Qh{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xh}}function nI(s,e,n){return new $h({Cu:3,qu:e.settings.qu,methodName:s._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Yp extends Qh{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=nI(this,e,!0),r=this.Ku.map((u=>Ao(u,n))),o=new go(r);return new eC(e.path,o)}isEqual(e){return e instanceof Yp&&zl(this.Ku,e.Ku)}}function iI(s,e,n,r){const o=s.Qu(1,e,n);Xp("Data must be an object, but it was:",o,r);const u=[],d=vn.empty();oa(r,((g,y)=>{const b=Jp(e,g,n);y=We(y);const A=o.Nu(b);if(y instanceof Xh)u.push(b);else{const x=Ao(y,A);x!=null&&(u.push(b),d.set(b,x))}}));const m=new On(u);return new TT(d,m,o.fieldTransforms)}function sI(s,e,n,r,o,u){const d=s.Qu(1,e,n),m=[Zm(e,r,n)],g=[o];if(u.length%2!=0)throw new ue(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<u.length;x+=2)m.push(Zm(e,u[x])),g.push(u[x+1]);const y=[],b=vn.empty();for(let x=m.length-1;x>=0;--x)if(!RT(y,m[x])){const j=m[x];let K=g[x];K=We(K);const G=d.Nu(j);if(K instanceof Xh)y.push(j);else{const F=Ao(K,G);F!=null&&(y.push(j),b.set(j,F))}}const A=new On(y);return new TT(b,A,d.fieldTransforms)}function rI(s,e,n,r=!1){return Ao(n,s.Qu(r?4:3,e))}function Ao(s,e){if(xT(s=We(s)))return Xp("Unsupported field value:",e,s),ST(s,e);if(s instanceof Qh)return(function(r,o){if(!wT(o.Cu))throw o.Bu(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(r,o){const u=[];let d=0;for(const m of r){let g=Ao(m,o.Lu(d));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),d++}return{arrayValue:{values:u}}})(s,e)}return(function(r,o){if((r=We(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return JR(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=at.fromDate(r);return{timestampValue:_h(o.serializer,u)}}if(r instanceof at){const u=new at(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_h(o.serializer,u)}}if(r instanceof Qp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof vo)return{bytesValue:$b(o.serializer,r._byteString)};if(r instanceof nn){const u=o.databaseId,d=r.firestore._databaseId;if(!d.isEqual(u))throw o.Bu(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Dp(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof $p)return(function(d,m){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:d.toArray().map((g=>{if(typeof g!="number")throw m.Bu("VectorValues must only contain numeric values.");return Rp(m.serializer,g)}))}}}}}})(r,o);throw o.Bu(`Unsupported field value: ${Hh(r)}`)})(s,e)}function ST(s,e){const n={};return wb(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):oa(s,((r,o)=>{const u=Ao(o,e.Mu(r));u!=null&&(n[r]=u)})),{mapValue:{fields:n}}}function xT(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof at||s instanceof Qp||s instanceof vo||s instanceof nn||s instanceof Qh||s instanceof $p)}function Xp(s,e,n){if(!xT(n)||!(function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)})(n)){const r=Hh(n);throw r==="an object"?e.Bu(s+" a custom object"):e.Bu(s+" "+r)}}function Zm(s,e,n){if((e=We(e))instanceof Kh)return e._internalPath;if(typeof e=="string")return Jp(s,e);throw Th("Field path arguments must be of type string or ",s,!1,void 0,n)}const aI=new RegExp("[~\\*/\\[\\]]");function Jp(s,e,n){if(e.search(aI)>=0)throw Th(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Kh(...e.split("."))._internalPath}catch{throw Th(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Th(s,e,n,r,o){const u=r&&!r.isEmpty(),d=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||d)&&(g+=" (found",u&&(g+=` in field ${r}`),d&&(g+=` in document ${o}`),g+=")"),new ue(Z.INVALID_ARGUMENT,m+s+g)}function RT(s,e){return s.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e,n,r,o,u){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new nn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new oI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Zp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class oI extends CT{data(){return super.data()}}function Zp(s,e){return typeof e=="string"?Jp(s,e):e instanceof Kh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ue(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wp{}class lI extends Wp{}function oo(s,e,...n){let r=[];e instanceof Wp&&r.push(e),r=r.concat(n),(function(u){const d=u.filter((g=>g instanceof eg)).length,m=u.filter((g=>g instanceof Jh)).length;if(d>1||d>0&&m>0)throw new ue(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)s=o._apply(s);return s}class Jh extends lI{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Jh(e,n,r)}_apply(e){const n=this._parse(e);return IT(e._query,n),new ua(e.firestore,e.converter,qm(e._query,n))}_parse(e){const n=Yh(e.firestore);return(function(u,d,m,g,y,b,A){let x;if(y.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new ue(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){tE(A,b);const j=[];for(const K of A)j.push(eE(g,u,K));x={arrayValue:{values:j}}}else x=eE(g,u,A)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||tE(A,b),x=rI(m,d,A,b==="in"||b==="not-in");return xt.create(y,b,x)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function lo(s,e,n){const r=e,o=Zp("where",s);return Jh._create(o,r,n)}class eg extends Wp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new eg(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:ni.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let d=o;const m=u.getFlattenedFilters();for(const g of m)IT(d,g),d=qm(d,g)})(e._query,n),new ua(e.firestore,e.converter,qm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function eE(s,e,n){if(typeof(n=We(n))=="string"){if(n==="")throw new ue(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ob(e)&&n.indexOf("/")!==-1)throw new ue(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(it.fromString(n));if(!ye.isDocumentKey(r))throw new ue(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return b0(s,new ye(r))}if(n instanceof nn)return b0(s,n._key);throw new ue(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hh(n)}.`)}function tE(s,e){if(!Array.isArray(s)||s.length===0)throw new ue(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function IT(s,e){const n=(function(o,u){for(const d of o)for(const m of d.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ue(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ue(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class uI{convertValue(e,n="none"){switch(sa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ia(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw be()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return oa(e,((o,u)=>{r[o]=this.convertValue(u,n)})),r}convertVectorValue(e){var n,r,o;const u=(o=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map((d=>_t(d.doubleValue)));return new $p(u)}convertGeoPoint(e){return new Qp(_t(e.latitude),_t(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=wp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Fl(e));default:return null}}convertTimestamp(e){const n=dr(e);return new at(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=it.fromString(e);$e(eT(r));const o=new Gl(r.get(1),r.get(3)),u=new ye(r.popFirst(5));return o.isEqual(n)||us(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(s,e,n){let r;return r=s?s.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class OT extends CT{constructor(e,n,r,o,u,d){super(e,n,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new sh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Zp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class sh extends OT{data(e={}){return super.data(e)}}class MT{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Ml(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new sh(this._firestore,this._userDataWriter,r.key,r,new Ml(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ue(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((m=>{const g=new sh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Ml(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new sh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Ml(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,b=-1;return m.type!==0&&(y=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),b=d.indexOf(m.doc.key)),{type:cI(m.type),doc:g,oldIndex:y,newIndex:b}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function cI(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(s){s=En(s,nn);const e=En(s.firestore,hs);return QN(Gh(e),s._key).then((n=>kT(e,s,n)))}class tg extends uI{constructor(e){super(),this.firestore=e}convertBytes(e){return new vo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new nn(this.firestore,null,n)}}function Wm(s){s=En(s,ua);const e=En(s.firestore,hs),n=Gh(e),r=new tg(e);return NT(s._query),$N(n,s._query).then((o=>new MT(e,r,s,o)))}function dI(s,e,n){s=En(s,nn);const r=En(s.firestore,hs),o=DT(s.converter,e);return Zh(r,[AT(Yh(r),"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,Qn.none())])}function Jr(s,e,n,...r){s=En(s,nn);const o=En(s.firestore,hs),u=Yh(o);let d;return d=typeof(e=We(e))=="string"||e instanceof Kh?sI(u,"updateDoc",s._key,e,n,r):iI(u,"updateDoc",s._key,e),Zh(o,[d.toMutation(s._key,Qn.exists(!0))])}function wh(s){return Zh(En(s.firestore,hs),[new Cp(s._key,Qn.none())])}function ep(s,e){const n=En(s.firestore,hs),r=Dn(s),o=DT(s.converter,e);return Zh(n,[AT(Yh(s.firestore),"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,Qn.exists(!1))]).then((()=>r))}function Ah(s,...e){var n,r,o;s=We(s);let u={includeMetadataChanges:!1,source:"default"},d=0;typeof e[d]!="object"||W0(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(W0(e[d])){const A=e[d];e[d]=(n=A.next)===null||n===void 0?void 0:n.bind(A),e[d+1]=(r=A.error)===null||r===void 0?void 0:r.bind(A),e[d+2]=(o=A.complete)===null||o===void 0?void 0:o.bind(A)}let g,y,b;if(s instanceof nn)y=En(s.firestore,hs),b=kh(s._key.path),g={next:A=>{e[d]&&e[d](kT(y,s,A))},error:e[d+1],complete:e[d+2]};else{const A=En(s,ua);y=En(A.firestore,hs),b=A._query;const x=new tg(y);g={next:j=>{e[d]&&e[d](new MT(y,x,A,j))},error:e[d+1],complete:e[d+2]},NT(s._query)}return(function(x,j,K,G){const F=new Kp(G),se=new Fp(j,F,K);return x.asyncQueue.enqueueAndForget((async()=>Bp(await bh(x),se))),()=>{F.Za(),x.asyncQueue.enqueueAndForget((async()=>qp(await bh(x),se)))}})(Gh(y),b,m,g)}function Zh(s,e){return(function(r,o){const u=new ss;return r.asyncQueue.enqueueAndForget((async()=>jN(await KN(r),o,u))),u.promise})(Gh(s),e)}function kT(s,e,n){const r=n.docs.get(e._key),o=new tg(s);return new OT(s,o,e._key,r,new Ml(n.hasPendingWrites,n.fromCache),e.converter)}function fI(...s){return new Yp("arrayUnion",s)}(function(e,n=!0){(function(o){bo=o})(aa),cr(new as("firestore",((r,{instanceIdentifier:o,options:u})=>{const d=r.getProvider("app").getImmediate(),m=new hs(new mR(r.getProvider("auth-internal")),new _R(r.getProvider("app-check-internal")),(function(y,b){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ue(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gl(y.options.projectId,b)})(d,o),d);return u=Object.assign({useFetchStreams:n},u),m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),Kn(g0,"4.7.3",e),Kn(g0,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI="type.googleapis.com/google.protobuf.Int64Value",pI="type.googleapis.com/google.protobuf.UInt64Value";function VT(s,e){const n={};for(const r in s)s.hasOwnProperty(r)&&(n[r]=e(s[r]));return n}function tp(s){if(s==null)return null;if(s instanceof Number&&(s=s.valueOf()),typeof s=="number"&&isFinite(s)||s===!0||s===!1||Object.prototype.toString.call(s)==="[object String]")return s;if(s instanceof Date)return s.toISOString();if(Array.isArray(s))return s.map(e=>tp(e));if(typeof s=="function"||typeof s=="object")return VT(s,e=>tp(e));throw new Error("Data cannot be encoded in JSON: "+s)}function Sh(s){if(s==null)return s;if(s["@type"])switch(s["@type"]){case mI:case pI:{const e=Number(s.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+s);return e}default:throw new Error("Data cannot be decoded from JSON: "+s)}return Array.isArray(s)?s.map(e=>Sh(e)):typeof s=="function"||typeof s=="object"?VT(s,e=>Sh(e)):s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class uo extends ii{constructor(e,n,r){super(`${ng}/${e}`,n||""),this.details=r}}function gI(s){if(s>=200&&s<300)return"ok";switch(s){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function yI(s,e){let n=gI(s),r=n,o;try{const u=e&&e.error;if(u){const d=u.status;if(typeof d=="string"){if(!nE[d])return new uo("internal","internal");n=nE[d],r=d}const m=u.message;typeof m=="string"&&(r=m),o=u.details,o!==void 0&&(o=Sh(o))}}catch{}return n==="ok"?null:new uo(n,r,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(o=>this.auth=o,()=>{}),this.messaging||n.get().then(o=>this.messaging=o,()=>{}),this.appCheck||r.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),o=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:o}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np="us-central1";function vI(s){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new uo("deadline-exceeded","deadline-exceeded"))},s)}),cancel:()=>{e&&clearTimeout(e)}}}class EI{constructor(e,n,r,o,u=np,d){this.app=e,this.fetchImpl=d,this.emulatorOrigin=null,this.contextProvider=new _I(n,r,o),this.cancelAllRequests=new Promise(m=>{this.deleteService=()=>Promise.resolve(m())});try{const m=new URL(u);this.customDomain=m.origin+(m.pathname==="/"?"":m.pathname),this.region=np}catch{this.customDomain=null,this.region=u}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function bI(s,e,n){s.emulatorOrigin=`http://${e}:${n}`}function TI(s,e,n){return(r=>AI(s,e,r,{}))}async function wI(s,e,n,r){n["Content-Type"]="application/json";let o;try{o=await r(s,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let u=null;try{u=await o.json()}catch{}return{status:o.status,json:u}}function AI(s,e,n,r){const o=s._url(e);return SI(s,o,n,r)}async function SI(s,e,n,r){n=tp(n);const o={data:n},u={},d=await s.contextProvider.getContext(r.limitedUseAppCheckTokens);d.authToken&&(u.Authorization="Bearer "+d.authToken),d.messagingToken&&(u["Firebase-Instance-ID-Token"]=d.messagingToken),d.appCheckToken!==null&&(u["X-Firebase-AppCheck"]=d.appCheckToken);const m=r.timeout||7e4,g=vI(m),y=await Promise.race([wI(e,o,u,s.fetchImpl),g.promise,s.cancelAllRequests]);if(g.cancel(),!y)throw new uo("cancelled","Firebase Functions instance was deleted.");const b=yI(y.status,y.json);if(b)throw b;if(!y.json)throw new uo("internal","Response is not valid JSON object.");let A=y.json.data;if(typeof A>"u"&&(A=y.json.result),typeof A>"u")throw new uo("internal","Response is missing data field.");return{data:Sh(A)}}const iE="@firebase/functions",sE="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI="auth-internal",RI="app-check-internal",CI="messaging-internal";function NI(s,e){const n=(r,{instanceIdentifier:o})=>{const u=r.getProvider("app").getImmediate(),d=r.getProvider(xI),m=r.getProvider(CI),g=r.getProvider(RI);return new EI(u,d,m,g,o,s)};cr(new as(ng,n,"PUBLIC").setMultipleInstances(!0)),Kn(iE,sE,e),Kn(iE,sE,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(s=Nh(),e=np){const r=Jl(We(s),ng).getImmediate({identifier:e}),o=ap("functions");return o&&II(r,...o),r}function II(s,e,n){bI(We(s),e,n)}function UT(s,e,n){return TI(We(s),e)}NI(fetch.bind(self));var DI="firebase",OI="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kn(DI,OI,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT="firebasestorage.googleapis.com",LT="storageBucket",MI=120*1e3,kI=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft extends ii{constructor(e,n,r=0){super(Am(e),`Firebase Storage: ${n} (${Am(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ft.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Am(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var dt;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(dt||(dt={}));function Am(s){return"storage/"+s}function ig(){const s="An unknown error occurred, please check the error payload for server response.";return new ft(dt.UNKNOWN,s)}function VI(s){return new ft(dt.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function jI(s){return new ft(dt.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function UI(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ft(dt.UNAUTHENTICATED,s)}function PI(){return new ft(dt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function LI(s){return new ft(dt.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function zI(){return new ft(dt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function BI(){return new ft(dt.CANCELED,"User canceled the upload/download.")}function qI(s){return new ft(dt.INVALID_URL,"Invalid URL '"+s+"'.")}function HI(s){return new ft(dt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function FI(){return new ft(dt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+LT+"' property when initializing the app?")}function GI(){return new ft(dt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function KI(){return new ft(dt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function QI(s){return new ft(dt.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function ip(s){return new ft(dt.INVALID_ARGUMENT,s)}function zT(){return new ft(dt.APP_DELETED,"The Firebase app was deleted.")}function $I(s){return new ft(dt.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ll(s,e){return new ft(dt.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function Nl(s){throw new ft(dt.INTERNAL_ERROR,"Internal error: "+s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Mn.makeFromUrl(e,n)}catch{return new Mn(e,"")}if(r.path==="")return r;throw HI(e)}static makeFromUrl(e,n){let r=null;const o="([A-Za-z0-9.\\-_]+)";function u(ee){ee.path.charAt(ee.path.length-1)==="/"&&(ee.path_=ee.path_.slice(0,-1))}const d="(/(.*))?$",m=new RegExp("^gs://"+o+d,"i"),g={bucket:1,path:3};function y(ee){ee.path_=decodeURIComponent(ee.path)}const b="v[A-Za-z0-9_]+",A=n.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",j=new RegExp(`^https?://${A}/${b}/b/${o}/o${x}`,"i"),K={bucket:1,path:3},G=n===PT?"(?:storage.googleapis.com|storage.cloud.google.com)":n,F="([^?#]*)",se=new RegExp(`^https?://${G}/${o}/${F}`,"i"),re=[{regex:m,indices:g,postModify:u},{regex:j,indices:K,postModify:y},{regex:se,indices:{bucket:1,path:2},postModify:y}];for(let ee=0;ee<re.length;ee++){const me=re[ee],ne=me.regex.exec(e);if(ne){const R=ne[me.indices.bucket];let S=ne[me.indices.path];S||(S=""),r=new Mn(R,S),me.postModify(r);break}}if(r==null)throw qI(e);return r}}class YI{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(s,e,n){let r=1,o=null,u=null,d=!1,m=0;function g(){return m===2}let y=!1;function b(...F){y||(y=!0,e.apply(null,F))}function A(F){o=setTimeout(()=>{o=null,s(j,g())},F)}function x(){u&&clearTimeout(u)}function j(F,...se){if(y){x();return}if(F){x(),b.call(null,F,...se);return}if(g()||d){x(),b.call(null,F,...se);return}r<64&&(r*=2);let re;m===1?(m=2,re=0):re=(r+Math.random())*1e3,A(re)}let K=!1;function G(F){K||(K=!0,x(),!y&&(o!==null?(F||(m=2),clearTimeout(o),A(0)):F||(m=1)))}return A(0),u=setTimeout(()=>{d=!0,G(!0)},n),G}function JI(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(s){return s!==void 0}function WI(s){return typeof s=="object"&&!Array.isArray(s)}function sg(s){return typeof s=="string"||s instanceof String}function rE(s){return rg()&&s instanceof Blob}function rg(){return typeof Blob<"u"}function aE(s,e,n,r){if(r<e)throw ip(`Invalid value for '${s}'. Expected ${e} or greater.`);if(r>n)throw ip(`Invalid value for '${s}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(s,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${s}`}function BT(s){const e=encodeURIComponent;let n="?";for(const r in s)if(s.hasOwnProperty(r)){const o=e(r)+"="+e(s[r]);n=n+o+"&"}return n=n.slice(0,-1),n}var ea;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(ea||(ea={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(s,e){const n=s>=500&&s<600,o=[408,429].indexOf(s)!==-1,u=e.indexOf(s)!==-1;return n||o||u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e,n,r,o,u,d,m,g,y,b,A,x=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=d,this.callback_=m,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=b,this.connectionFactory_=A,this.retry=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((j,K)=>{this.resolve_=j,this.reject_=K,this.start_()})}start_(){const e=(r,o)=>{if(o){r(!1,new Fc(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const d=m=>{const g=m.loaded,y=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&u.addUploadProgressListener(d),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(d),this.pendingConnection_=null;const m=u.getErrorCode()===ea.NO_ERROR,g=u.getStatus();if(!m||eD(g,this.additionalRetryCodes_)&&this.retry){const b=u.getErrorCode()===ea.ABORT;r(!1,new Fc(!1,null,b));return}const y=this.successCodes_.indexOf(g)!==-1;r(!0,new Fc(y,u))})},n=(r,o)=>{const u=this.resolve_,d=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(m,m.getResponse());ZI(g)?u(g):u()}catch(g){d(g)}else if(m!==null){const g=ig();g.serverResponse=m.getErrorText(),this.errorCallback_?d(this.errorCallback_(m,g)):d(g)}else if(o.canceled){const g=this.appDelete_?zT():BI();d(g)}else{const g=zI();d(g)}};this.canceled_?n(!1,new Fc(!1,null,!0)):this.backoffId_=XI(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&JI(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Fc{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function nD(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function iD(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function sD(s,e){e&&(s["X-Firebase-GMPID"]=e)}function rD(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function aD(s,e,n,r,o,u,d=!0){const m=BT(s.urlParams),g=s.url+m,y=Object.assign({},s.headers);return sD(y,e),nD(y,n),iD(y,u),rD(y,r),new tD(g,s.method,y,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,o,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function lD(...s){const e=oD();if(e!==void 0){const n=new e;for(let r=0;r<s.length;r++)n.append(s[r]);return n.getBlob()}else{if(rg())return new Blob(s);throw new ft(dt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function uD(s,e,n){return s.webkitSlice?s.webkitSlice(e,n):s.mozSlice?s.mozSlice(e,n):s.slice?s.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(s){if(typeof atob>"u")throw QI("base-64");return atob(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Sm{constructor(e,n){this.data=e,this.contentType=n||null}}function hD(s,e){switch(s){case _i.RAW:return new Sm(qT(e));case _i.BASE64:case _i.BASE64URL:return new Sm(HT(s,e));case _i.DATA_URL:return new Sm(fD(e),mD(e))}throw ig()}function qT(s){const e=[];for(let n=0;n<s.length;n++){let r=s.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<s.length-1&&(s.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const u=r,d=s.charCodeAt(++n);r=65536|(u&1023)<<10|d&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function dD(s){let e;try{e=decodeURIComponent(s)}catch{throw Ll(_i.DATA_URL,"Malformed data URL.")}return qT(e)}function HT(s,e){switch(s){case _i.BASE64:{const o=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(o||u)throw Ll(s,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case _i.BASE64URL:{const o=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(o||u)throw Ll(s,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=cD(e)}catch(o){throw o.message.includes("polyfill")?o:Ll(s,"Invalid character found")}const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r}class FT{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Ll(_i.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=pD(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function fD(s){const e=new FT(s);return e.base64?HT(_i.BASE64,e.rest):dD(e.rest)}function mD(s){return new FT(s).contentType}function pD(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,n){let r=0,o="";rE(e)?(this.data_=e,r=e.size,o=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,n){if(rE(this.data_)){const r=this.data_,o=uD(r,e,n);return o===null?null:new rr(o)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new rr(r,!0)}}static getBlob(...e){if(rg()){const n=e.map(r=>r instanceof rr?r.data_:r);return new rr(lD.apply(null,n))}else{const n=e.map(d=>sg(d)?hD(_i.RAW,d).data:d.data_);let r=0;n.forEach(d=>{r+=d.byteLength});const o=new Uint8Array(r);let u=0;return n.forEach(d=>{for(let m=0;m<d.length;m++)o[u++]=d[m]}),new rr(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(s){let e;try{e=JSON.parse(s)}catch{return null}return WI(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gD(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function yD(s,e){const n=e.split("/").filter(r=>r.length>0).join("/");return s.length===0?n:s+"/"+n}function KT(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(s,e){return e}class hn{constructor(e,n,r,o){this.server=e,this.local=n||e,this.writable=!!r,this.xform=o||_D}}let Gc=null;function vD(s){return!sg(s)||s.length<2?s:KT(s)}function QT(){if(Gc)return Gc;const s=[];s.push(new hn("bucket")),s.push(new hn("generation")),s.push(new hn("metageneration")),s.push(new hn("name","fullPath",!0));function e(u,d){return vD(d)}const n=new hn("name");n.xform=e,s.push(n);function r(u,d){return d!==void 0?Number(d):d}const o=new hn("size");return o.xform=r,s.push(o),s.push(new hn("timeCreated")),s.push(new hn("updated")),s.push(new hn("md5Hash",null,!0)),s.push(new hn("cacheControl",null,!0)),s.push(new hn("contentDisposition",null,!0)),s.push(new hn("contentEncoding",null,!0)),s.push(new hn("contentLanguage",null,!0)),s.push(new hn("contentType",null,!0)),s.push(new hn("metadata","customMetadata",!0)),Gc=s,Gc}function ED(s,e){function n(){const r=s.bucket,o=s.fullPath,u=new Mn(r,o);return e._makeStorageReference(u)}Object.defineProperty(s,"ref",{get:n})}function bD(s,e,n){const r={};r.type="file";const o=n.length;for(let u=0;u<o;u++){const d=n[u];r[d.local]=d.xform(r,e[d.server])}return ED(r,s),r}function $T(s,e,n){const r=GT(e);return r===null?null:bD(s,r,n)}function TD(s,e,n,r){const o=GT(e);if(o===null||!sg(o.downloadTokens))return null;const u=o.downloadTokens;if(u.length===0)return null;const d=encodeURIComponent;return u.split(",").map(y=>{const b=s.bucket,A=s.fullPath,x="/b/"+d(b)+"/o/"+d(A),j=Wh(x,n,r),K=BT({alt:"media",token:y});return j+K})[0]}function wD(s,e){const n={},r=e.length;for(let o=0;o<r;o++){const u=e[o];u.writable&&(n[u.server]=s[u.local])}return JSON.stringify(n)}class ag{constructor(e,n,r,o){this.url=e,this.method=n,this.handler=r,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(s){if(!s)throw ig()}function AD(s,e){function n(r,o){const u=$T(s,o,e);return YT(u!==null),u}return n}function SD(s,e){function n(r,o){const u=$T(s,o,e);return YT(u!==null),TD(u,o,s.host,s._protocol)}return n}function XT(s){function e(n,r){let o;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?o=PI():o=UI():n.getStatus()===402?o=jI(s.bucket):n.getStatus()===403?o=LI(s.path):o=r,o.status=n.getStatus(),o.serverResponse=r.serverResponse,o}return e}function JT(s){const e=XT(s);function n(r,o){let u=e(r,o);return r.getStatus()===404&&(u=VI(s.path)),u.serverResponse=o.serverResponse,u}return n}function xD(s,e,n){const r=e.fullServerUrl(),o=Wh(r,s.host,s._protocol),u="GET",d=s.maxOperationRetryTime,m=new ag(o,u,SD(s,n),d);return m.errorHandler=JT(e),m}function RD(s,e){const n=e.fullServerUrl(),r=Wh(n,s.host,s._protocol),o="DELETE",u=s.maxOperationRetryTime;function d(g,y){}const m=new ag(r,o,d,u);return m.successCodes=[200,204],m.errorHandler=JT(e),m}function CD(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function ND(s,e,n){const r=Object.assign({},n);return r.fullPath=s.path,r.size=e.size(),r.contentType||(r.contentType=CD(null,e)),r}function ID(s,e,n,r,o){const u=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"};function m(){let re="";for(let ee=0;ee<2;ee++)re=re+Math.random().toString().slice(2);return re}const g=m();d["Content-Type"]="multipart/related; boundary="+g;const y=ND(e,r,o),b=wD(y,n),A="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+b+`\r
--`+g+`\r
Content-Type: `+y.contentType+`\r
\r
`,x=`\r
--`+g+"--",j=rr.getBlob(A,r,x);if(j===null)throw GI();const K={name:y.fullPath},G=Wh(u,s.host,s._protocol),F="POST",se=s.maxUploadRetryTime,le=new ag(G,F,AD(s,n),se);return le.urlParams=K,le.headers=d,le.body=j.uploadData(),le.errorHandler=XT(e),le}class DD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ea.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ea.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ea.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,o){if(this.sent_)throw Nl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const u in o)o.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,o[u].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Nl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Nl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Nl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Nl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class OD extends DD{initXhr(){this.xhr_.responseType="text"}}function og(){return new OD}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,n){this._service=e,n instanceof Mn?this._location=n:this._location=Mn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ra(e,n)}get root(){const e=new Mn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return KT(this._location.path)}get storage(){return this._service}get parent(){const e=gD(this._location.path);if(e===null)return null;const n=new Mn(this._location.bucket,e);return new ra(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw $I(e)}}function MD(s,e,n){s._throwIfRoot("uploadBytes");const r=ID(s.storage,s._location,QT(),new rr(e,!0),n);return s.storage.makeRequestWithTokens(r,og).then(o=>({metadata:o,ref:s}))}function kD(s){s._throwIfRoot("getDownloadURL");const e=xD(s.storage,s._location,QT());return s.storage.makeRequestWithTokens(e,og).then(n=>{if(n===null)throw KI();return n})}function VD(s){s._throwIfRoot("deleteObject");const e=RD(s.storage,s._location);return s.storage.makeRequestWithTokens(e,og)}function jD(s,e){const n=yD(s._location.path,e),r=new Mn(s._location.bucket,n);return new ra(s.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UD(s){return/^[A-Za-z]+:\/\//.test(s)}function PD(s,e){return new ra(s,e)}function ZT(s,e){if(s instanceof lg){const n=s;if(n._bucket==null)throw FI();const r=new ra(n,n._bucket);return e!=null?ZT(r,e):r}else return e!==void 0?jD(s,e):s}function LD(s,e){if(e&&UD(e)){if(s instanceof lg)return PD(s,e);throw ip("To use ref(service, url), the first argument must be a Storage instance.")}else return ZT(s,e)}function oE(s,e){const n=e==null?void 0:e[LT];return n==null?null:Mn.makeFromBucketSpec(n,s)}function zD(s,e,n,r={}){s.host=`${e}:${n}`,s._protocol="http";const{mockUserToken:o}=r;o&&(s._overrideAuthToken=typeof o=="string"?o:DE(o,s.app.options.projectId))}class lg{constructor(e,n,r,o,u){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=o,this._firebaseVersion=u,this._bucket=null,this._host=PT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=MI,this._maxUploadRetryTime=kI,this._requests=new Set,o!=null?this._bucket=Mn.makeFromBucketSpec(o,this._host):this._bucket=oE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Mn.makeFromBucketSpec(this._url,e):this._bucket=oE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){aE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){aE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ra(this,e)}_makeRequest(e,n,r,o,u=!0){if(this._deleted)return new YI(zT());{const d=aD(e,this._appId,r,o,n,this._firebaseVersion,u);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,n){const[r,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,o).getPromise()}}const lE="@firebase/storage",uE="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="storage";function cE(s,e,n){return s=We(s),MD(s,e,n)}function hE(s){return s=We(s),kD(s)}function dE(s){return s=We(s),VD(s)}function Kc(s,e){return s=We(s),LD(s,e)}function BD(s=Nh(),e){s=We(s);const r=Jl(s,WT).getImmediate({identifier:e}),o=ap("storage");return o&&qD(r,...o),r}function qD(s,e,n,r={}){zD(s,e,n,r)}function HD(s,{instanceIdentifier:e}){const n=s.getProvider("app").getImmediate(),r=s.getProvider("auth-internal"),o=s.getProvider("app-check-internal");return new lg(n,r,o,e,aa)}function FD(){cr(new as(WT,HD,"PUBLIC").setMultipleInstances(!0)),Kn(lE,uE,""),Kn(lE,uE,"esm2017")}FD();const GD={apiKey:"AIzaSyBAHNQFjjHmb6v_RLvsrILADsd11UIP8P8",authDomain:"montu-a4901.firebaseapp.com",projectId:"montu-a4901",storageBucket:"montu-a4901.firebasestorage.app",messagingSenderId:"1049228902413",appId:"Montu"},ug=kE(GD),$r=cR(ug),yt=JN(ug),Qc=BD(ug),ew=te.createContext(void 0),KD=({children:s})=>{const[e,n]=te.useState(null),[r,o]=te.useState([]),[u,d]=te.useState(!0);te.useEffect(()=>{let G;if(e&&e.role==="client"){const F=Dn(yt,"users",e.id);G=Ah(F,se=>{se.exists()&&n({id:se.id,...se.data()})})}return()=>{G&&G()}},[e==null?void 0:e.id]);const m=async G=>{console.log("--- Inicio de processUserLogin ---");const F=localStorage.getItem("postLoginAction");if(F&&(localStorage.removeItem("postLoginAction"),JSON.parse(F).action==="subscribe")){console.log("Acción post-login detectada: 'subscribe'. Redirigiendo a pago...");const le={id:G.uid,email:G.email,username:G.displayName||"Nuevo Entrenador",photoURL:G.photoURL,role:"trainer",subscriptionStatus:"pending"};n(le);try{const re=jT(),ne=(await UT(re,"createSubscription")({userId:le.id,userEmail:le.email,userName:le.username})).data;if(ne.checkoutUrl)window.location.href=ne.checkoutUrl;else throw new Error(ne.error||"No se recibió la URL de pago.")}catch(re){console.error("Error al iniciar el proceso de suscripción post-login:",re),In.error("Hubo un error al conectar con el sistema de pago."),await Lc($r)}return}console.log("Flujo de login normal (no es suscripción).");try{const se=oo(Wi(yt,"users"),lo("email","==",G.email)),le=await Wm(se);if(le.empty){In.error("Tu cuenta no está registrada. Contacta a tu entrenador."),await Lc($r);return}const re=le.docs[0],ee=re.data();let me=Dn(yt,"users",re.id);const ne={email:G.email,username:G.displayName||ee.username||"Usuario",photoURL:G.photoURL||null,...ee.role&&{role:ee.role},...ee.subscriptionStatus&&{subscriptionStatus:ee.subscriptionStatus},...ee.trainerId&&{trainerId:ee.trainerId}};if(re.id!==G.uid){console.warn("ADVERTENCIA: Iniciando MIGRACIÓN de ID.");const R=Dn(yt,"users",G.uid);await dI(R,ne),await wh(re.ref),me=R,console.log("MIGRACIÓN COMPLETA.")}else console.log("OK: IDs Coinciden. Actualizando documento."),await Jr(me,ne);n({id:me.id,...ne}),console.log("SUCCESS: Usuario establecido en el contexto.")}catch(se){console.error("Error al procesar el inicio de sesión:",se.message||se),In.error(`Error de autenticación/DB. Se cerró la sesión. Detalle: ${se.code||"permission-denied"}`),await Lc($r)}};te.useEffect(()=>{const G=e2($r,async F=>{F?e||await m(F):n(null),d(!1)});return()=>G()},[]),te.useEffect(()=>{if(e&&e.role==="trainer"){const G=oo(Wi(yt,"users"),lo("trainerId","==",e.id)),F=Ah(G,se=>{const le=se.docs.map(re=>({id:re.id,...re.data()}));o(le)});return()=>F()}else o([])},[e]);const K={currentUser:e,isAuthLoading:u,trainerClients:r,logout:async()=>{await Lc($r)},updateClientPlan:async(G,F)=>{const se=Dn(yt,"users",G);await Jr(se,{plan:F})},addClient:async G=>{if(!e||e.role!=="trainer")return{success:!1,message:"No tienes permiso para realizar esta acción."};const F=oo(Wi(yt,"users"),lo("email","==",G.email));return(await Wm(F)).empty?(await ep(Wi(yt,"users"),{...G,role:"client",trainerId:e.id}),{success:!0,message:"Cliente añadido con éxito."}):{success:!1,message:"Un usuario con este email ya existe."}},removeClient:async G=>{await wh(Dn(yt,"users",G))},updateClientExercise:async(G,F,se)=>{if(!e||e.role!=="client"||!e.plan){console.error("Acción no permitida o el plan no existe.");return}const le=e,re=Dn(yt,"users",le.id),ee=JSON.parse(JSON.stringify(le.plan)),me=ee.workouts.findIndex(ne=>ne.id===G);if(me===-1){console.error("Workout no encontrado");return}ee.workouts[me].exercises[F]=se;try{await Jr(re,{plan:ee})}catch(ne){console.error("Error al actualizar el ejercicio:",ne)}},getTrainerProfile:async G=>{try{const F=Dn(yt,"users",G),se=await hI(F);return se.exists()?{id:se.id,...se.data()}:(console.log("No se encontró el entrenador con ID:",G),null)}catch(F){return console.error("Error al obtener el perfil del entrenador:",F),null}}};return v.jsx(ew.Provider,{value:K,children:s})},gr=()=>{const s=te.useContext(ew);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s},tw=te.createContext(void 0),QD=({children:s})=>{const{currentUser:e}=gr(),[n,r]=te.useState([]),[o,u]=te.useState(!0),[d,m]=te.useState([]),[g,y]=te.useState(!0),[b,A]=te.useState(!1);te.useEffect(()=>{if(e&&e.role==="trainer"){const ee=oo(Wi(yt,"users"),lo("trainerId","==",e.id)),me=Ah(ee,ne=>{const R=ne.docs.map(S=>({id:S.id,...S.data()}));r(R),u(!1)},ne=>{u(!1)});return()=>me()}else r([]),u(!1)},[e]),te.useEffect(()=>{if(e&&e.role==="trainer"){y(!0);const ee=oo(Wi(yt,"exercises"),lo("trainerId","==",e.id)),me=Ah(ee,ne=>{const R=ne.docs.map(S=>({id:S.id,...S.data()}));m(R),y(!1)},ne=>{y(!1)});return()=>me()}else m([]),y(!1)},[e]);const re={trainerClients:n,isLoadingClients:o,masterExercises:d,isLoadingExercises:g,addClient:async ee=>{if(!e||e.role!=="trainer")throw new Error("No tienes permiso para realizar esta acción.");const me=async()=>{const ne=oo(Wi(yt,"users"),lo("email","==",ee.email.trim()));if(!(await Wm(ne)).empty)throw new Error("Un usuario con este email ya existe.");await ep(Wi(yt,"users"),{...ee,role:"client",trainerId:e.id})};await In.promise(me(),{loading:"Añadiendo cliente...",success:"Cliente añadido con éxito.",error:ne=>ne.message||"No se pudo añadir al cliente."})},removeClient:async ee=>{const me=wh(Dn(yt,"users",ee));await In.promise(me,{loading:"Eliminando cliente...",success:"Cliente eliminado correctamente.",error:"No se pudo eliminar al cliente."})},updateClientPlan:async(ee,me)=>{if(!e||e.role!=="trainer")throw new Error("No tienes permiso para realizar esta acción.");const ne={...me,createdAt:me.createdAt||at.now(),updatedAt:at.now()},R=Jr(Dn(yt,"users",ee),{plan:ne});await In.promise(R,{loading:"Guardando el plan...",success:"Plan guardado con éxito.",error:"Error al guardar el plan."})},addMasterExercise:async ee=>{if(!e)throw new Error("Acción no permitida");const me=ep(Wi(yt,"exercises"),{...ee,trainerId:e.id});await In.promise(me,{loading:"Creando ejercicio...",success:"Ejercicio creado con éxito.",error:"No se pudo crear el ejercicio."})},updateMasterExercise:async(ee,me)=>{const ne=Jr(Dn(yt,"exercises",ee),me);await In.promise(ne,{loading:"Actualizando ejercicio...",success:"Ejercicio actualizado correctamente.",error:"Error al actualizar el ejercicio."})},deleteMasterExercise:async ee=>{const me=wh(Dn(yt,"exercises",ee));await In.promise(me,{loading:"Eliminando ejercicio...",success:"Ejercicio eliminado de tu banco.",error:"No se pudo eliminar el ejercicio."})},updateTrainerProfile:async ee=>{if(!e||e.role!=="trainer")throw new Error("Usuario no autenticado o sin permisos.");const me=async()=>{var C;A(!0);const ne=e,R=Dn(yt,"users",ne.id),S={};if(ee.description!==void 0&&(S.description=ee.description),ee.newProfileImage){if(ne.photoURL&&ne.photoURL.includes("firebasestorage.googleapis.com"))try{await dE(Kc(Qc,ne.photoURL))}catch(k){console.warn("No se pudo borrar la imagen antigua, pero continuamos:",k)}const O=Kc(Qc,`profile_images/${ne.id}/${Date.now()}_${ee.newProfileImage.name}`);await cE(O,ee.newProfileImage),S.photoURL=await hE(O)}if(ee.galleryImagesToDelete&&ee.galleryImagesToDelete.length>0){const O=[],k=[];(C=ne.galleryImages)==null||C.forEach(V=>{var N;(N=ee.galleryImagesToDelete)!=null&&N.includes(V)&&V.includes("firebasestorage.googleapis.com")?O.push(V):k.push(V)}),S.galleryImages=k,O.forEach(V=>{try{dE(Kc(Qc,V))}catch(N){console.warn("No se pudo borrar imagen de galería, pero continuamos:",N)}})}if(Object.keys(S).length>0&&await Jr(R,S),ee.newGalleryImages&&ee.newGalleryImages.length>0){const O=await Promise.all(ee.newGalleryImages.map(async k=>{const V=Kc(Qc,`gallery_images/${ne.id}/${Date.now()}_${k.name}`);return await cE(V,k),hE(V)}));await Jr(R,{galleryImages:fI(...O)})}};await In.promise(me(),{loading:"Guardando cambios del perfil...",success:"Perfil actualizado con éxito.",error:"Hubo un error al guardar los cambios."}).finally(()=>{A(!1)})},isUpdatingProfile:b};return v.jsx(tw.Provider,{value:re,children:s})},ca=()=>{const s=te.useContext(tw);if(s===void 0)throw new Error("useTrainer debe ser usado dentro de un TrainerProvider");return s},nw=s=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[v.jsx("path",{d:"M14.4 14.4 9.6 9.6"}),v.jsx("path",{d:"M18 18H5.5"}),v.jsx("path",{d:"M18 6H5.5"}),v.jsx("path",{d:"M18 6V5a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v1"}),v.jsx("path",{d:"M18 18v1a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1v-1"}),v.jsx("path",{d:"m21 6-2 0"}),v.jsx("path",{d:"m21 18-2 0"}),v.jsx("path",{d:"m3 6-1 0"}),v.jsx("path",{d:"m3 18-1 0"})]}),$D=s=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[v.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),v.jsx("polyline",{points:"16 17 21 12 16 7"}),v.jsx("line",{x1:"21",x2:"9",y1:"12",y2:"12"})]}),YD=s=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[v.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),v.jsx("circle",{cx:"9",cy:"7",r:"4"}),v.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),v.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),XD=s=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[v.jsx("rect",{x:"2",y:"5",width:"20",height:"14",rx:"2"}),v.jsx("line",{x1:"2",y1:"10",x2:"22",y2:"10"})]}),cg=s=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[v.jsx("path",{d:"M12 2L8 7h8L12 2z",fill:"currentColor"}),v.jsx("path",{d:"M12 22l4-5H8l4 5z",fill:"currentColor"}),v.jsx("path",{d:"M7 8l-5 4 5 4"}),v.jsx("path",{d:"M17 8l5 4-5 4"})]}),JD=s=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[v.jsx("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"}),v.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),v.jsx("path",{d:"M12 11h4"}),v.jsx("path",{d:"M12 16h4"}),v.jsx("path",{d:"M8 11h.01"}),v.jsx("path",{d:"M8 16h.01"})]}),ZD=s=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[v.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"10"}),v.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"4"}),v.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"16"})]}),WD=({onNavigateToLanding:s})=>{const[e,n]=te.useState(!1),r=async()=>{n(!0);const o=new Zi;o.setCustomParameters({prompt:"select_account"});try{await Jx($r,rb),console.log("Persistencia establecida a LOCAL.");const u=await v2($r,o);console.log(`Login exitoso con Popup. Usuario: ${u.user.email}`)}catch(u){console.error("Error al iniciar sesión con POPUP:",u);const d=u.message||"Error desconocido en el Popup.";alert(`❌ ERROR CRÍTICO DE AUTENTICACIÓN ❌
Detalle: ${d}

Si este error persiste, revisa las restricciones de la API Key en Google Cloud Console.`),n(!1)}};return v.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:v.jsxs("div",{className:"bg-surface p-8 rounded-2xl shadow-2xl w-full max-w-sm border border-slate-200 text-center",children:[v.jsxs("div",{className:"flex flex-col items-center mb-6",children:[v.jsx(cg,{className:"w-16 h-16 text-primary mb-4"}),v.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:"Montu"}),v.jsx("p",{className:"text-text-secondary mt-1",children:"Accede con tu cuenta de Google"})]}),v.jsxs("button",{onClick:r,disabled:e,className:"w-full flex items-center justify-center gap-3 bg-white border border-slate-300 text-text-primary font-bold py-3 px-4 rounded-lg focus:outline-none focus:shadow-outline transition-colors hover:bg-slate-50 disabled:opacity-50",children:[v.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 48 48",children:[v.jsx("path",{fill:"#4285F4",d:"M24 9.5c3.2 0 6.1 1.1 8.4 3.2l6.5-6.5C34.6 2.3 29.6 0 24 0 14.9 0 7.3 5.4 3 13.2l7.7 6C12.5 13.4 17.8 9.5 24 9.5z"}),v.jsx("path",{fill:"#34A853",d:"M46.2 25.4c0-1.7-.2-3.4-.5-5H24v9.5h12.5c-.5 3.1-2.2 5.7-4.8 7.5l7.3 5.7c4.3-4 6.7-9.8 6.7-16.7z"}),v.jsx("path",{fill:"#FBBC05",d:"M10.7 28.2c-.4-1.2-.6-2.5-.6-3.8s.2-2.6.6-3.8l-7.7-6C1.1 18.2 0 21 0 24.4c0 3.4 1.1 6.3 3 8.8l7.7-5z"}),v.jsx("path",{fill:"#EA4335",d:"M24 48c5.6 0 10.5-1.9 14-5.1l-7.3-5.7c-1.9 1.3-4.3 2-6.7 2-6.2 0-11.5-3.9-13.3-9.3l-7.7 6C7.3 42.6 14.9 48 24 48z"}),v.jsx("path",{fill:"none",d:"M0 0h48v48H0z"})]}),e?"Conectando...":"Ingresar con Google"]}),v.jsx("div",{className:"text-center mt-6",children:v.jsx("button",{onClick:s,className:"text-sm text-text-secondary hover:text-primary transition-colors",children:"« Volver al inicio"})})]})})},eO=()=>{const{logout:s,currentUser:e}=gr();return e?v.jsxs("header",{className:"bg-surface p-4 shadow-sm flex justify-between items-center border-b border-slate-200",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(cg,{className:"w-8 h-8 text-primary"}),v.jsx("h1",{className:"text-2xl font-bold text-text-primary tracking-wider",children:"Montu"})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsxs("span",{className:"text-text-secondary hidden sm:block",children:["Bienvenido, ",e.username]}),v.jsxs("button",{onClick:s,className:"flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-300","aria-label":"Cerrar Sesión",children:[v.jsx($D,{className:"w-5 h-5"}),v.jsx("span",{className:"hidden sm:block",children:"Cerrar Sesión"})]})]})]}):null};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tO=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),nO=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),fE=s=>{const e=nO(s);return e.charAt(0).toUpperCase()+e.slice(1)},iw=(...s)=>s.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),iO=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var sO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rO=te.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:u,iconNode:d,...m},g)=>te.createElement("svg",{ref:g,...sO,width:e,height:e,stroke:s,strokeWidth:r?Number(n)*24/Number(e):n,className:iw("lucide",o),...!u&&!iO(m)&&{"aria-hidden":"true"},...m},[...d.map(([y,b])=>te.createElement(y,b)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=(s,e)=>{const n=te.forwardRef(({className:r,...o},u)=>te.createElement(rO,{ref:u,iconNode:e,className:iw(`lucide-${tO(fE(s))}`,`lucide-${s}`,r),...o}));return n.displayName=fE(s),n};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]],oO=vt("chart-no-axes-column-increasing",aO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lO=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],uO=vt("chevron-down",lO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cO=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],hO=vt("circle-check-big",cO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dO=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],fO=vt("clipboard-list",dO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mO=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],pO=vt("credit-card",mO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gO=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],yO=vt("house",gO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _O=[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],mE=vt("image-plus",_O);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vO=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],EO=vt("layout-dashboard",vO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bO=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],TO=vt("list",bO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wO=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],AO=vt("menu",wO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SO=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ed=vt("plus",SO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xO=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],RO=vt("save",xO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],sw=vt("settings",CO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NO=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],IO=vt("square-pen",NO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],td=vt("trash-2",DO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],MO=vt("trash",OO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kO=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],nd=vt("user",kO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],hg=vt("users",VO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],rw=vt("video",jO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],lu=vt("x",UO);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],dg=vt("zap",PO),xm=({icon:s,label:e,value:n,color:r,isLoading:o})=>{const d={indigo:{bg:"bg-indigo-50",border:"border-indigo-200",text:"text-indigo-700",value:"text-indigo-900"},green:{bg:"bg-green-50",border:"border-green-200",text:"text-green-700",value:"text-green-900"},yellow:{bg:"bg-yellow-50",border:"border-yellow-200",text:"text-yellow-700",value:"text-yellow-900"}}[r];return v.jsx("div",{className:`${d.bg} p-5 rounded-lg border ${d.border} shadow-sm`,children:v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("div",{className:`p-3 rounded-full ${d.text} ${d.bg==="bg-yellow-50"?"bg-yellow-100":d.bg==="bg-green-50"?"bg-green-100":"bg-indigo-100"}`,children:v.jsx(s,{className:"w-6 h-6"})}),v.jsxs("div",{children:[v.jsx("p",{className:`text-sm font-medium ${d.text}`,children:e}),o?v.jsx("div",{className:"h-8 w-16 bg-gray-200 rounded-md animate-pulse mt-1"}):v.jsx("p",{className:`text-3xl font-bold ${d.value}`,children:n})]})]})})},pE=()=>{const{trainerClients:s,masterExercises:e,isLoadingClients:n,isLoadingExercises:r}=ca(),o=s.length,u=s.filter(m=>m.plan&&m.plan.workouts.length>0).length,d=e.length;return v.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[v.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Resumen del Día"}),v.jsx("p",{className:"text-gray-600",children:"Bienvenido de nuevo. Aquí puedes ver un resumen rápido de tus clientes, planes asignados y tu banco de ejercicios."}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6",children:[v.jsx(xm,{icon:hg,label:"Clientes Activos",value:o,color:"indigo",isLoading:n}),v.jsx(xm,{icon:fO,label:"Clientes con Plan",value:u,color:"green",isLoading:n}),v.jsx(xm,{icon:dg,label:"Ejercicios Creados",value:d,color:"yellow",isLoading:r})]})]})},LO=({isOpen:s,onClose:e,onSelect:n})=>{const{masterExercises:r,isLoadingExercises:o}=ca(),[u,d]=te.useState(new Set),m=y=>{const b=new Set(u);b.has(y)?b.delete(y):b.add(y),d(b)},g=()=>{const y=r.filter(b=>u.has(b.id));n(y),e()};return s?v.jsx("div",{className:"fixed inset-0 bg-black/60 z-[60] flex items-center justify-center p-4",children:v.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg flex flex-col max-h-[80vh]",children:[v.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[v.jsx("h3",{className:"text-lg font-semibold",children:"Seleccionar Ejercicios"}),v.jsx("button",{type:"button",onClick:e,children:v.jsx(lu,{className:"w-5 h-5"})})]}),v.jsx("div",{className:"p-4 overflow-y-auto",children:o?v.jsx("p",{children:"Cargando..."}):v.jsx("ul",{className:"space-y-2",children:r.map(y=>v.jsxs("li",{className:"flex items-center gap-3 p-2 rounded hover:bg-gray-100",children:[v.jsx("input",{type:"checkbox",id:`ex-select-${y.id}`,checked:u.has(y.id),onChange:()=>m(y.id),className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),v.jsxs("label",{htmlFor:`ex-select-${y.id}`,className:"flex-grow cursor-pointer",children:[v.jsx("p",{className:"font-medium",children:y.name}),v.jsx("p",{className:"text-sm text-gray-500",children:y.muscleGroup})]})]},y.id))})}),v.jsxs("div",{className:"p-4 bg-gray-50 flex justify-end gap-3",children:[v.jsx("button",{type:"button",onClick:e,className:"py-2 px-4 border rounded-md text-sm",children:"Cancelar"}),v.jsx("button",{type:"button",onClick:g,disabled:u.size===0,className:"py-2 px-4 rounded-md text-sm text-white bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-300",children:"Añadir Seleccionados"})]})]})}):null},zO=({exercise:s,onUpdate:e,onRemove:n})=>{const r=(o,u)=>{e({...s,[o]:u})};return v.jsxs("div",{className:"bg-gray-100 p-3 rounded-md border border-gray-200 space-y-2",children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("p",{className:"font-semibold text-gray-800",children:s.name}),v.jsx("button",{type:"button",onClick:n,className:"p-1 text-gray-400 hover:text-red-600",children:v.jsx(td,{className:"w-4 h-4"})})]}),v.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[v.jsx("input",{type:"number",value:s.sets||"",onChange:o=>r("sets",parseInt(o.target.value)||0),className:"w-full p-1 border rounded",placeholder:"Sets"}),v.jsx("input",{type:"text",value:s.reps,onChange:o=>r("reps",o.target.value),className:"w-full p-1 border rounded",placeholder:"Reps"}),v.jsx("input",{type:"text",value:s.weight||"",onChange:o=>r("weight",o.target.value),className:"w-full p-1 border rounded",placeholder:"Peso"}),v.jsx("input",{type:"text",value:s.rest,onChange:o=>r("rest",o.target.value),className:"w-full p-1 border rounded",placeholder:"Descanso"})]}),v.jsx("textarea",{value:s.trainerNotes||"",onChange:o=>r("trainerNotes",o.target.value),className:"w-full p-1 border rounded text-sm",placeholder:"Notas para el cliente...",rows:1})]})},BO=({workout:s,onUpdate:e,onDelete:n})=>{const[r,o]=te.useState(!1),u=y=>{e({...s,day:y.target.value})},d=y=>{const b=y.map(A=>({id:A.id,name:A.name,videoUrl:A.videoUrl,sets:4,reps:"10-12",weight:"",rest:"60s",trainerNotes:""}));e({...s,exercises:[...s.exercises,...b]})},m=(y,b)=>{const A=[...s.exercises];A[y]=b,e({...s,exercises:A})},g=y=>{const b=s.exercises.filter((A,x)=>x!==y);e({...s,exercises:b})};return v.jsxs(v.Fragment,{children:[v.jsx(LO,{isOpen:r,onClose:()=>o(!1),onSelect:d}),v.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 shadow-sm",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("input",{type:"text",value:s.day,onChange:u,placeholder:"Nombre del día (ej: Día 1: Pecho y Tríceps)",className:"text-lg font-bold text-gray-800 p-1 -ml-1 border-transparent focus:border-gray-300 focus:ring-0 rounded"}),v.jsx("button",{type:"button",onClick:n,className:"p-1 text-gray-400 hover:text-red-600",children:v.jsx(td,{className:"w-5 h-5"})})]}),v.jsx("div",{className:"space-y-3 mb-4",children:s.exercises.map((y,b)=>v.jsx(zO,{exercise:y,onUpdate:A=>m(b,A),onRemove:()=>g(b)},b))}),v.jsxs("button",{type:"button",onClick:()=>o(!0),className:"w-full flex items-center justify-center gap-2 py-2 px-4 text-sm font-medium text-indigo-700 bg-indigo-100 hover:bg-indigo-200 rounded-md",children:[v.jsx(ed,{className:"w-4 h-4"}),"Añadir Ejercicio"]})]})]})},qO=({isOpen:s,onClose:e,client:n})=>{const{updateClientPlan:r}=ca(),[o,u]=te.useState(n.plan||{id:n.id,workouts:[],createdAt:at.now(),updatedAt:at.now()}),[d,m]=te.useState(!1),g=()=>{const x={id:`day-${o.workouts.length+1}`,day:`Día ${o.workouts.length+1}`,exercises:[]};u({...o,workouts:[...o.workouts,x]})},y=(x,j)=>{const K=[...o.workouts];K[x]=j,u({...o,workouts:K})},b=x=>{const j=o.workouts.filter((K,G)=>G!==x);u({...o,workouts:j})},A=async()=>{m(!0);try{await r(n.id,o),e()}catch(x){console.error("Error guardando el plan:",x),alert("No se pudo guardar el plan.")}finally{m(!1)}};return s?v.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",children:v.jsxs("div",{className:"bg-gray-50 rounded-lg shadow-xl w-full max-w-4xl flex flex-col max-h-[90vh]",children:[v.jsxs("div",{className:"p-4 border-b bg-white rounded-t-lg flex justify-between items-center sticky top-0",children:[v.jsxs("h3",{className:"text-xl font-semibold text-gray-800",children:["Editor de Plan para ",n.username]}),v.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-gray-200",children:v.jsx(lu,{className:"w-5 h-5 text-gray-500"})})]}),v.jsxs("div",{className:"p-4 md:p-6 overflow-y-auto space-y-4",children:[o.workouts.map((x,j)=>v.jsx(BO,{workout:x,onUpdate:K=>y(j,K),onDelete:()=>b(j)},j)),v.jsxs("button",{type:"button",onClick:g,className:"w-full flex items-center justify-center gap-2 py-2 px-4 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded-md",children:[v.jsx(ed,{className:"w-4 h-4"}),"Añadir Día de Entrenamiento"]})]}),v.jsxs("div",{className:"p-4 bg-white border-t rounded-b-lg flex justify-end gap-3 sticky bottom-0",children:[v.jsx("button",{onClick:e,className:"py-2 px-4 border rounded-md text-sm font-medium",children:"Cancelar"}),v.jsx("button",{onClick:A,disabled:d,className:"py-2 px-4 rounded-md text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-300",children:d?"Guardando...":"Guardar Plan"})]})]})}):null},HO=({isOpen:s,onClose:e,onAdd:n})=>{const[r,o]=te.useState(""),[u,d]=te.useState(""),[m,g]=te.useState(!1),y=async b=>{if(b.preventDefault(),!r.trim()||!u.trim()){In.error("Por favor, completa todos los campos.");return}g(!0);try{await n(r,u),e(),o(""),d("")}catch{}finally{g(!1)}};return s?v.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",children:v.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[v.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center",children:[v.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Añadir Nuevo Cliente"}),v.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-gray-200",children:v.jsx(lu,{className:"w-5 h-5 text-gray-500"})})]}),v.jsxs("form",{onSubmit:y,children:[v.jsxs("div",{className:"p-6 space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"client-name",className:"block text-sm font-medium text-gray-700",children:"Nombre del Cliente"}),v.jsx("input",{type:"text",id:"client-name",value:r,onChange:b=>o(b.target.value),required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"client-email",className:"block text-sm font-medium text-gray-700",children:"Email del Cliente"}),v.jsx("input",{type:"email",id:"client-email",value:u,onChange:b=>d(b.target.value),required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2"}),v.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"El cliente usará esta cuenta de Google para iniciar sesión."})]})]}),v.jsxs("div",{className:"p-6 bg-gray-50 rounded-b-lg flex justify-end gap-3",children:[v.jsx("button",{type:"button",onClick:e,className:"py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancelar"}),v.jsx("button",{type:"submit",disabled:m,className:"py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-300",children:m?"Añadiendo...":"Añadir Cliente"})]})]})]})}):null},FO=({client:s,onOpenPlanEditor:e})=>s?v.jsxs("div",{className:"p-6",children:[v.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[v.jsx("img",{src:s.photoURL||`https://ui-avatars.com/api/?name=${s.username}&background=random`,alt:s.username,className:"w-20 h-20 rounded-full object-cover"}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-3xl font-bold text-gray-800",children:s.username}),v.jsx("p",{className:"text-gray-500",children:s.email})]})]}),v.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[v.jsx("h4",{className:"font-semibold text-lg text-gray-700 mb-2",children:"Plan de Entrenamiento"}),s.plan&&s.plan.workouts.length>0?v.jsxs("div",{className:"space-y-2",children:[v.jsxs("p",{className:"text-gray-600",children:["Este cliente tiene un plan con ",s.plan.workouts.length," día(s)."]}),v.jsx("ul",{className:"list-disc list-inside text-gray-500",children:s.plan.workouts.map(n=>v.jsx("li",{children:n.day},n.id))})]}):v.jsx("p",{className:"text-gray-600",children:"Este cliente aún no tiene un plan de entrenamiento asignado."}),v.jsx("button",{onClick:e,className:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 text-sm",children:s.plan?"Editar Plan":"Crear Plan"})]})]}):v.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:v.jsx("p",{children:"Selecciona un cliente para ver sus detalles"})}),GO=()=>{const{trainerClients:s,isLoadingClients:e,addClient:n,removeClient:r}=ca(),[o,u]=te.useState(null),[d,m]=te.useState(!1),[g,y]=te.useState(!1);te.useEffect(()=>{if(o!=null&&o.id){const x=s.find(j=>j.id===o.id);x&&u(x)}},[s,o==null?void 0:o.id]);const b=async(x,j)=>{await n({username:x,email:j})},A=(x,j)=>{x.stopPropagation(),window.confirm("¿Estás seguro de que quieres eliminar a este cliente? Esta acción es irreversible.")&&(r(j),(o==null?void 0:o.id)===j&&u(null))};return v.jsxs(v.Fragment,{children:[v.jsx(HO,{isOpen:d,onClose:()=>m(!1),onAdd:b}),o&&v.jsx(qO,{isOpen:g,onClose:()=>y(!1),client:o}),v.jsxs("div",{className:"flex flex-col md:flex-row h-full max-h-[calc(100vh-160px)] bg-white rounded-lg shadow-md overflow-hidden",children:[v.jsxs("aside",{className:"w-full md:w-1/3 lg:w-1/4 border-r border-gray-200 overflow-y-auto",children:[v.jsxs("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center sticky top-0 bg-white z-10",children:[v.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center",children:[v.jsx(hg,{className:"w-5 h-5 mr-2"})," Clientes"]}),v.jsx("button",{onClick:()=>m(!0),className:"p-2 rounded-full bg-indigo-600 text-white hover:bg-indigo-700",title:"Añadir nuevo cliente",children:v.jsx(ed,{className:"w-5 h-5"})})]}),e?v.jsx("p",{className:"p-4 text-center text-gray-500",children:"Cargando clientes..."}):v.jsx("ul",{className:"divide-y divide-gray-200",children:s.map(x=>v.jsxs("li",{onClick:()=>u(x),className:`p-3 flex justify-between items-center cursor-pointer ${(o==null?void 0:o.id)===x.id?"bg-indigo-100":"hover:bg-gray-50"}`,children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("img",{src:x.photoURL||`https://ui-avatars.com/api/?name=${x.username}&background=random`,alt:x.username,className:"w-10 h-10 rounded-full object-cover"}),v.jsxs("div",{children:[v.jsx("p",{className:"font-semibold text-gray-800",children:x.username}),v.jsx("p",{className:"text-xs text-gray-500",children:x.email})]})]}),v.jsx("button",{onClick:j=>A(j,x.id),className:"p-1 rounded-full text-gray-400 hover:bg-red-100 hover:text-red-600",title:"Eliminar cliente",children:v.jsx(MO,{className:"w-4 h-4"})})]},x.id))})]}),v.jsx("main",{className:"flex-1 overflow-y-auto",children:v.jsx(FO,{client:o,onOpenPlanEditor:()=>y(!0)})})]})]})},KO=[{id:1,name_es:"Press de Banca",name_en:"Bench Press"},{id:2,name_es:"Sentadilla con Barra",name_en:"Barbell Squat"},{id:3,name_es:"Peso Muerto",name_en:"Deadlift"},{id:4,name_es:"Press Militar",name_en:"Overhead Press"},{id:5,name_es:"Remo con Barra",name_en:"Barbell Row"},{id:6,name_es:"Dominadas",name_en:"Pull-ups"},{id:7,name_es:"Fondos en Paralelas",name_en:"Dips"},{id:8,name_es:"Zancadas",name_en:"Lunges"},{id:9,name_es:"Curl de Bíceps",name_en:"Bicep Curl"},{id:10,name_es:"Extensión de Tríceps",name_en:"Tricep Extension"},{id:11,name_es:"Prensa de Piernas",name_en:"Leg Press"},{id:12,name_es:"Elevaciones Laterales",name_en:"Lateral Raises"},{id:13,name_es:"Hip Thrust",name_en:"Hip Thrust"},{id:14,name_es:"Jalón al Pecho",name_en:"Lat Pulldown"},{id:15,name_es:"Flexiones",name_en:"Push-ups"},{id:16,name_es:"Plancha Abdominal",name_en:"Plank"},{id:17,name_es:"Sentadilla Goblet",name_en:"Goblet Squat"},{id:18,name_es:"Peso Muerto Rumano",name_en:"Romanian Deadlift"},{id:19,name_es:"Aperturas con Mancuernas",name_en:"Dumbbell Flyes"},{id:20,name_es:"Face Pulls",name_en:"Face Pulls"},{id:21,name_es:"Sentadilla Búlgara",name_en:"Bulgarian Split Squat"},{id:22,name_es:"Remo en Polea Baja",name_en:"Seated Cable Row"},{id:23,name_es:"Elevación de Talones",name_en:"Calf Raises"},{id:24,name_es:"Cruce de Poleas",name_en:"Cable Crossover"},{id:25,name_es:"Buenos Días",name_en:"Good Mornings"},{id:26,name_es:"Remo al Mentón",name_en:"Upright Row"},{id:27,name_es:"Pájaros (Bent Over Reverse Fly)",name_en:"Bent Over Reverse Fly"},{id:28,name_es:"Abdominales Crunch",name_en:"Crunches"},{id:29,name_es:"Elevación de Piernas",name_en:"Leg Raises"},{id:30,name_es:"Press Francés",name_en:"Skull Crushers"},{id:31,name_es:"Curl Martillo",name_en:"Hammer Curls"},{id:32,name_es:"Press Inclinado",name_en:"Incline Press"},{id:33,name_es:"Sentadilla Frontal",name_en:"Front Squat"},{id:34,name_es:"Peso Muerto Sumo",name_en:"Sumo Deadlift"},{id:35,name_es:"Step-Ups",name_en:"Step-Ups"},{id:36,name_es:"Puente de Glúteos",name_en:"Glute Bridge"},{id:37,name_es:"Remo con Mancuerna",name_en:"Dumbbell Row"},{id:38,name_es:"Press Arnold",name_en:"Arnold Press"},{id:39,name_es:"Batidas de Cuerda",name_en:"Battle Ropes"},{id:40,name_es:"Saltos de Caja",name_en:"Box Jumps"},{id:41,name_es:"Burpees",name_en:"Burpees"},{id:42,name_es:"Mountain Climbers",name_en:"Mountain Climbers"},{id:43,name_es:"Extensión de Cuádriceps",name_en:"Leg Extension"},{id:44,name_es:"Curl Femoral",name_en:"Leg Curl"},{id:45,name_es:"Chin-ups",name_en:"Chin-ups"},{id:46,name_es:"Paseo del Granjero",name_en:"Farmer's Walk"},{id:47,name_es:"Sentadilla Sissy",name_en:"Sissy Squat"},{id:48,name_es:"Dragon Flag",name_en:"Dragon Flag"},{id:49,name_es:"Muscle-up",name_en:"Muscle-up"},{id:50,name_es:"Handstand Push-up",name_en:"Handstand Push-up"},{id:51,name_es:"Kettlebell Swing",name_en:"Kettlebell Swing"},{id:52,name_es:"Kettlebell Goblet Squat",name_en:"Kettlebell Goblet Squat"},{id:53,name_es:"Kettlebell Turkish Get-Up",name_en:"Kettlebell Turkish Get-Up"},{id:54,name_es:"Kettlebell Snatch",name_en:"Kettlebell Snatch"},{id:55,name_es:"Kettlebell Clean and Press",name_en:"Kettlebell Clean and Press"},{id:56,name_es:"Kettlebell Deadlift (Peso Muerto)",name_en:"Kettlebell Deadlift"},{id:57,name_es:"Kettlebell Row (Remo)",name_en:"Kettlebell Row"},{id:58,name_es:"Kettlebell Windmill",name_en:"Kettlebell Windmill"},{id:59,name_es:"Kettlebell Halo",name_en:"Kettlebell Halo"},{id:60,name_es:"Kettlebell Russian Twist",name_en:"Kettlebell Russian Twist"},{id:61,name_es:"Kettlebell Estocada",name_en:"Kettlebell Lunge"},{id:62,name_es:"Kettlebell High Pull",name_en:"Kettlebell High Pull"},{id:63,name_es:"Kettlebell Single Leg Deadlift",name_en:"Kettlebell Single Leg Deadlift"},{id:64,name_es:"Kettlebell Figure 8",name_en:"Kettlebell Figure 8"},{id:65,name_es:"Kettlebell Farmer's Carry",name_en:"Kettlebell Farmer's Carry"},{id:66,name_es:"Kettlebell Pistol Squat",name_en:"Kettlebell Pistol Squat"},{id:67,name_es:"Kettlebell Floor Press",name_en:"Kettlebell Floor Press"},{id:68,name_es:"Kettlebell Thruster",name_en:"Kettlebell Thruster"},{id:69,name_es:"Kettlebell Deck Squat",name_en:"Kettlebell Deck Squat"},{id:70,name_es:"Kettlebell Bottom-Up Press",name_en:"Kettlebell Bottom-Up Press"}],QO=["Fuerza base","Fuerza posterior de piernas","Potencia","Cadera","Piernas","Estabilidad","Potencia coordinación","Empuje superior","Tracción superior","Fuerza isométrica","Potencia cuerpo completo","Control","Movilidad","Piernas equilibrio","Potencia explosividad","Movilidad lateral","Core rotación"],$O=["Pecho","Espalda","Hombros","Bíceps","Tríceps","Antebrazos","Trapecios","Dorsales","Core","Abdominales","Oblicuos","Glúteos","Cuádriceps","Isquiotibiales","Aductores","Abductores","Pantorrillas","Tibiales"],YO=({value:s,onChange:e})=>{const[n,r]=te.useState([]),[o,u]=te.useState(!1),d=te.useRef(null),m=y=>{const b=y.target.value;if(e(b),b.length>1){const A=KO.filter(x=>x.name_es.toLowerCase().includes(b.toLowerCase())||x.name_en.toLowerCase().includes(b.toLowerCase()));r(A.slice(0,5)),u(!0)}else u(!1)},g=y=>{e(y.name_es),u(!1)};return te.useEffect(()=>{const y=b=>{d.current&&!d.current.contains(b.target)&&u(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[d]),v.jsxs("div",{className:"relative",ref:d,children:[v.jsx("label",{htmlFor:"ex-name",className:"block text-sm font-medium text-gray-700",children:"Nombre del Ejercicio"}),v.jsx("input",{type:"text",id:"ex-name",value:s,onChange:m,required:!0,className:"mt-1 block w-full p-2 rounded-md border-gray-300 shadow-sm",autoComplete:"off"}),o&&n.length>0&&v.jsx("div",{className:"absolute z-20 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-y-auto",children:n.map(y=>v.jsxs("div",{onClick:()=>g(y),className:"p-2 hover:bg-gray-100 cursor-pointer",children:[v.jsx("p",{className:"text-sm font-medium text-gray-800",children:y.name_es}),v.jsx("p",{className:"text-xs text-gray-500",children:y.name_en})]},y.id))})]})},gE=({label:s,options:e,selectedOptions:n,onChange:r,placeholder:o})=>{const[u,d]=te.useState(!1),m=te.useRef(null),g=y=>{const b=n.includes(y)?n.filter(A=>A!==y):[...n,y];r(b)};return te.useEffect(()=>{const y=b=>{m.current&&!m.current.contains(b.target)&&d(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[m]),v.jsxs("div",{className:"relative",ref:m,children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700",children:s}),v.jsxs("button",{type:"button",onClick:()=>d(!u),className:"mt-1 flex justify-between items-center w-full p-2 bg-white border border-gray-300 rounded-md shadow-sm text-left",children:[v.jsx("span",{className:"text-gray-700",children:n.length>0?`${n.length} seleccionados`:o}),v.jsx(uO,{className:`w-5 h-5 text-gray-400 transition-transform ${u?"transform rotate-180":""}`})]}),u&&v.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-y-auto",children:e.map(y=>v.jsxs("div",{className:"flex items-center p-2 hover:bg-gray-100",children:[v.jsx("input",{id:`multiselect-${s}-${y}`,type:"checkbox",checked:n.includes(y),onChange:()=>g(y),className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),v.jsx("label",{htmlFor:`multiselect-${s}-${y}`,className:"ml-2 text-sm text-gray-700 flex-1 cursor-pointer",children:y})]},y))})]})},XO=({isOpen:s,onClose:e,exercise:n})=>{const{addMasterExercise:r,updateMasterExercise:o}=ca(),[u,d]=te.useState((n==null?void 0:n.name)||""),[m,g]=te.useState(Array.isArray(n==null?void 0:n.muscleGroup)?n.muscleGroup:[]),[y,b]=te.useState(Array.isArray(n==null?void 0:n.type)?n.type:[]),[A,x]=te.useState((n==null?void 0:n.videoUrl)||""),[j,K]=te.useState(!1),G=async F=>{F.preventDefault(),K(!0);try{const se={name:u,muscleGroup:m,type:y,videoUrl:A};n?await o(n.id,se):await r(se),e()}catch(se){console.error("Error guardando ejercicio:",se),alert("No se pudo guardar el ejercicio.")}finally{K(!1)}};return s?v.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",children:v.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg flex flex-col max-h-[90vh]",children:[v.jsxs("div",{className:"p-6 border-b flex justify-between items-center",children:[v.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:n?"Editar Ejercicio":"Crear Nuevo Ejercicio"}),v.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-gray-200",children:v.jsx(lu,{className:"w-5 h-5 text-gray-500"})})]}),v.jsxs("form",{onSubmit:G,className:"flex flex-col overflow-hidden",children:[v.jsxs("div",{className:"p-6 space-y-4 overflow-y-auto",children:[v.jsx(YO,{value:u,onChange:d}),v.jsx(gE,{label:"Grupo Muscular",options:$O,selectedOptions:m,onChange:g,placeholder:"Seleccionar grupos musculares"}),v.jsx(gE,{label:"Tipo de Ejercicio",options:QO,selectedOptions:y,onChange:b,placeholder:"Seleccionar tipos de ejercicio"}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"ex-video",className:"block text-sm font-medium text-gray-700",children:"URL del Video (YouTube, etc.)"}),v.jsx("input",{type:"url",id:"ex-video",value:A,onChange:F=>x(F.target.value),className:"mt-1 block w-full p-2 rounded-md border-gray-300 shadow-sm"})]})]}),v.jsxs("div",{className:"p-6 bg-gray-50 flex justify-end gap-3 border-t",children:[v.jsx("button",{type:"button",onClick:e,className:"py-2 px-4 border rounded-md text-sm font-medium",children:"Cancelar"}),v.jsx("button",{type:"submit",disabled:j,className:"py-2 px-4 rounded-md text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-300",children:j?"Guardando...":"Guardar Ejercicio"})]})]})]})}):null},JO=()=>{const{masterExercises:s,isLoadingExercises:e,deleteMasterExercise:n}=ca(),[r,o]=te.useState(!1),[u,d]=te.useState(null),m=()=>{d(null),o(!0)},g=b=>{d(b),o(!0)},y=async b=>{if(window.confirm("¿Seguro que quieres eliminar este ejercicio de tu banco?"))try{await n(b)}catch{alert("No se pudo eliminar el ejercicio.")}};return v.jsxs(v.Fragment,{children:[r&&v.jsx(XO,{isOpen:r,onClose:()=>o(!1),exercise:u}),v.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[v.jsxs("div",{className:"flex justify-between items-center mb-6",children:[v.jsxs("h2",{className:"text-3xl font-bold text-gray-800 flex items-center",children:[v.jsx(dg,{className:"w-6 h-6 mr-3 text-red-500"}),"Banco de Ejercicios"]}),v.jsxs("button",{onClick:m,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition duration-150 shadow-md",children:[v.jsx(ed,{className:"w-5 h-5"}),"Nuevo Ejercicio"]})]}),e?v.jsx("p",{children:"Cargando ejercicios..."}):v.jsx("div",{className:"space-y-3",children:s.length===0?v.jsx("p",{className:"text-gray-500 text-center py-8",children:"Aún no has creado ningún ejercicio. ¡Añade el primero!"}):s.map(b=>v.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg flex justify-between items-center border border-gray-200",children:[v.jsxs("div",{className:"flex-1 pr-4",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("p",{className:"font-semibold text-gray-900",children:b.name}),b.videoUrl&&v.jsx(rw,{className:"w-5 h-5 text-gray-400",title:"Tiene video asociado"})]}),v.jsx("div",{className:"flex flex-wrap gap-1 my-2",children:b.muscleGroup&&Array.isArray(b.muscleGroup)&&b.muscleGroup.map(A=>v.jsx("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full bg-gray-200 text-gray-800",children:A},A))}),v.jsx("div",{className:"flex flex-wrap gap-1",children:b.type&&Array.isArray(b.type)&&b.type.map(A=>v.jsx("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full bg-indigo-100 text-indigo-800",children:A},A))})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("button",{onClick:()=>g(b),className:"p-2 text-gray-500 hover:text-indigo-600 hover:bg-indigo-100 rounded-full",children:v.jsx(IO,{className:"w-4 h-4"})}),v.jsx("button",{onClick:()=>y(b.id),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-100 rounded-full",children:v.jsx(td,{className:"w-4 h-4"})})]})]},b.id))})]})]})},ZO=()=>{var me;const{currentUser:s}=gr(),{updateTrainerProfile:e,isUpdatingProfile:n}=ca(),r=s,[o,u]=te.useState(""),[d,m]=te.useState(null),[g,y]=te.useState([]),[b,A]=te.useState([]),[x,j]=te.useState(null),[K,G]=te.useState([]);te.useEffect(()=>{r&&(u(r.description||""),j(r.photoURL||null))},[r]);const F=ne=>{if(ne.target.files&&ne.target.files[0]){const R=ne.target.files[0];m(R),j(URL.createObjectURL(R))}},se=ne=>{var R;if(ne.target.files){const S=Array.from(ne.target.files),C=(((R=r.galleryImages)==null?void 0:R.length)||0)-b.length,O=S.length;if(C+O>5){alert(`Puedes subir un máximo de 5 imágenes. Ya tienes ${C}.`);return}y(S);const k=S.map(V=>URL.createObjectURL(V));G(k)}},le=ne=>{window.confirm("¿Seguro que quieres eliminar esta imagen?")&&A(R=>[...R,ne])},re=async ne=>{ne.preventDefault();try{await e({description:o,newProfileImage:d,newGalleryImages:g,galleryImagesToDelete:b}),m(null),y([]),G([]),A([])}catch(R){console.error("Fallo el submit del perfil:",R)}};if(!r)return v.jsx("div",{children:"Cargando perfil..."});const ee=((me=r.galleryImages)==null?void 0:me.filter(ne=>!b.includes(ne)))||[];return v.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md max-w-4xl mx-auto",children:[v.jsxs("h2",{className:"text-3xl font-bold text-gray-800 mb-6 flex items-center",children:[v.jsx(nd,{className:"w-8 h-8 mr-3 text-green-500"}),"Mi Perfil"]}),v.jsxs("form",{onSubmit:re,className:"space-y-8",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Foto de Perfil"}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("img",{src:x||`https://ui-avatars.com/api/?name=${r.username}&background=random&color=fff`,alt:"Vista previa del perfil",className:"w-24 h-24 rounded-full object-cover border-4 border-gray-200"}),v.jsxs("label",{htmlFor:"profile-upload",className:"cursor-pointer bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-2 px-4 rounded-lg border border-gray-300 transition duration-150 flex items-center gap-2",children:[v.jsx(mE,{className:"w-5 h-5"})," Cambiar foto"]}),v.jsx("input",{id:"profile-upload",type:"file",accept:"image/*",className:"hidden",onChange:F})]})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Descripción / Biografía"}),v.jsx("textarea",{id:"description",rows:4,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2",placeholder:"Cuéntales a tus clientes sobre ti, tu experiencia y tu filosofía de entrenamiento.",value:o,onChange:ne=>u(ne.target.value)})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Galería de Fotos (Máx. 5)"}),v.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4 mb-4",children:[ee.map((ne,R)=>v.jsxs("div",{className:"relative group aspect-square",children:[v.jsx("img",{src:ne,alt:`Galería ${R+1}`,className:"w-full h-full object-cover rounded-lg shadow-sm"}),v.jsx("button",{type:"button",onClick:()=>le(ne),className:"absolute top-1 right-1 bg-red-600/80 hover:bg-red-700 text-white p-1.5 rounded-full opacity-0 group-hover:opacity-100 transition-opacity","aria-label":"Eliminar imagen",children:v.jsx(td,{className:"w-4 h-4"})})]},R)),K.map((ne,R)=>v.jsx("div",{className:"relative aspect-square",children:v.jsx("img",{src:ne,alt:`Nueva ${R+1}`,className:"w-full h-full object-cover rounded-lg shadow-sm border-2 border-green-400"})},`preview-${R}`))]}),v.jsxs("label",{htmlFor:"gallery-upload",className:"cursor-pointer bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-2 px-4 rounded-lg border border-gray-300 transition duration-150 flex items-center gap-2 w-fit",children:[v.jsx(mE,{className:"w-5 h-5"})," Añadir más fotos"]}),v.jsx("input",{id:"gallery-upload",type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:se})]}),v.jsx("div",{className:"flex justify-end",children:v.jsxs("button",{type:"submit",disabled:n,className:"flex items-center justify-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-6 rounded-lg transition duration-150 shadow-md disabled:bg-indigo-300 disabled:cursor-not-allowed",children:[v.jsx(RO,{className:"w-5 h-5"}),n?"Guardando...":"Guardar Cambios"]})})]})]})},WO=()=>{const{currentUser:s}=gr(),e=s;return v.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md max-w-4xl mx-auto",children:[v.jsxs("h2",{className:"text-3xl font-bold text-gray-800 mb-6 flex items-center",children:[v.jsx(sw,{className:"w-8 h-8 mr-3 text-gray-500"}),"Configuración"]}),v.jsxs("div",{className:"space-y-8",children:[v.jsxs("div",{className:"p-6 border border-gray-200 rounded-lg",children:[v.jsxs("h3",{className:"text-xl font-semibold text-gray-700 mb-4 flex items-center",children:[v.jsx(nd,{className:"w-5 h-5 mr-2 text-indigo-500"}),"Cuenta"]}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Nombre de Usuario"}),v.jsx("p",{className:"text-gray-800",children:e.username})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Email"}),v.jsx("p",{className:"text-gray-800",children:e.email})]}),v.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"El nombre y el email se gestionan a través de tu cuenta de Google."})]})]}),v.jsxs("div",{className:"p-6 border border-gray-200 rounded-lg",children:[v.jsxs("h3",{className:"text-xl font-semibold text-gray-700 mb-4 flex items-center",children:[v.jsx(pO,{className:"w-5 h-5 mr-2 text-green-500"}),"Suscripción"]}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Estado de la Suscripción"}),v.jsx("span",{className:`px-3 py-1 text-sm font-semibold rounded-full ${e.subscriptionStatus==="active"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:e.subscriptionStatus?e.subscriptionStatus.charAt(0).toUpperCase()+e.subscriptionStatus.slice(1):"Desconocido"})]}),v.jsx("div",{className:"pt-2",children:v.jsx("a",{href:"https://www.mercadopago.com/subscriptions",target:"_blank",rel:"noopener noreferrer",className:"inline-block px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm transition-colors",children:"Gestionar en Mercado Pago"})}),v.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Serás redirigido a Mercado Pago para ver los detalles de tu suscripción y métodos de pago."})]})]})]})]})},e4=({view:s,label:e,icon:n,isSelected:r,onClick:o})=>v.jsx("li",{onClick:()=>o(s),children:v.jsxs("div",{className:`flex items-center p-3 rounded-lg transition-all duration-200 cursor-pointer ${r?"bg-indigo-700 text-white shadow-lg":"text-indigo-200 hover:bg-indigo-700/50 hover:text-white"}`,children:[v.jsx(n,{className:"w-5 h-5 mr-3"}),v.jsx("span",{className:"font-medium",children:e})]})}),t4=()=>{var d;const[s,e]=te.useState("overview"),[n,r]=te.useState(!1),o=te.useMemo(()=>[{view:"overview",label:"Resumen",icon:EO},{view:"clients",label:"Clientes",icon:hg},{view:"programs",label:"Programas",icon:dg},{view:"profile",label:"Perfil",icon:nd},{view:"settings",label:"Configuración",icon:sw}],[]),u=()=>{switch(s){case"overview":return v.jsx(pE,{});case"clients":return v.jsx(GO,{});case"programs":return v.jsx(JO,{});case"profile":return v.jsx(ZO,{});case"settings":return v.jsx(WO,{});default:return v.jsx(pE,{})}};return v.jsxs("div",{className:"min-h-screen bg-gray-100 flex font-inter antialiased",children:[v.jsx("button",{className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-indigo-600 text-white rounded-full shadow-lg",onClick:()=>r(!n),"aria-label":"Toggle Navigation",children:n?v.jsx(lu,{className:"w-6 h-6"}):v.jsx(AO,{className:"w-6 h-6"})}),v.jsxs("aside",{className:`fixed inset-y-0 left-0 transform ${n?"translate-x-0":"-translate-x-full"} 
                   lg:relative lg:translate-x-0 transition-transform duration-300 ease-in-out 
                   w-64 bg-indigo-800 p-4 flex flex-col z-40`,children:[v.jsx("div",{className:"flex items-center justify-between lg:justify-center mb-10 mt-2",children:v.jsx("h1",{className:"text-2xl font-extrabold text-white tracking-wider",children:"Montu"})}),v.jsx("nav",{className:"flex-grow",children:v.jsx("ul",{className:"space-y-2",children:o.map(m=>v.jsx(e4,{view:m.view,label:m.label,icon:m.icon,isSelected:s===m.view,onClick:g=>{e(g),r(!1)}},m.view))})}),v.jsx("div",{className:"mt-auto pt-4 border-t border-indigo-700",children:v.jsx("p",{className:"text-sm text-indigo-300 text-center",children:"Dashboard del Entrenador"})})]}),n&&v.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-30 lg:hidden",onClick:()=>r(!1)}),v.jsxs("main",{className:"flex-1 p-4 md:p-8 lg:ml-0 pt-20 lg:pt-8 overflow-y-auto",children:[v.jsx("h1",{className:"text-4xl font-extrabold text-gray-900 mb-8 capitalize hidden lg:block",children:(d=o.find(m=>m.view===s))==null?void 0:d.label}),u()]})]})},n4=({onNavigateToOnboarding:s,onNavigateToLogin:e})=>v.jsxs("div",{className:"bg-background min-h-screen text-text-primary",children:[v.jsx("header",{className:"bg-surface/80 backdrop-blur-sm sticky top-0 z-40 border-b border-slate-200",children:v.jsxs("div",{className:"container mx-auto px-6 py-4 flex justify-between items-center",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(cg,{className:"w-8 h-8 text-primary"}),v.jsx("h1",{className:"text-2xl font-bold text-text-primary tracking-wider",children:"Montu"})]}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("button",{onClick:e,className:"bg-transparent border-2 border-primary text-primary hover:bg-primary hover:text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Acceso Alumno"}),v.jsx("button",{onClick:e,className:"bg-primary hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Acceso Entrenador"})]})]})}),v.jsxs("main",{children:[v.jsxs("section",{className:"relative text-center py-40 px-6 bg-cover bg-center bg-no-repeat bg-fixed",style:{backgroundImage:"url('https://images.unsplash.com/photo-1571902943202-507ec2618e8f?q=80&w=2575&auto=format&fit=crop')"},children:[v.jsx("div",{className:"absolute inset-0 bg-black/60"}),v.jsxs("div",{className:"relative z-10",children:[v.jsx("h2",{className:"text-5xl font-extrabold text-white mb-4",children:"Eleva tu Coaching a un Nuevo Nivel"}),v.jsx("p",{className:"text-xl text-slate-200 max-w-3xl mx-auto mb-8",children:"La plataforma diseñada para que entrenadores como tú creen planes personalizados, gestionen clientes y sigan su progreso, todo desde un solo lugar."}),v.jsx("button",{onClick:s,className:"bg-secondary hover:bg-emerald-500 text-white font-bold py-3 px-8 rounded-lg text-lg transition-transform transform hover:scale-105",children:"Comienza Ahora"})]})]}),v.jsx("section",{className:"bg-surface py-20",children:v.jsxs("div",{className:"container mx-auto px-6 text-center",children:[v.jsx("h2",{className:"text-4xl font-extrabold text-text-primary mb-4",children:"La Herramienta Definitiva para Entrenadores"}),v.jsx("p",{className:"text-lg text-text-secondary max-w-2xl mx-auto mb-16",children:"Ahorra tiempo, mantén a tus clientes motivados y haz crecer tu negocio con una plataforma que lo tiene todo."}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-12",children:[v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx(JD,{className:"w-16 h-16 text-primary mb-4"}),v.jsx("h3",{className:"text-2xl font-bold text-text-primary mb-2",children:"Crea Rutinas en Minutos"}),v.jsx("p",{className:"text-text-secondary",children:"Utiliza nuestro editor intuitivo y tu banco de ejercicios personal para diseñar planes de entrenamiento detallados. Personaliza series, repeticiones, peso y notas para cada cliente."})]}),v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx(YD,{className:"w-16 h-16 text-primary mb-4"}),v.jsx("h3",{className:"text-2xl font-bold text-text-primary mb-2",children:"Gestiona Clientes sin Esfuerzo"}),v.jsx("p",{className:"text-text-secondary",children:"Añade nuevos alumnos con solo su correo electrónico. Automáticamente recibirán acceso a su propio dashboard para ver las rutinas que les asignes, en cualquier momento y lugar."})]}),v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx(ZD,{className:"w-16 h-16 text-primary mb-4"}),v.jsx("h3",{className:"text-2xl font-bold text-text-primary mb-2",children:"Supervisa Todo desde un Vistazo"}),v.jsx("p",{className:"text-text-secondary",children:"Tu dashboard de entrenador te da una visión completa de todos tus clientes. Accede a sus planes, supervisa quién está entrenando y mantén toda la información organizada."})]})]})]})})]}),v.jsx("footer",{className:"bg-surface py-6 border-t border-slate-200",children:v.jsx("div",{className:"container mx-auto px-6 text-center text-text-secondary",children:v.jsxs("p",{children:["© ",new Date().getFullYear()," Montu. Todos los derechos reservados."]})})})]}),i4=({onNavigateToLogin:s,onNavigateToLanding:e})=>{const[n,r]=te.useState(!1),{currentUser:o}=gr(),u=async()=>{if(r(!0),o)try{const d=jT(),y=(await UT(d,"createSubscription")({userId:o.id,userEmail:o.email,userName:o.username})).data;if(y.checkoutUrl)window.location.href=y.checkoutUrl;else throw new Error(y.error||"No se recibió la URL de pago.")}catch(d){console.error("Error al iniciar el proceso de pago:",d),alert("Hubo un error al conectar con Mercado Pago. Por favor, inténtalo de nuevo."),r(!1)}else console.log("Usuario no logueado. Guardando intención de suscribirse y redirigiendo a login."),localStorage.setItem("postLoginAction",JSON.stringify({action:"subscribe"})),s()};return v.jsx("div",{className:"bg-background min-h-screen text-text-primary font-sans p-4 sm:p-6 lg:p-8 flex items-center justify-center",children:v.jsxs("div",{className:"mt-auto pt-6 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[v.jsxs("button",{onClick:u,disabled:n,className:"flex items-center justify-center gap-2 bg-secondary hover:bg-emerald-500 text-white font-bold py-3 px-4 rounded-lg text-base transition-transform transform hover:scale-105 disabled:bg-emerald-300",children:[v.jsx(XD,{className:"w-5 h-5"}),v.jsx("span",{children:n?"...":v.jsxs(v.Fragment,{children:["Adquirir Plan",v.jsx("br",{}),"20 usd/mes"]})})]}),v.jsx("button",{onClick:s,className:"bg-primary hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg text-base transition-transform transform hover:scale-105",children:"Acceso Entrenador"})]})})},aw=({exercise:s,workoutId:e,exerciseIndex:n,isReadOnly:r=!1})=>{const{updateClientExercise:o}=gr(),[u,d]=te.useState(s.clientWeight||""),[m,g]=te.useState(s.clientNotes||""),[y,b]=te.useState(!1),A=async()=>{if(r)return;b(!0);const G={...s,isCompleted:!s.isCompleted,clientWeight:u,clientNotes:m};try{await o(e,n,G),In.success(G.isCompleted?"¡Ejercicio completado!":"Ejercicio desmarcado.")}catch{In.error("No se pudo guardar el cambio.")}finally{b(!1)}},x=s.isCompleted?"bg-green-50 border-green-300":"bg-white border-gray-200",j=s.isCompleted?"text-gray-500":"text-gray-800",K=s.isCompleted?"line-through":"";return v.jsxs("div",{className:`p-4 rounded-lg border shadow-sm transition-colors ${x}`,children:[v.jsxs("div",{className:"flex justify-between items-start",children:[v.jsxs("div",{children:[v.jsx("h4",{className:`text-lg font-bold ${j} ${K}`,children:s.name}),s.videoUrl&&v.jsxs("a",{href:s.videoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline flex items-center gap-1 mt-1",children:[v.jsx(rw,{className:"w-4 h-4"})," Ver Video"]})]}),v.jsx("button",{onClick:A,disabled:y||r,className:`p-2 rounded-full transition-colors ${s.isCompleted?"bg-green-500 hover:bg-green-600 text-white":"bg-gray-200 hover:bg-gray-300"} disabled:opacity-50 disabled:cursor-not-allowed`,"aria-label":s.isCompleted?"Marcar como no completado":"Marcar como completado",children:v.jsx(hO,{className:"w-5 h-5"})})]}),v.jsxs("div",{className:"mt-4 grid grid-cols-2 sm:grid-cols-4 gap-4 text-center",children:[v.jsxs("div",{className:`${K}`,children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Series"}),v.jsx("p",{className:`font-semibold text-lg ${j}`,children:s.sets})]}),v.jsxs("div",{className:`${K}`,children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Reps"}),v.jsx("p",{className:`font-semibold text-lg ${j}`,children:s.reps})]}),v.jsxs("div",{className:`${K}`,children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Descanso"}),v.jsx("p",{className:`font-semibold text-lg ${j}`,children:s.rest})]}),v.jsxs("div",{className:`${K}`,children:[v.jsx("p",{className:"text-sm text-gray-500",children:"Peso Sugerido"}),v.jsx("p",{className:`font-semibold text-lg ${j}`,children:s.weight||"N/A"})]})]}),s.trainerNotes&&v.jsxs("div",{className:"mt-4 p-3 bg-indigo-50 rounded-md",children:[v.jsx("p",{className:"text-sm font-semibold text-indigo-800",children:"Notas del Entrenador:"}),v.jsx("p",{className:"text-sm text-indigo-700",children:s.trainerNotes})]}),v.jsxs("div",{className:"mt-4 space-y-3",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:`weight-${s.id}`,className:"block text-sm font-medium text-gray-700",children:"Peso Utilizado (kg/lbs)"}),v.jsx("input",{type:"text",id:`weight-${s.id}`,value:u,onChange:G=>d(G.target.value),readOnly:r,className:`mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm ${r?"bg-gray-100 cursor-not-allowed":""}`,placeholder:"Ej: 80kg"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:`notes-${s.id}`,className:"block text-sm font-medium text-gray-700",children:"Mis Notas"}),v.jsx("textarea",{id:`notes-${s.id}`,rows:2,value:m,onChange:G=>g(G.target.value),readOnly:r,className:`mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm ${r?"bg-gray-100 cursor-not-allowed":""}`,placeholder:"¿Cómo te sentiste? ¿Alguna dificultad?"})]})]})]})},s4=s=>s?s.reduce((e,n)=>n.exercises.some(o=>o.isCompleted)?e+1:e,0):0,ow=({workouts:s})=>{const e=s4(s),n=s.length>4?s.length:4;return v.jsxs("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:[v.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:"Progreso Semanal"}),v.jsx("div",{className:"flex items-center gap-2",children:Array.from({length:n}).map((r,o)=>{const u=o<e;return v.jsx("div",{className:`w-full h-2 rounded-full flex items-center justify-center ${u?"bg-green-500":"bg-gray-200"}`,title:u?"Entrenamiento completado":"Pendiente"},o)})}),v.jsxs("p",{className:"text-xs text-gray-500 mt-2 text-right",children:[e," de ",n," entrenamientos iniciados."]})]})},r4=s=>{const e=new Date().getDay();return e===0?6:e-1},yE=({client:s})=>{var r,o;const e=r4(((r=s.plan)==null?void 0:r.workouts)||[]),n=(o=s.plan)==null?void 0:o.workouts[e];return v.jsxs("div",{children:[v.jsxs("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:["¡Hola, ",s.username,"!"]}),!s.plan||s.plan.workouts.length===0?v.jsx("div",{className:"p-8 text-center bg-white rounded-lg shadow",children:v.jsx("p",{className:"text-gray-600",children:"Aún no tienes un plan de entrenamiento asignado."})}):v.jsxs(v.Fragment,{children:[v.jsx(ow,{workouts:s.plan.workouts}),n?v.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[v.jsxs("h3",{className:"text-xl font-semibold mb-4",children:["Tu entrenamiento de hoy: ",v.jsx("span",{className:"text-indigo-600",children:n.day})]}),v.jsx("a",{href:"#today-workout",className:"w-full text-center bg-indigo-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-indigo-700 transition-colors block",children:"¡Empezar a Entrenar!"})]}):v.jsxs("div",{className:"p-8 text-center bg-white rounded-lg shadow",children:[v.jsx("p",{className:"text-2xl font-semibold mb-2",children:"¡Día de Descanso!"}),v.jsx("p",{className:"text-gray-600",children:"Aprovecha para recuperar."})]})]}),v.jsx("div",{id:"today-workout",className:"mt-8 space-y-8",children:n&&v.jsxs("div",{className:"bg-surface p-4 sm:p-6 rounded-xl shadow-md border border-gray-200",children:[v.jsxs("h3",{className:"text-2xl font-bold text-gray-800 mb-5 flex items-center gap-3",children:[v.jsx(nw,{className:"w-6 h-6 text-indigo-600"}),n.day]}),v.jsx("div",{className:"space-y-4",children:n.exercises.map((u,d)=>v.jsx(aw,{exercise:u,workoutId:n.id,exerciseIndex:d},`${u.id}-${d}`))})]})})]})},a4=({client:s})=>v.jsxs("div",{children:[v.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Tu Plan Semanal"}),!s.plan||s.plan.workouts.length===0?v.jsx("p",{className:"text-gray-600 text-center",children:"Aún no tienes un plan de entrenamiento asignado."}):v.jsxs(v.Fragment,{children:[v.jsx(ow,{workouts:s.plan.workouts}),v.jsx("div",{className:"space-y-8",children:s.plan.workouts.map(e=>v.jsxs("div",{className:"bg-surface p-4 sm:p-6 rounded-xl shadow-md border border-gray-200",children:[v.jsxs("h3",{className:"text-2xl font-bold text-gray-800 mb-5 flex items-center gap-3",children:[v.jsx(nw,{className:"w-6 h-6 text-indigo-600"}),e.day]}),v.jsx("div",{className:"space-y-4",children:e.exercises.map((n,r)=>v.jsx(aw,{exercise:n,workoutId:e.id,exerciseIndex:r,isReadOnly:!0},`${n.id}-${r}`))})]},e.id))})]})]}),o4=({client:s})=>v.jsxs("div",{children:[v.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Tu Progreso"}),v.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[v.jsx("h3",{className:"font-semibold text-lg text-gray-700",children:"Progreso en Ejercicios"}),v.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Selecciona un ejercicio para ver cómo has mejorado tu fuerza con el tiempo."}),v.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-800 p-4 rounded-md",children:[v.jsx("p",{className:"font-bold",children:"¡Próximamente!"}),v.jsx("p",{className:"text-sm",children:"Estamos trabajando en los gráficos de progreso. ¡Pronto podrás ver aquí tu evolución!"})]}),v.jsxs("div",{className:"mt-6 opacity-40",children:[v.jsx("label",{htmlFor:"exercise-select",className:"block text-sm font-medium text-gray-700",children:"Seleccionar Ejercicio"}),v.jsx("select",{id:"exercise-select",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md bg-gray-100",disabled:!0,children:v.jsx("option",{children:"Press de Banca"})}),v.jsx("div",{className:"mt-4 h-64 bg-gray-200 rounded-lg flex items-center justify-center",children:v.jsx("p",{className:"text-gray-500",children:"Aquí se mostrará el gráfico"})})]})]})]}),l4=({trainer:s})=>s?v.jsxs("div",{children:[v.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Tu Entrenador"}),v.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[v.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[v.jsx("img",{src:s.photoURL||`https://ui-avatars.com/api/?name=${s.username}&background=random&color=fff`,alt:s.username,className:"w-24 h-24 rounded-full object-cover border-4 border-gray-200"}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:s.username}),v.jsx("p",{className:"text-gray-500",children:s.email})]})]}),s.description&&v.jsxs("div",{children:[v.jsx("h4",{className:"font-semibold text-lg text-gray-700 mb-2",children:"Sobre mí"}),v.jsx("p",{className:"text-gray-600 whitespace-pre-wrap",children:s.description})]}),s.galleryImages&&s.galleryImages.length>0&&v.jsxs("div",{className:"mt-6",children:[v.jsx("h4",{className:"font-semibold text-lg text-gray-700 mb-2",children:"Galería"}),v.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:s.galleryImages.map((e,n)=>v.jsx("div",{className:"aspect-square",children:v.jsx("img",{src:e,alt:`Galería ${n+1}`,className:"w-full h-full object-cover rounded-lg shadow-sm"})},n))})]})]})]}):v.jsx("div",{className:"text-center p-8",children:"Cargando perfil del entrenador..."}),u4=()=>{const{currentUser:s,getTrainerProfile:e}=gr(),n=s,[r,o]=te.useState("today"),[u,d]=te.useState(null);te.useEffect(()=>{(async()=>{if(n!=null&&n.trainerId){const y=await e(n.trainerId);d(y)}})()},[n==null?void 0:n.trainerId,e]);const m=()=>{switch(r){case"today":return v.jsx(yE,{client:n});case"plan":return v.jsx(a4,{client:n});case"progress":return v.jsx(o4,{client:n});case"trainer":return v.jsx(l4,{trainer:u});default:return v.jsx(yE,{client:n})}};return n?v.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[v.jsx("main",{className:"flex-1 p-4 pb-20",children:m()}),v.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-t-lg",children:v.jsxs("div",{className:"flex justify-around max-w-lg mx-auto",children:[v.jsx($c,{icon:yO,label:"Hoy",view:"today",activeView:r,onClick:o}),v.jsx($c,{icon:TO,label:"Mi Plan",view:"plan",activeView:r,onClick:o}),v.jsx($c,{icon:oO,label:"Progreso",view:"progress",activeView:r,onClick:o}),v.jsx($c,{icon:nd,label:"Mi Coach",view:"trainer",activeView:r,onClick:o})]})})]}):v.jsx("div",{className:"p-8 text-center",children:"Cargando datos..."})},$c=({icon:s,label:e,view:n,activeView:r,onClick:o})=>{const u=r===n,d=u?"text-indigo-600":"text-gray-500";return v.jsxs("button",{onClick:()=>o(n),className:`flex flex-col items-center justify-center p-3 w-full ${d} transition-colors`,children:[v.jsx(s,{className:"w-6 h-6 mb-1"}),v.jsx("span",{className:`text-xs font-medium ${u?"font-bold":""}`,children:e})]})},c4=()=>{const{currentUser:s,isAuthLoading:e}=gr(),[n,r]=te.useState("landing");if(e)return v.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Cargando..."});if(!s)switch(n){case"onboarding":return v.jsx(i4,{onNavigateToLogin:()=>r("login"),onNavigateToLanding:()=>r("landing")});case"login":return v.jsx(WD,{onNavigateToLanding:()=>r("landing")});case"landing":default:return v.jsx(n4,{onNavigateToOnboarding:()=>r("onboarding"),onNavigateToLogin:()=>r("login")})}return v.jsxs("div",{className:"bg-background min-h-screen text-text-primary font-sans",children:[v.jsx(eO,{}),v.jsxs("main",{children:[s.role==="trainer"&&v.jsx(QD,{children:v.jsx(t4,{})}),s.role==="client"&&v.jsx(u4,{})]})]})},h4=()=>v.jsxs(KD,{children:[v.jsx(V1,{position:"top-center",reverseOrder:!1,toastOptions:{duration:4e3,style:{background:"#374151",color:"#ffffff",borderRadius:"8px",fontSize:"16px",padding:"16px"},success:{iconTheme:{primary:"#10b981",secondary:"white"}},error:{iconTheme:{primary:"#ef4444",secondary:"white"}}}}),v.jsx(c4,{})]}),lw=document.getElementById("root");if(!lw)throw new Error("Could not find root element to mount to");const d4=QA.createRoot(lw);d4.render(v.jsx(h4,{}));
//# sourceMappingURL=index-D_MoG-t5.js.map
